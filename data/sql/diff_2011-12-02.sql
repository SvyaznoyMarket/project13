CREATE TABLE `product_state` (`id` BIGINT AUTO_INCREMENT, `region_id` BIGINT NOT NULL, `product_id` BIGINT NOT NULL, `view_show` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Показывать товар по прямой ссылке?', `view_list` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Показывать товар в списке категорий?', `is_instock` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Есть ли товар в наличии?', `is_price` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Есть ли цена? (из core)', `is_shop` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Есть ли наличие в магазине? (из core)', `is_store` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Есть ли наличие на складах? (из core)', `is_supplied` TINYINT(1) DEFAULT '0' NOT NULL COMMENT 'Есть ли у поставщика? (из core)', `status_id` BIGINT COMMENT 'Статус товара из core', `core_id` BIGINT COMMENT 'ид записи в Core', INDEX `product_id_idx` (`product_id`), INDEX `region_id_idx` (`region_id`), PRIMARY KEY(`id`)) COMMENT = 'Состояние товара по регионам' ENGINE = INNODB;
ALTER TABLE `product_state` ADD CONSTRAINT `product_state_region_id_region_id` FOREIGN KEY (`region_id`) REFERENCES `region`(`id`) ON DELETE CASCADE;
ALTER TABLE `product_state` ADD CONSTRAINT `product_state_product_id_product_id` FOREIGN KEY (`product_id`) REFERENCES `product`(`id`) ON DELETE CASCADE;
