<?php

/**
 * RegionTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class RegionTable extends myDoctrineTable
{

  /**
   * Returns an instance of this class.
   *
   * @return object RegionTable
   */
  public static function getInstance()
  {
    return Doctrine_Core::getTable('Region');
  }

  public function createBaseQuery(array $params = array())
  {
    $this->applyDefaultParameters($params);

    $q = $this->createQuery('region');

    $q->where('region.level > ?', 0);
    $q->orderBy('region.root_id, region.lft');

    return $q;
  }

  public function getDefault()
  {
    return $this->createBaseQuery()
      ->where('region.token = ?', 'moscow')
      ->fetchOne()
    ;
  }
}