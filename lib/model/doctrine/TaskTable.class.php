<?php

/**
 * TaskTable
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class TaskTable extends myDoctrineTable
{

  /**
   * Returns an instance of this class.
   *
   * @return object TaskTable
   */
  public static function getInstance()
  {
    return Doctrine_Core::getTable('Task');
  }

  public function getDefaultParameters()
  {
    return array();
  }

  public function createBaseQuery(array $params = array())
  {
    $this->applyDefaultParameters($params);

    $q = $this->createQuery('product');

    $q->orderBy('priority ASC');

    return $q;
  }

  public function getRunningList(array $params = array())
  {
    $q = $this->createBaseQuery($params);

    $this->setQueryParameters($q, $params);

    return $q->execute();
  }

  public function getByCoreId($coreId, array $params = array())
  {
    return $this->createQuery()
      ->where('core_id = ?', $coreId)
      ->orderBy('updated_at DESC')
      ->fetchOne()
    ;
  }
}