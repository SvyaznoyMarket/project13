<!DOCTYPE html>
<html>
	<head>
		<title>polygons</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<!-- <script src="http://api-maps.yandex.ru/2.0-stable/?load=package.full&lang=ru-RU" type="text/javascript"></script> -->
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=geometry"></script>
		<script src="http://yandex.st/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
	</head>
	<body>
		<!-- <div id="map" style="width: 800px; height: 600px"></div> -->
		<input type="text" id="adr" value="г.Москва, ул.Орджоникидзе" />
		<input id="btn" type="button" value="Geocode">
		<div id="map-canvas" style="width: 800px; height: 600px"></div>


		<script type="text/javascript">
		// 	ymaps.ready(init);
		// 	var myMap;

		// 	var url = "http://selected.jino.ru/enter_ps_map_1.kml"; 
		// 	// var url = 'http://simbio.narod.ru/polygons100.xml';

		// 	function init(){     
		// 		myMap = new ymaps.Map ("map", {
		// 			center: [55.76, 37.64],
		// 			zoom: 7,
		// 		});
		// 		myMap.controls.add(
		// 			new ymaps.control.ZoomControl()
		// 		);
		// 		console.log('loading...')
		// 		ymaps.geoXml.load(url).then(function (res) {
		// 			console.log('load complete')
		// 			myMap.geoObjects.add(res.geoObjects);

		// 			// console.log(myMap.geoObjects.getIterator())
					
		// 		},
		// 		function (error) { // Вызывается в случае неудачной загрузки YMapsML-файла
		// 			console.log(error);
		// 			alert("При загрузке YMapsML-файла произошла ошибка: " + error);
		// 		});
		// 	}
		</script>


		<script type="text/javascript">
			var myLatLng = new google.maps.LatLng(55.76, 37.64);
			var mapOptions = {
				zoom: 10,
				center: myLatLng,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			}

			var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
			var geocoder = new google.maps.Geocoder();

			var georssLayer = new google.maps.KmlLayer('http://selected.jino.ru/enter_ps_map_1.kml');
			georssLayer.setMap(map);

			console.log(georssLayer)

			google.maps.event.addListener(georssLayer, 'click', function(event) {
				console.log('12')
				// map.setZoom(10);
				console.log(event);
				console.log(event.featureData)
				// map.setCenter(marker.getPosition());
			});

			$('#btn').bind('click', function(){
				var address = $('#adr').val();
				console.log(address)
				geocoder.geocode( { 'address':address}, function(results, status) {
					if (status == google.maps.GeocoderStatus.OK) {
						map.setCenter(results[0].geometry.location);
						console.log(results[0].geometry.location)
						var marker = new google.maps.Marker({ // маркер
							position: results[0].geometry.location,
							map: map
						});
						// console.log(google.maps.geometry.poly.containsLocation(google.maps.LatLng(results[0].geometry.location.jb, results[0].geometry.location.jb.kb), polygons))
						map.setZoom(12);
					}
					else{
						console.log('Geocode was not successful for the following reason: ' + status);
					}
				})
			})

		</script>

	</body>
</html>