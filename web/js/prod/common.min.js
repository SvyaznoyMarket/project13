if($(function(a){function b(){var b=this;return b.searchInput=ko.observable(""),b.searchFocus=ko.observable(!1),b.searchResults=ko.observableArray(),b.advancedSearch=ko.observable(f),b.searchCategoryVisible=ko.observable(!1),b.currentCategory=ko.observable(null),b.previousCategory=ko.observable(null),b.searchResultCategories=ko.observableArray(),b.searchResultProducts=ko.observableArray(),b.isNoSearchResult=ko.computed(function(){return 0==b.searchResultCategories().length&&0==b.searchResultProducts().length}),b.toggleCategoryVisibility=function(){b.searchCategoryVisible(!b.searchCategoryVisible())},b.searchResultNavigation=function(c,d){var e=d.which,f=a(".jsSearchbarResults a"),g="searchdd_lk_iact",h=f.index(f.filter("."+g));if(!b.isNoSearchResult())switch(f.removeClass(g),e){case 13:if(h>-1)return window.location.href=f.eq(h).attr("href"),!1;break;case 38:f.eq(h-1).addClass(g);break;case 40:f.eq(h+1).addClass(g)}return!0},b.categoryClick=function(c,d){var e=a(d.target).data("value");b.currentCategory(e),b.toggleCategoryVisibility()},b.categoryReset=function(){b.currentCategory(null),b.toggleCategoryVisibility()},b.searchResultsVisibility=ko.computed(function(){return b.searchFocus()}).extend({throttle:200}),ko.computed(function(){var c=b.searchInput(),e={q:c,sender:"knockout"};null!=b.currentCategory()&&(e.catId=b.currentCategory().id),c.length<3||a.get(d,e).done(function(a){b.searchResultCategories(a.result.categories),b.searchResultProducts(a.result.products)}).fail(function(){})}).extend({throttle:200}),b.currentCategory.subscribe(function(a){b.previousCategory(a)},b,"beforeChange"),b.currentCategory.subscribe(function(a){var d=null===b.previousCategory()?"":b.previousCategory().name;null==a?c.trigger("trackGoogleEvent",["search_scope","clear",d]):null==b.previousCategory()?c.trigger("trackGoogleEvent",["search_scope","change",a.name+"_Все товары"]):c.trigger("trackGoogleEvent",["search_scope","change",a.name+"_"+d])}),b}var c=a(document.body),d="/search/autocomplete",e=JSON.parse(docCookies.getItem("switch")),f=e&&"on"==e.adv_search;c.find(".jsKnockoutSearch").each(function(){ko.applyBindings(new b,this)})}(jQuery)),function(a){ko.bindingHandlers.buyButtonBinding={update:function(b,c){var d=ko.unwrap(c()),e=a(b),f=e.data("product-id"),g=e.data("in-shop-stock-only"),h=e.data("in-shop-showroom-only"),i=e.data("is-buyable"),j=e.data("status-id"),k=e.data("noUpdate");"undefined"==typeof i||i?"undefined"!=typeof j&&5==j?e.text("Купить").addClass("mDisabled").removeClass("mShopsOnly").removeClass("mBought").addClass("jsBuyButton").attr("href","#"):"undefined"!=typeof g&&g&&ENTER.config.pageConfig.user.region.forceDefaultBuy?e.text("Резерв").removeClass("mDisabled").addClass("mShopsOnly").removeClass("mBought").removeClass("jsBuyButton").attr("href",ENTER.utils.generateUrl("cart.oneClick.product.set",{productId:f})):ENTER.utils.getObjectWithElement(d,"id",f)&&!k?e.text("В корзине").removeClass("mDisabled").removeClass("mShopsOnly").addClass("mBought").removeClass("jsBuyButton").attr("href",ENTER.utils.generateUrl("cart")):e.hasClass("mBought")&&e.text("Купить").removeClass("mDisabled").removeClass("mShopsOnly").removeClass("mBought").addClass("jsBuyButton").attr("href",ENTER.utils.generateUrl("cart.product.set",{productId:f})):e.text("undefined"!=typeof h&&h?"На витрине":"Нет").addClass("mDisabled").removeClass("mShopsOnly").removeClass("mBought").addClass("jsBuyButton").attr("href","#")}},ko.bindingHandlers.buySpinnerBinding={update:function(b,c){var d=ko.unwrap(c()),e=a(b);e.removeClass("mDisabled").find("input").attr("disabled",!1),a.each(d,function(a,b){this.id==e.data("product-id")&&(e.addClass("mDisabled"),e.find("input").val(b.quantity()).attr("disabled",!0))})}},ko.bindingHandlers.compareButtonBinding={update:function(b,c){var d,e=ko.unwrap(c()),f=a(b),g=f.data("id"),h=f.data("type-id");ENTER.utils.getObjectWithElement(e,"id",g)?f.addClass("btnCmpr-act").find("a.btnCmpr_lk").addClass("btnCmpr_lk-act").attr("href",ENTER.utils.generateUrl("compare.delete",{productId:g})).find("span").text("Убрать из сравнения"):f.removeClass("btnCmpr-act").find("a.btnCmpr_lk").removeClass("btnCmpr_lk-act").attr("href",ENTER.utils.generateUrl("compare.add",{productId:g})).find("span").text("Добавить к сравнению"),d=a.grep(e,function(a){return h==a.typeId}),d.length>1?f.find(".btnCmpr_more").show().find(".btnCmpr_more_qn").text(d.length):f.find(".btnCmpr_more").hide()}},ko.bindingHandlers.compareListBinding={update:function(b,c){var d=ko.unwrap(c()),e=a(b),f=e.data("id");ENTER.utils.getObjectWithElement(d,"id",f)?e.addClass("btnCmprb-act").attr("href",ENTER.utils.generateUrl("compare.delete",{productId:f})):e.removeClass("btnCmprb-act").attr("href",ENTER.utils.generateUrl("compare.add",{productId:f}))}}}(jQuery),$(function(){function a(a){var b={};return $.each(a,function(a,c){b[a]=c}),b.quantity=ko.observable(a.quantity),b}function b(){var b={};return b.name=ko.observable(),b.firstName=ko.observable(),b.lastName=ko.observable(),b.link=ko.observable(),b.isEnterprizeMember=ko.observable(),b.isUpdated=ko.observable(!1),b.cart=ko.observableArray(),b.cartSum=ko.computed(function(){var a=0;return $.each(b.cart(),function(b,c){a+=c.price*c.quantity()}),a}),b.compare=ko.observableArray(),b.isProductInCompare=function(a){return 0==$.grep(b.compare,function(b){return b.id==$(a).data("id")}).length},b.update=function(c){c.user&&(c.user.name&&b.name(c.user.name),c.user.firstName&&b.firstName(c.user.firstName),c.user.lastName&&b.lastName(c.user.lastName),c.user.link&&b.link(c.user.link),c.user.isEnterprizeMember&&b.isEnterprizeMember(c.user.isEnterprizeMember)),c.cartProducts&&$.isArray(c.cartProducts)&&$.each(c.cartProducts,function(c,d){b.cart.unshift(a(d))}),c.compare&&$.each(c.compare,function(a,c){b.compare.push(c)}),b.isUpdated(!0),i.trigger("userModelUpdate")},b.productQuantityUpdate=function(a,c){$.each(b.cart(),function(b,d){a==d.id&&d.quantity(c)})},b.removeProductByID=function(a){b.cart.remove(function(b){return b.id==a})},b.infoIconVisible=ko.observable(!1),b.infoBlock_1Visible=ko.computed(function(){return ENTER.config.pageConfig.selfDeliveryTest&&ENTER.config.pageConfig.selfDeliveryLimit>b.cartSum()}),b.infoBlock_2Visible=ko.computed(function(){return ENTER.config.pageConfig.selfDeliveryTest&&ENTER.config.pageConfig.selfDeliveryLimit<=b.cartSum()&&docCookies.hasItem("enter_ab_self_delivery_view_info")}),b}function c(a){var b="topbarfix_cmpr_popup-show";if(!g){var c=ENTER.userBar.userBarFixed;g=$(".js-compare-addPopup",c),$(".js-compare-addPopup-closer",g).click(function(){g.removeClass(b)}),$(".js-topbarfixLogin, .js-topbarfixNotEmptyCart",c).mouseover(function(){g.removeClass(b)}),$("html").click(function(){g.removeClass(b)}),$(g).click(function(a){a.stopPropagation()}),$(document).keyup(function(a){27==a.keyCode&&g.removeClass(b)})}h&&clearTimeout(h),h=setTimeout(function(){g.removeClass(b)},2e3),$(".js-compare-addPopup-image",g).attr("src",a.imageUrl),$(".js-compare-addPopup-prefix",g).text(a.prefix),$(".js-compare-addPopup-webName",g).text(a.webName),ENTER.userBar.show(!0,function(){g.addClass(b)})}var d,e,f,g,h,i=$(document.body),j=ENTER.config.pageConfig.user.region.name,k=ENTER.config.pageConfig.userUrl+"?ts="+(new Date).getTime()+Math.floor(1e3*Math.random()),l="_authorized";ENTER.UserModel=b(),$(".js-topbarfix, .js-WidgetBuy, .js-listing, .js-jewelListing, .js-gridListing, .js-lineListing, .js-slider, .jsKnockoutCart").each(function(){ko.applyBindings(ENTER.UserModel,this)}),$.ajax({url:k,beforeSend:function(){d=(new Date).getTime()},success:function(a){e=(new Date).getTime(),f=e-d,ENTER.UserModel.update(a),"function"==typeof ga&&ga("send","timing","userInfo","Load User Info",f),ENTER.config.userInfo=a,docCookies.hasItem(l)||(a&&null!==a.id?docCookies.setItem(l,1,3600,"/"):docCookies.setItem(l,0,3600,"/")),i.trigger("userLogged",[a])}}),i.on("catalogLoadingComplete",function(){$(".js-listing, .js-jewelListing").each(function(){ko.cleanNode(this),ko.applyBindings(ENTER.UserModel,this)})}),i.on("click",".jsCompareLink, .jsCompareListLink",function(a){var b=this.href,d=$(this).data("id"),e=$(this).hasClass("btnCmprb-act");$(this).hasClass("jsCompareListLink")&&(b=e?ENTER.utils.generateUrl("compare.delete",{productId:d}):ENTER.utils.generateUrl("compare.add",{productId:d})),a.preventDefault(),$.ajax({url:b,success:function(a){a.compare&&(ENTER.UserModel.compare.removeAll(),$.each(a.compare,function(a,b){ENTER.UserModel.compare.push(b)}),e||c(a.product))}})}),i.on("addtocart",function(b,c){if(c.redirect)document.location.href=c.redirect;else{var d=c.products||[],e=ENTER.UserModel.cart();c.product&&d.push(c.product),$.each(d,function(b,c){var d=ENTER.utils.getObjectWithElement(e,"id",c.id);d?d.quantity(c.quantity):ENTER.UserModel.cart.unshift(a(c))})}}),i.on("mouseover",".btnBuy-inf",function(){docCookies.hasItem("enter_ab_self_delivery_view_info")||(docCookies.setItem("enter_ab_self_delivery_view_info",!0),ENTER.UserModel.cartSum()<ENTER.config.pageConfig.selfDeliveryLimit&&i.trigger("trackGoogleEvent",["Платный_самовывоз_"+j,"увидел всплывашку платный самовывоз","всплывающая корзина"]),ENTER.UserModel.cartSum()>=ENTER.config.pageConfig.selfDeliveryLimit&&i.trigger("trackGoogleEvent",["Платный_самовывоз_"+j,"самовывоз бесплатно","всплывающая корзина"])),ENTER.UserModel.infoIconVisible(!1)}),i.on("showUserCart",function(a){$(a.target);ENTER.config.pageConfig.selfDeliveryTest&&ENTER.UserModel.infoIconVisible()?i.trigger("trackGoogleEvent",["Платный_самовывоз_"+j,"увидел подсказку","всплывающая корзина"]):ENTER.config.pageConfig.selfDeliveryTest&&!ENTER.UserModel.infoIconVisible()&&i.trigger("trackGoogleEvent",["Платный_самовывоз_"+j,"не увидел подсказку","всплывающая корзина"]),ENTER.config.pageConfig.selfDeliveryTest&&!docCookies.hasItem("enter_ab_self_delivery_view_info")&&ENTER.UserModel.cartSum()<ENTER.config.pageConfig.selfDeliveryLimit&&ENTER.UserModel.infoIconVisible(!0),ENTER.config.pageConfig.selfDeliveryTest&&ENTER.UserModel.infoBlock_2Visible()&&!ENTER.UserModel.infoIconVisible()&&i.trigger("trackGoogleEvent",["Платный_самовывоз_"+j,"самовывоз бесплатно","всплывающая корзина"])}),i.on("userModelUpdate",function(){ENTER.config.pageConfig.selfDeliveryTest&&!docCookies.hasItem("enter_ab_self_delivery_view_info")&&ENTER.UserModel.cartSum()<ENTER.config.pageConfig.selfDeliveryLimit&&ENTER.UserModel.infoIconVisible(!0)}),i.on("click",".jsAbSelfDeliveryLink",function(a){var b=a.target.href;b&&(a.preventDefault(),i.trigger("trackGoogleEvent",{category:"Платный_самовывоз_"+j,action:"добрать товар",label:"всплывающая корзина",hitCallback:function(){window.location.href=b}}))})}),function(a,b,c){c.ajaxSetup({timeout:1e4,statusCode:{404:function(){this.url;"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Errors","Ajax Errors","404 ошибка, страница не найдена"])},401:function(){c("#auth-block").length?c("#auth-block").lightbox_me({centered:!0,onLoad:function(){c("#auth-block").find("input:first").focus()}}):"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Errors","Ajax Errors","401 ошибка, авторизуйтесь заново"])},500:function(){this.url;"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Errors","Ajax Errors","500 сервер перегружен"])},503:function(){this.url;"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Errors","Ajax Errors","503 ошибка, сервер перегружен"])},504:function(){this.url;"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Errors","Ajax Errors","504 ошибка, проверьте соединение с интернетом"])}},error:function(a,b){this.url;if("error"===a.statusText)"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Errors","Ajax Errors","неизвестная ajax ошибка"]);else if("timeout"===b)return}})}(this,this.document,this.jQuery,this.ENTER),function(a){var b=a(document.body),c=this.ga,d=this._gaq,e=function(b,e){var f={},g={hitType:"event"},h=["_trackEvent"],i=["category","action","label","value","nonInteraction","hitCallback"];if(2==arguments.length&&"object"==typeof e)a.each(i,function(a,b){e.hasOwnProperty(b)&&(f[b]=e[b])});else if(arguments.length>2&&"string"==typeof e)for(var j=1,k=arguments.length;k>j;j++)f[i[j-1]]=arguments[j];a.each(i,function(a,b){if(f.hasOwnProperty(b))switch(b){case"category":f[b]=f[b].slice(0,150);break;case"action":case"label":f[b]=f[b].slice(0,500);break;case"value":f[b]=parseInt(f[b].slice,10);break;case"nonInteraction":f[b]=Boolean(f[b])}}),"object"==typeof d&&(h.push(f.category,f.action),h.push(f.label?f.label:null),h.push(f.value?f.value:null),f.nonInteraction&&h.push(f.nonInteraction),d.push(h)),"function"==typeof c&&0!=c.getAll().length?(g.eventCategory=f.category,g.eventAction=f.action,f.label&&(g.eventLabel=f.label),f.value&&(g.eventValue=f.value),f.hitCallback&&(g.hitCallback=f.hitCallback),f.nonInteraction&&c("set","nonInteraction",!0),c("send",g)):"function"==typeof f.hitCallback&&f.hitCallback()},f=function(a){if(this.id=a.id?a.id:!1,this.affiliation=a.affiliation,this.total=a.total,this.shipping=a.shipping?a.shipping:"0",this.tax=a.tax?a.tax:"0",this.city=a.city?a.city:"",!this.id)throw"Некорректный ID транзакции";if(!this.total)throw"Некорректная сумма заказа";return this.toObject=function(){return{id:this.id,affiliation:this.affiliation,revenue:this.total,shipping:this.shipping,tax:this.tax}},this.toArray=function(){return[this.id,this.affiliation,this.total,this.tax,this.shipping,this.city]},this},g=function(a,b){if(this.id=b?String(b):"",this.name=a.name?String(a.name):"",this.category=a.category?String(a.category):"",this.sku=a.sku?String(a.sku):"",this.price=a.price?String(a.price):"",this.quantity=a.quantity?String(a.quantity):"",!this.id)throw"Некорректный ID товара";if(!this.name)throw"Некорректное название товара";if(!this.price)throw"Некорректная цена товара";if(!this.quantity)throw"Некорректное количество товара";return this.toObject=function(){return{id:this.id,name:this.name,sku:this.sku,category:this.category,price:this.price,quantity:this.quantity}},this.toArray=function(){return[this.id,this.sku,this.name,this.category,this.price,this.quantity]},this},h=function(b,e){var h,i;try{h=new f(e.transaction),i=a.map(e.products,function(a){return new g(a,h.id)}),"object"==typeof d&&(d.push(["_addTrans"].concat(h.toArray())),a.each(i,function(a,b){d.push(["_addItem"].concat(b.toArray()))}),d.push(["_trackTrans"])),"function"==typeof c&&0!=c.getAll().length&&(c("require","ecommerce","ecommerce.js"),c("ecommerce:addTransaction",h.toObject()),a.each(i,function(a,b){c("ecommerce:addItem",b.toObject())}),c("ecommerce:send"))}catch(j){}},i=function(c){var d=c||{orders:[]};a.each(d.orders,function(c,d){var e={};e.transaction={id:d.numberErp,affiliation:d.is_partner?"Партнер":"Enter",total:d.paySum,shipping:d.delivery[0].price,city:d.region.name},e.products=a.map(d.products,function(a){var c=d.is_partner?a.name+" (marketplace)":a.name;return"retailrocket"==a.sender&&(a.position&&(c+=" (RR_"+a.position+")"),a.from?b.trigger("trackGoogleEvent",["RR_покупка","Купил просмотренные",a.position?a.position:""]):b.trigger("trackGoogleEvent",["RR_покупка","Купил добавленные",a.position?a.position:""])),{id:a.id,name:c,sku:a.article,category:a.category[0].name+" - "+a.category[a.category.length-1].name,price:a.price,quantity:a.quantity}}),b.trigger("trackGoogleTransaction",[e])})};ENTER.utils.sendOrderToGA=i,"undefined"==typeof c&&(c=window[window.GoogleAnalyticsObject]),b.on("trackGoogleEvent",e),b.on("trackGoogleTransaction",h);try{"function"==typeof c&&0==c.getAll().length&&c("create","UA-25485956-5","enter.ru")}catch(j){}}(jQuery),function(){var a=!1,b=!1,c=function(){a?($("#mobilePhoneWrapper").hide(),$("#mobilePhoneWrapper").parent().find(".red").html(""),a=!1):($("#mobilePhoneWrapper").show(),a=!0)},d=function(){b?($("#emailWrapper").hide(),$("#emailWrapper").parent().find(".red").html(""),b=!1):($("#emailWrapper").show(),b=!0)};$(document).ready(function(){a=$(".smsCheckbox").hasClass("checked"),$("#user_mobile_phone").val()||$(".smsCheckbox").bind("click",c),b=$(".emailCheckbox").hasClass("checked"),$("#user_email").val()||$(".emailCheckbox").bind("click",d)})}(),function(){var a=$("body");a.on("click",".jsBuyButton",function(b){var c=$(this);a.trigger("TL_buyButton_clicked"),c.hasClass("mDisabled")&&b.preventDefault(),c.hasClass("mBought")&&(document.location.href(c.attr("href")),b.preventDefault()),c.addClass("mLoading"),$.ajax({url:c.attr("href"),type:"GET",success:function(b){var d=c.data("upsale")?c.data("upsale"):null,e=c.parents(".jsSliderItem").data("product");b.success&&(c.removeClass("mLoading"),b.product&&(b.product.isUpsale=e&&e.isUpsale?!0:!1,b.product.fromUpsale=d&&d.fromUpsale?!0:!1),a.trigger("addtocart",[b,d]))},error:function(){c.removeClass("mLoading")}}),b.preventDefault()}),a.on("addtocart",function(b,c){var d=function(a,b){var c=b.product,d=b.service,e=b.warranty,f=window.location.href,g={};"undefined"!=typeof _kmq&&(c&&(g={"Add to Cart SKU":c.article,"Add to Cart SKU Quantity":c.quantity,"Add to Cart Product Name":c.name,"Add to Cart Root category":c.category[0].name,"Add to Cart Root ID":c.category[0].id,"Add to Cart Category name":c.category?c.category[c.category.length-1].name:0,"Add to Cart Category ID":c.category?c.category[c.category.length-1].id:0,"Add to Cart SKU Price":c.price,"Add to Cart Page URL":f,"Add to Cart F1 Quantity":c.serviceQuantity},_kmq.push(["record","Add to Cart",g]),c.isUpsale&&_kmq.push(["record","cart rec added from rec",{"SKU cart added from rec":c.article}]),c.fromUpsale&&_kmq.push(["record","cart recommendation added",{"SKU cart rec added":c.article}])),d&&(g={"Add F1 F1 Name":d.name,"Add F1 F1 Price":d.price,"Add F1 SKU":c.article,"Add F1 Product Name":c.name,"Add F1 Root category":c.category[0].name,"Add F1 Root ID":c.category[0].id,"Add F1 Category name":c.category?c.category[c.category.length-1].name:0,"Add F1 Category ID":c.category?c.category[c.category.length-1].id:0},_kmq.push(["record","Add F1",g])),e&&(g={"Add Warranty Warranty Name":e.name,"Add Warranty Warranty Price":e.price,"Add Warranty SKU":c.article,"Add Warranty Product Name":c.name,"Add Warranty Root category":c.category[0].name,"Add Warranty Root ID":c.category[0].id,"Add Warranty Category name":c.category?c.category[c.category.length-1].name:0,"Add Warranty Category ID":c.category?c.category[c.category.length-1].id:0},_kmq.push(["record","Add Warranty",g])))},e=function(b,c){var d,e=c.product,f=function(){"undefined"!=typeof window.ga&&e.hasOwnProperty("isTchiboProduct")&&e.isTchiboProduct&&ga("tchiboTracker.send","event","Add2Basket",e.name,e.article)};if(e&&"undefined"!=typeof _gaq){f(),e.article&&(d="undefined"!=typeof e.price&&parseInt(e.price,10)<500?"product-500":"product",a.trigger("trackGoogleEvent",["Add2Basket",d,e.article])),e.isUpsale&&_gaq.push(["_trackEvent","cart_recommendation","cart_rec_added_from_rec",e.article]),e.fromUpsale&&_gaq.push(["_trackEvent","cart_recommendation","cart_rec_added_to_cart",e.article]);try{var g=c.sender;g&&"retailrocket"==g.name&&a.trigger("trackGoogleEvent",["RR_Взаимодействие","Добавил в корзину",g.position])}catch(h){}}},f=function(a,b){var c=b.product,d=c.id,e=c.category?c.category[c.category.length-1].id:0,f="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=182615&sz=add_basket&custom=10="+d+";11="+e+"&bt=55&pz=0&rnd=![rnd]",g=document,h=g.createElement("IMG"),i=g.body;f=f.replace(/!\[rnd\]/,Math.round(9999999*Math.random()))+"&tail256="+escape(g.referrer||"unknown"),h.style.position="absolute",h.style.width=h.style.height="0px",h.onload=h.onerror=function(){i.removeChild(h),h=i=null},h.src=f,i.insertBefore(h,i.firstChild)},g=function(a,b){var c=b.product;if("object"==typeof rcApi)try{rcApi.addToBasket(c.id)}catch(d){}},h=function(a,b){var c,d=b.product,e=b.regionId,f=window._rutarget||[];d&&e&&(c={event:"addToCart",sku:d.id,qty:d.quantity,regionId:e},f.push(c))},i=function(a,b){var c=b.product;"undefined"!=typeof c&&c.hasOwnProperty("id")&&"undefined"!=typeof JSREObject&&JSREObject("cart_add",c.id)};try{if(c.product&&(d(b,c),e(b,c),f(b,c),g(b,c)),c.products)for(var j in c.products)e(b,{product:c.products[j]}),"undefined"!=typeof window.ga&&window.ga("send","event","Add2Basket","product",c.products[j].article);h(b,c),i(b,c)}catch(k){}})}(window.ENTER),function(a){var b=$("body"),c=$(".popupRegion"),d=$("#jscity"),e=$("#jschangecity"),f=c.find(".inputClear"),g=$(".jsChangeRegion"),h=$(".jsChangeRegionAnalytics"),i=c.find(".regionSlidesWrap"),j=c.find(".moreCity"),k=c.find(".leftArr"),l=c.find(".rightArr"),m=c.find(".regionSlides"),n=c.find(".regionSlides_slide");d.autocomplete({autoFocus:!0,appendTo:"#jscities",source:function(a,b){$.ajax({url:d.data("url-autocomplete"),dataType:"json",data:{q:a.term},success:function(a){var c=a.data.slice(0,15);b($.map(c,function(a){return{label:a.name,value:a.name,url:a.url}}))}})},minLength:2,select:function(a,b){e.data("url",b.item.url),z()},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}});var o=function(){c.lightbox_me({autofocus:!0,onLoad:function(){d.val().length&&(d.putCursorAtEnd(),z())},onClose:function(){var b=g.data("region-id");a.docCookies.hasItem("geoshop")||a.docCookies.setItem("geoshop",b,31536e3,"/")}}),"/"===document.location.pathname&&b.trigger("trackGoogleEvent",[{category:"citySelector",action:"viewed",nonInteraction:!0}])},p=function(){var a=$(this),b=a.data("autoresolve-url"),c=function(a){if(!a.data.length)return $(".popupRegion .mAutoresolve").html(""),!1;var b=a.data[0].url,c=a.data[0].name,d=a.data[0].id;return 14974===d||108136===d?!1:void($(".popupRegion .mAutoresolve").length?$(".popupRegion .mAutoresolve").html('<a href="'+b+'">'+c+"</a>"):$(".popupRegion .cityInline").prepend('<div class="cityItem mAutoresolve"><a href="'+b+'">'+c+"</a></div>"))};return"undefined"!=typeof b&&$.ajax({type:"GET",url:b,success:c}),o(),!1},q=function(){var a=1*n.width(),b=1*m.width(),c=parseInt(m.css("left"),10);return k.show(),m.animate({left:c-a}),-b>=c-2*a&&l.hide(),!1},r=function(){var a=1*n.width(),b=(1*m.width(),parseInt(m.css("left"),10));return l.show(),m.animate({left:b+a}),b+2*a>=0&&k.hide(),!1},s=function(){return $(this).toggleClass("mExpand"),i.slideToggle(300),!1},t=function(){return d.val(""),y(),f.hide(),!1},u=function(){$(this).val()?(z(),f.show()):(y(),f.hide())},v=function(a){"undefined"!=typeof _gaq&&(_gaq.push(["_setCustomVar",1,"city",a,2]),_gaq.push(["_trackEvent","citySelector","selected",a])),"function"==typeof ga&&ga("send","event","citySelector","selected",a,{dimension14:a})},w=function(){var a=$(this).text();v(a)},x=function(){var b=$(this).data("url"),e=d.val();return v(e),b?a.location=b:c.trigger("close"),!1},y=function(){e.addClass("mDisabled"),e.attr("disabled","disabled")},z=function(){e.removeClass("mDisabled"),e.removeAttr("disabled")};e.on("click",x),j.on("click",s),f.on("click",t),l.on("click",q),k.on("click",r),d.on("keyup",u),b.on("click",".jsChangeRegion",p),h.on("click",w),a.docCookies.hasItem("geoshop")||o()}(this),function(){ENTER.counters={callGetIntentCounter:function(a){"undefined"==typeof __GetI&&(__GetI=[]),function(){var b={type:a.type,site_id:"267"};void 0!==a.productId&&(b.product_id=a.productId),void 0!==a.productPrice&&(b.product_price=a.productPrice),void 0!==a.categoryId&&(b.category_id=a.categoryId),void 0!==a.orderId&&(b.transaction_id=a.orderId),void 0!==a.orderProducts&&(b.order=a.orderProducts),void 0!==a.orderRevenue&&(b.revenue=a.orderRevenue),__GetI.push(b);var c="undefined"==typeof __GetI_domain?"px.adhigh.net":__GetI_domain,d=("https:"==document.location.protocol?"https://":"http://")+c+"/p.js",e=document.createElement("script");e.type="text/javascript",e.src=d;var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)}()},callRetailRocketCounter:function(a,b){function c(c){try{if(c&&c.id&&(rrPartnerUserId=c.id),d.hasOwnProperty(a)){var e={userId:c?c.id||!1:null,hasUserEmail:c&&c.email?!0:!1};d[a](b,e)}}catch(f){}}var d={product:function(a,b){var c=function(){try{rcApi.view(a,b.userId?b:void 0)}catch(c){}};rrApiOnReady.push(c)},"product.category":function(a,b){var c=function(){try{rcApi.categoryView(a,b.userId?b:void 0)}catch(c){}};rrApiOnReady.push(c)},"order.complete":function(a,b){b.userId&&(a.userId=b.userId,a.hasUserEmail=b.hasUserEmail);var c=function(){try{rcApi.order(a)}catch(b){}};rrApiOnReady.push(c)}};ENTER.config.userInfo===!1?c():ENTER.config.userInfo?c(ENTER.config.userInfo.user):setTimeout(function(){ENTER.config.userInfo?c(ENTER.config.userInfo.user):setTimeout(arguments.callee,100)},100)}}}(),function(){var a=$("input.bCustomInput, .js-customInput"),b=$("body"),c=function(){if($(this).is("[type=checkbox]")||$(this).is("[type=radio]")){var a=$(this),b=a.attr("id"),c=a.is("[type=checkbox]")?"checkbox":"radio",d=a.attr("name")||"",e=$('label[for="'+b+'"]');"checkbox"===c&&(a.is(":checked")?e.addClass("mChecked"):e.removeClass("mChecked")),"radio"===c&&a.is(":checked")&&($('input[name="'+d+'"]').each(function(){var a=$(this),b=a.attr("id");$('label[for="'+b+'"]').removeClass("mChecked")}),e.addClass("mChecked"))}};b.on("updateState",".bCustomInput, .js-customInput",c),b.on("change",".bCustomInput, .js-customInput",function(){$(this).trigger("updateState")}),a.trigger("updateState")}(),$(document).ready(function(){if($("#similarGoodsSlider").length){var a=$("#similarGoodsSlider"),b=a.find(".bSimilarGoodsSlider_eWrap"),c=a.find(".bSimilarGoodsSlider_eArrow"),d=0,e=0,f=0,g=0,h=0,i=function(){var a=$(this),b={"Recommended Item Clicked Similar Recommendation Place":"product","Recommended Item Clicked Similar Clicked SKU":a.data("article"),"Recommended Item Clicked Similar Clicked Product Name":a.data("name"),"Recommended Item Clicked Similar Product Position":a.data("pos")};"undefined"!=typeof _kmq&&_kmq.push(["record","Recommended Item Clicked Similar",b])},j=function(c){var h=a.find(".bSimilarGoodsSlider_eGoods");for(var i in c){var j=tmpl("similarGoodTmpl",c[i]);b.append(j)}d=h.width()+2*parseInt(h.css("paddingLeft"),10),f=h.length,g=d*f,b.width(g),f>0&&$(".bSimilarGoods").fadeIn(300,function(){e=a.width()}),4>f&&$(".bSimilarGoodsSlider_eArrow.mRight").hide()};$.getJSON($("#similarGoodsSlider").data("url"),function(a){if(!$.isEmptyObject(a)){var b=a;j(b)}}).done(function(){var c=a.find(".bSimilarGoodsSlider_eGoods");f=c.length,g=d*f,b.width(g),f>0&&$(".bSimilarGoods").fadeIn(300,function(){e=a.width()})}),c.bind("click",function(){return $(this).hasClass("mLeft")?h+=2*d:h-=2*d,e-g>=h?(h=e-g,$(".bSimilarGoodsSlider_eArrow.mRight").hide(),$(".bSimilarGoodsSlider_eArrow.mLeft").show()):h>=0?(h=0,$(".bSimilarGoodsSlider_eArrow.mLeft").hide(),$(".bSimilarGoodsSlider_eArrow.mRight").show()):c.show(),b.animate({left:h}),!1}),$(".bSimilarGoods.mProduct .bSimilarGoodsSlider_eGoods").on("click",i)}var k=function(){var a=$("#_categoryData").data("category"),b={"Viewed Category Category Type":a.type,"Viewed Category Category Level":a.level,"Viewed Category Parent category":a.parent_category,"Viewed Category Category name":a.category,"Viewed Category Category ID":a.id};"undefined"!=typeof _kmq&&_kmq.push(["record","Viewed Category",b])},l=function(){var a,b,c=$(this),d=!1,e=$("#_categoryData").data("category");a=c.parents(".js-goodsboxContainer"),a.length||(a=c.parents("div.goodsboxlink")),b=a.length?a.data("add"):!1,b&&e&&(d={"Category Results Clicked Category Type":e.type,"Category Results Clicked Category Level":e.level,"Category Results Clicked Parent category":e.parent_category,"Category Results Clicked Category name":e.category,"Category Results Clicked Category ID":e.id,"Category Results Clicked SKU":b.article,"Category Results Clicked Product Name":b.name,"Category Results Clicked Page Number":b.page,"Category Results Clicked Product Position":b.position}),d&&"undefined"!=typeof _kmq&&_kmq.push(["record","Category Results Clicked",d])};$("#_categoryData").length&&(k(),$("body").delegate(".js-goodsbox a","click",l));var m=function(){var a=$("#_searchKiss").data("search"),b={"Search String":a.query,"Search Page URL":a.url,"Search Items Found":a.count};"undefined"!=typeof _kmq&&_kmq.push(["record","Search",b]);var c=function(){var b=$(this).data("add"),c={"Search Results Clicked Search String":a.query,"Search Results Clicked SKU":b.article,"Search Results Clicked Product Name":b.name,"Search Results Clicked Page Number":b.page,"Search Results Clicked Product Position":b.position};"undefined"!=typeof _kmq&&_kmq.push(["record","Search Results Clicked",c])};$(".js-goodsboxContainer").on("click",c),$(".goodsboxlink").on("click",c)};$("#_searchKiss").length&&m()}),$(function(){var a=$("body");$(".jsEvent_documentReady").each(function(b,c){var d=$(c).data("value");d.name&&a.trigger(d.name,d.data||[])})}),function(){var a=function(){var a=$(this).data("goto");return $(document).stop().scrollTo($("#"+a),800),!1};$(document).ready(function(){$(".jsGoToId").bind("click",a)})}(),function(){var a=function(){var a=$(this);return a.hasClass("expanded")?(a.parent().parent().find(".toHide").hide(),a.html("Все метки"),a.removeClass("expanded")):(a.parent().parent().find(".toHide").show(),a.html("Основные метки"),a.addClass("expanded")),!1};$(document).ready(function(){$(".hotlinksToggle").bind("click",a)})}(),function(){$.ajax({url:"https://jira.enter.ru/s/ru_RU-istibo/773/3/1.2.4/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=2e17c5d6",type:"get",cache:!0,dataType:"script"}),window.ATL_JQ_PAGE_PROPS={triggerFunction:function(a){$("#jira").click(function(b){b.preventDefault(),a()})}}}(),function(){var a=$("#auth-block"),b=function(){a.on("changeState",function(a,b){var c=$(this);if(b){var d=c.attr("data-state")?"state_"+c.attr("data-state"):null,e="state_"+b;d&&c.removeClass(d),c.addClass(e),c.attr("data-state",b)}$(".js-resetForm, .js-authForm, .js-registerForm").trigger("clearError")}),a.find(".js-link").on("click",function(a){var b=$(a.target),c=$(b.data("value").target),d=b.data("value").state;c.trigger("changeState",[d])}),$(".js-resetForm, .js-authForm, .js-registerForm").on("submit",function(a){var b=$(a.target),c=b.serializeArray();$.post(b.attr("action"),c).done(function(a){function d(a){for(var b=0;b<c.length;b++)if(c[b].name==a)return c[b].value;return null}if(b.hasClass("js-registerForm")&&d("subscribe")&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","subscription","subscribe_registration",d("register[email]")]),a.data&&a.data.link)return window.location.href=a.data.link?a.data.link:window.location.href,!0;b.trigger("clearError");var e=a.message;!e&&a.notice&&a.notice.message&&(e=a.notice.message),e&&b.find(".js-message").html(e),a.form&&a.form.error&&$.each(a.form.error,function(a,c){b.trigger("fieldError",[c])})}),a.preventDefault()}).on("fieldError",function(a,b){var c=$(a.target),d=c.find('[name*="'+b.field+'"]');d.length&&(d.prev(".js-fieldError").remove(),b.message&&d.before('<div class="js-fieldError bErrorText"><div class="bErrorText__eInner">'+b.message+"</div></div>"))}).on("clearError",function(){var a=$(this);a.find(".js-message").html(""),a.find("input").each(function(b,c){a.trigger("fieldError",[{field:$(c).attr("name")}])})}).on("focus","input",function(){var a=$(this);a.closest("form").trigger("fieldError",[{field:a.attr("name")}])}),$.mask.definitions.n="[0-9]",$(".js-registerForm .js-phoneField").mask("+7 (nnn) nnn-nn-nn")};$(document).ready(function(){b()})}(window.ENTER),function(ENTER){var constructors=ENTER.constructors,body=$("body"),authBlock=$("#auth-block"),registerMailPhoneField=$(".jsRegisterUsername"),resetPwdForm=$(".jsResetPwdForm"),registerForm=$(".jsRegisterForm"),loginForm=$(".jsLoginForm"),completeRegister=$(".jsRegisterFormComplete"),showLoginFormLink=$(".jsShowLoginForm"),signinValidationConfig={fields:[{fieldNode:$(".jsSigninUsername",authBlock),require:!0,customErr:"Не указан логин"},{fieldNode:$(".jsSigninPassword",authBlock),require:!0,customErr:"Не указан пароль"}]},signinValidator=new FormValidator(signinValidationConfig),registerValidationConfig={fields:[{fieldNode:$(".jsRegisterFirstName",authBlock),require:!0,customErr:"Не указано имя"},{fieldNode:registerMailPhoneField,validBy:"isEmail",require:!0,customErr:"Некорректно введен e-mail"}]},registerValidator=new FormValidator(registerValidationConfig),forgotPwdValidationConfig={fields:[{fieldNode:$(".jsForgotPwdLogin",authBlock),require:!0,customErr:"Не указан email или мобильный телефон",validateOnChange:!0}]},forgotValidator=new FormValidator(forgotPwdValidationConfig),setValidatorSettings=function(){ENTER.utils.signinValidationConfig=signinValidationConfig,ENTER.utils.signinValidator=signinValidator,ENTER.utils.registerValidationConfig=registerValidationConfig,ENTER.utils.registerValidator=registerValidator,ENTER.utils.forgotPwdValidationConfig=forgotPwdValidationConfig,ENTER.utils.forgotValidator=forgotValidator
};setValidatorSettings(),constructors.Login=function(){"use strict";function Login(){return this instanceof Login?(this.form=null,this.redirect_to=null,body.on("click",".registerAnotherWayBtn",$.proxy(this.registerAnotherWay,this)),body.on("click",".bAuthLink",this.openAuth),$(".jsLoginForm, .jsRegisterForm, .jsResetPwdForm").data("redirect",!0).on("submit",$.proxy(this.formSubmit,this)),body.on("click",".jsForgotPwdTrigger, .jsRememberPwdTrigger",this.forgotFormToggle),body.on("click","#bUserlogoutLink",this.logoutLinkClickLog),void(showLoginFormLink.length&&(loginForm.hide(),body.on("click",".jsShowLoginForm",this.showLoginForm)))):new Login}return Login.prototype.showError=function(a,b){var c=$("ul.error_list",this.form);return void 0!==b&&b(),c.length?c.html("<li>"+a+"</li>"):$(".bFormLogin__ePlaceTitle",this.form).after($('<ul class="error_list" />').append("<li>"+a+"</li>")),!1},Login.prototype.formErrorHandler=function(a){var b=this.getFormValidator(),c=$('[name="'+this.getFormName()+"["+a.field+']"]'),d=function(){b._unmarkFieldError($(this))};return b._markFieldError(c,a.message),c.bind("focus",d),!1},Login.serverErrorHandler={"default":function(a){return a.redirect||(a.redirect=window.location.href),a.error&&a.error.message?(this.showError(a.error.message,function(){document.location.href=a.redirect}),!1):void(document.location.href=a.redirect)},0:function(a){var b=null;if(a.redirect)return void this.showError(a.error.message,function(){document.location.href=a.redirect});$("ul.error_list",this.form).length&&$("ul.error_list",this.form).html("");for(var c=a.form.error.length-1;c>=0;c--)b=a.form.error[c],"global"!==b.field&&null!==b.message?$.proxy(this.formErrorHandler,this)(b):"global"===b.field&&null!==b.message&&this.showError(b.message);return!1}},Login.prototype.checkEmail=function(){return registerMailPhoneField.hasClass("jsRegisterPhone")?!1:!0},Login.prototype.registerAnotherWay=function(){var a=$(".registerAnotherWay"),b=$(".registerAnotherWayBtn");return registerMailPhoneField.val(""),this.checkEmail()?(a.html("Ваш мобильный телефон:"),b.html("Ввести e-mail"),registerMailPhoneField.addClass("jsRegisterPhone"),registerValidator.setValidate(registerMailPhoneField,{validBy:"isPhone",customErr:"Некорректно введен телефон"}),$.mask.definitions.n="[0-9]",registerMailPhoneField.mask("+7 (nnn) nnn-nn-nn")):(a.html("Ваш e-mail:"),b.html("У меня нет e-mail"),registerMailPhoneField.removeClass("jsRegisterPhone"),registerValidator.setValidate(registerMailPhoneField,{validBy:"isEmail",customErr:"Некорректно введен e-mail"}),registerMailPhoneField.unmask()),!1},Login.prototype.openAuth=function(){var removeErrors=function(){var validators=["signin","register","forgot"],validator,config,self,i,j;for(j in validators)if(validator=eval("ENTER.utils."+validators[j]+"Validator"),config=eval("ENTER.utils."+validators[j]+"ValidationConfig"),config&&config.fields&&validator)for(i in config.fields)self=config.fields[i].fieldNode,self&&validator._unmarkFieldError(self)};return setValidatorSettings(),authBlock.lightbox_me({centered:!0,autofocus:!0,onLoad:function(){authBlock.find("input:first").focus()},onClose:function(){removeErrors(),authBlock.trigger("changeState",["default"])}}),!1},Login.prototype.submitBtnLoadingDisplay=function(a){if(a.length){var b=a.val(),c=a.data("loading-value");a.attr("disabled","disabled"===a.attr("disabled")?!1:!0).val(c).data("loading-value",b)}return!1},Login.prototype.getFormValidator=function(){return eval("ENTER.utils."+this.getFormName()+"Validator")},Login.prototype.getFormName=function(){return this.form.hasClass("jsLoginForm")?"signin":this.form.hasClass("jsRegisterForm")?"register":this.form.hasClass("jsResetPwdForm")?"forgot":""},Login.prototype.formSubmit=function(a){a.preventDefault(),this.form=$(a.target);var b,c=this.form.serializeArray(),d=this.getFormValidator(),e=$(".jsSubmit",this.form),f=$(".jsForgotPwdLogin",this.form),g=this.getUrlParams();this.redirect_to=window.location.href,g.redirect_to&&(this.redirect_to=g.redirect_to);var h=function(a){if(clearTimeout(b),a.error)return Login.serverErrorHandler.hasOwnProperty(a.error.code)?$.proxy(Login.serverErrorHandler[a.error.code],this)(a):Login.serverErrorHandler["default"](a),this.submitBtnLoadingDisplay(e),!1;if($.proxy(this.formSubmitLog,this),f.length&&f.is(":visible")&&(this.submitBtnLoadingDisplay(e),f.hide(),$(".jsForgotPwdLoginLabel",this.form).hide(),e.hide(),this.showError(a.notice.message)),"undefined"!=typeof gaRun&&"function"==typeof gaRun.register&&gaRun.register(),this.form.data("redirect")){if("undefined"!=typeof a.data.link)return document.location.href=a.data.link.replace(/#.*$/,""),!1;completeRegister.html(a.message),completeRegister.show(),registerForm.hide(),this.showLoginForm()}else authBlock.trigger("close");$("#order-form").length&&($("#user-block").html('Привет, <strong><a href="'+a.data.link+'">'+a.data.user.first_name+"</a></strong>"),$("#order_recipient_first_name").val(a.data.user.first_name),$("#order_recipient_last_name").val(a.data.user.last_name),$("#order_recipient_phonenumbers").val(a.data.user.mobile_phone.slice(1)),$("#qiwi_phone").val(a.data.user.mobile_phone.slice(1)))},i=function(){this.submitBtnLoadingDisplay(e),c.push({name:"redirect_to",value:this.redirect_to}),$.post(this.form.attr("action"),c,$.proxy(h,this),"json"),b=setTimeout($.proxy(function(){document.location.href=this.redirect_to},this),5e3)};return d.validate({onInvalid:function(a){},onValid:$.proxy(i,this)}),!1},Login.prototype.showLoginForm=function(){showLoginFormLink.hide(),loginForm.slideDown(300),$.scrollTo(loginForm,500)},Login.prototype.forgotFormToggle=function(){return resetPwdForm.is(":visible")?(resetPwdForm.hide(),loginForm.show()):(resetPwdForm.show(),loginForm.hide()),!1},Login.prototype.formSubmitLog=function(){var a="";"function"==typeof gaRun.login&&gaRun.login(),"signin"===this.getFormName()?("undefined"!=typeof _gaq&&(a=-1!==this.form.find(".jsSigninUsername").val().search("@")?"email":"mobile",_gaq.push(["_trackEvent","Account","Log in",a,window.location.href])),"undefined"!=typeof _kmq&&_kmq.push(["identify",this.form.find(".jsSigninUsername").val()])):"register"===this.getFormName()?("undefined"!=typeof _gaq&&(a=this.checkEmail()?"email":"mobile",_gaq.push(["_trackEvent","Account","Create account",a])),"undefined"!=typeof _kmq&&_kmq.push(["identify",this.form.find(".jsRegisterUsername").val()])):"forgot"===this.getFormName()&&"undefined"!=typeof _gaq&&(a=-1!==this.form.find(".jsForgotPwdLogin").val().search("@")?"email":"mobile",_gaq.push(["_trackEvent","Account","Forgot password",a]))},Login.prototype.logoutLinkClickLog=function(){"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"])},Login.prototype.getUrlParams=function(){var a,b,c={},d=window.location.search.substring(1).split("&");for(b=0;b<d.length;b++)a=d[b].split("="),c[a[0]]="undefined"==typeof a[1]?"":a[1];return c},Login}(),$(document).ready(function(){new ENTER.constructors.Login})}(window.ENTER),$(document).ready(function(){function a(a){return"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CategoryClick",a.data,window.location.pathname]),!0}$("body").on("click",".bSubscibe",function(){return $(this).hasClass("checked")?($(this).removeClass("checked"),$(this).find(".subscibe").removeAttr("checked"),$(this).find('input[name="subscribe"]').val(0)):($(this).addClass("checked"),$(this).find(".subscibe").attr("checked","checked"),$(this).find('input[name="subscribe"]').val(1)),!1}),$(".bMainMenuLevel-1__eLink").bind("click","Верхнее меню",a),$(".bMainMenuLevel-2__eLink").bind("click","Верхнее меню",a),$(".bMainMenuLevel-3__eLink").bind("click","Верхнее меню",a),$(".breadcrumbs").first().find("a").bind("click","Хлебные крошки сверху",a),$(".breadcrumbs-footer").find("a").bind("click","Хлебные крошки снизу",a),$(".bCtg__eMore").bind("click",function(a){a.preventDefault();var b=$(this);b.parent().find("li.hf").slideToggle();var c=b.find("a");c.text("еще..."==c.text()?"скрыть":"еще...")}),$(".product_buy-container").each(function(){var a=$(this).data("order");"object"!=typeof a||$.isEmptyObject(a)||$.ajax({url:$(this).data("url"),data:a,type:"POST",timeout:2e4})}),$(".searchtextClear").length&&($(".searchtextClear").each(function(){$(this).val().length?$(this).removeClass("vh"):$(this).addClass("vh")}),$(".searchtextClear").click(function(){$(this).siblings(".searchtext").val(""),$(this).addClass("vh"),$("#searchAutocomplete").length&&$("#searchAutocomplete").html("")})),$(".enterPrizeDesc").click(function(){$(this).next(".enterPrizeListWrap").toggle("fast")})}),$("nav").on("mouseenter",".navsite2_i",function(){$(this).find(".menuImgLazy").each(function(){$(this).attr("src",$(this).data("src"))})}),$("nav").on("mouseenter",".navsite_i",function(){var a=$(this),b=a.data("recommendUrl"),c=a.data("recommendXhr");b&&!c&&(c=$.get(b),a.data("recommendXhr",c),c.done(function(b){if(b.productBlocks){var c=a.find(".jsMenuRecommendation");$.each(b.productBlocks,function(a,b){try{if(!b.categoryId)return;var d=c.filter('[data-parent-category-id="'+b.categoryId+'"]');d.html(b.content)}catch(e){}})}}),c.fail(function(){a.data("recommendXhr",!1)}))}),$("body").on("click",".jsRecommendedItemInMenu",function(a){a.stopPropagation();try{var b=$(this),c=b.attr("href"),d=b.data("sender");$("body").trigger("trackGoogleEvent",{category:"RR_взаимодействие",action:"Перешел на карточку товара",label:d?d.position:null,hitCallback:function(){c&&setTimeout(function(){window.location.href=c},90)}}),b.trigger("TL_recommendation_clicked")}catch(e){}}),function(a){var b=function(b,c,d,e){var f=this;f.inputVars={domID:b,totalPages:c,visPages:d?d:10,activePage:e?e:1};var g=a("#"+f.inputVars.domID),h=g.width(),i=h*f.inputVars.visPages/f.inputVars.totalPages,j=i/f.inputVars.visPages,k=h/f.inputVars.visPages,l=Math.round(f.inputVars.visPages/2),m=function(b){var c=Math.round(b/j);a(".bPaginator_eWrap",g).css("left",-(k*c))},n=function(){var b=!1,c=0,d=0;a(".bPaginatorSlider",g).bind("mousedown",function(e){c=e.pageX,d=parseInt(a(".bPaginatorSlider_eFill",g).css("left"),10),b=!0}),a(".bPaginatorSlider",g).bind("mouseup",function(){b=!1}),g.bind("mouseout",function(){b=!1}),a(".bPaginatorSlider",g).bind("mousemove",function(e){if(b){var f=d+(e.pageX-c);f>=0&&h-i>=f&&(a(".bPaginatorSlider_eFill",g).css("left",d+(e.pageX-c)),m(f))}})},o=function(){g.append('<div class="bPaginator_eWrap"></div>'),g.append('<div class="bPaginatorSlider"><div class="bPaginatorSlider_eWrap"><div class="bPaginatorSlider_eFill" style="width:'+i+'px"></div></div></div>');for(var b=0;b<f.inputVars.totalPages;b++)a(".bPaginator_eWrap",g).append('<a class="bPaginator_eLink" href="#'+b+'">'+(b+1)+"</a>"),b+1===f.inputVars.activePage&&a(".bPaginator_eLink",g).eq(b).addClass("active");var c=a(".bPaginator_eLink",g).width();a(".bPaginator_eLink",g).css({marginLeft:(k-c-2)/2,marginRight:(k-c-2)/2}),a(".bPaginator_eWrap",g).addClass("clearfix").width(k*f.inputVars.totalPages)};f.setActive=function(b){var c=parseInt(a(".bPaginator_eWrap",g).css("left"),10),d=parseInt(a(".bPaginatorSlider_eFill",g).css("left"),10),e=-1*Math.round(c/k),h=-(l-(b-e));a(".bPaginator_eLink",g).removeClass("active"),a(".bPaginator_eLink",g).eq(b).addClass("active"),c-h*k>0?(c=0,d=0):b>f.inputVars.totalPages-l?(c=Math.round(f.inputVars.totalPages-f.inputVars.visPages)*k*-1,d=Math.round(f.inputVars.totalPages-f.inputVars.visPages)*j):(c-=h*k,d+=h*j),a(".bPaginator_eWrap").animate({left:c}),a(".bPaginatorSlider_eFill",g).animate({left:d})},o(),n()};if(a("#promoCatalog").length){var c,d,e,f,g=a("body"),h=a("#promoCatalog"),i=h.data("slides"),j=i.length,k=new b("promoCatalogPaginator",j,12,1),l=void 0!==h.data("use-interval")?h.data("use-interval"):!1,m=null,n=0,o=0,p=void 0!==h.data("use-hash")?h.data("use-hash"):!0,q=500,r=void 0!==h.data("use-carousel")?h.data("use-carousel"):!1,s=0,t=!1,u="undefined"!=typeof h.data("analytics-config")?h.data("analytics-config"):!1,v="undefined"!=typeof h.data("category-token")?h.data("category-token"):"",w=!1,x=function(){var b,c;for(r&&(a(".bPromoCatalogSlider_eArrow.mArLeft").show(),a(".bPromoCatalogSlider_eArrow.mArRight").show()),b=0;b<i.length;b++){c=tmpl("slide_tmpl",i[b]),a(c).length&&(c=a(c).attr("id","slide_id_"+b));var d=a(c).appendTo(".bPromoCatalogSliderWrap");ko.applyBindings(ENTER.UserModel,d[0]),""===a(".bPromoCatalogSliderWrap_eSlideLink").eq(b).attr("href")&&a(".bPromoCatalogSliderWrap_eSlideLink").eq(b).removeAttr("href"),a(".bPromoCatalogNav").append('<a id="promoCatalogSlide'+b+'" href="#'+b+'" class="bPromoCatalogNav_eLink">'+(1*b+1)+"</a>")}e=a(".bPromoCatalogSliderWrap_eSlide").width(),f=a(".bPromoCatalogSliderWrap").width(e*j+(470-e/2))},y=function G(a){var b=3e3,c=0;l&&(void 0==a?a=0:c=q,i.hasOwnProperty(a)&&i[a].hasOwnProperty("time")&&(b=i[a].time),b+=c,m=setTimeout(function(){a++,r||a>=j&&(a=0),D(a),G(a),"tchibo"==v&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","slider view","tchibo",E(a)+1+""])},b))},z=function(){m&&clearTimeout(m)},A=function(b){var c=a(this).hasClass("mArLeft")?"-1":"1",d=o+1*c;return b.preventDefault(),t?!1:(z(),D(d),y(d),void("tchibo"==v&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","slider view","tchibo",E(d)+1+""])))},B=function(b){var c;return b.preventDefault(),a(this).hasClass("active")?!1:t?!1:(c=1*a(this).attr("href").slice(1),z(),r?C(c):D(c),y(c),void("tchibo"==v&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","slider view","tchibo",c+1+""])))},C=function(b){var c,d=a(".jsPromoCatalogSliderWrap"),e=a(".bPromoCatalogSliderWrap_eSlide",d);void 0===b&&(b=0),c=e.index(a("#slide_id_"+b,d)),D(c)},D=function(b){var c,f,g=a(".bPromoCatalogSlider_eArrow.mArLeft"),h=a(".bPromoCatalogSlider_eArrow.mArRight"),l=a(".jsPromoCatalogSliderWrap"),m=function(){var b=a(".bPromoCatalogSliderWrap_eSlide",l);c=b.last(),b.last().remove(),l.prepend(c),l.css({left:l.position().left-e})},n=function(){var b=a(".bPromoCatalogSliderWrap_eSlide",l);c=b.first(),b.first().remove(),l.append(c),l.css({left:l.position().left+e})};d=b,o=b,r?(b>j-1?(n(),s++,b=0,o=j-1):0>b&&(m(),s--,b=j-1,o=0),d=a(".jsPromoCatalogSliderWrap .bPromoCatalogSliderWrap_eSlide").eq(o).attr("id").replace("slide_id_","")):(0===b?g.hide():g.show(),b===j-1?h.hide():h.show()),t=!0,a(".bPromoCatalogSliderWrap").animate({left:-(e*o)},q,function(){t=!1}),k.setActive(d),p&&(window.location.hash="slide"+(1*d+1)),f=i[d],f.hasOwnProperty("title")&&f.hasOwnProperty("time")&&F.checkRule("collection_view")&&F.collectionShow(f.title,1*d+1,f.time)},E=function(b){var c=parseInt(b);return r&&(b>j-1?b=j-1:0>b&&(b=0),c=parseInt(a(".jsPromoCatalogSliderWrap .bPromoCatalogSliderWrap_eSlide").eq(b).attr("id").replace("slide_id_",""))),c},F={init:function(){if(F.isAnalyticsEnabled){var b=function(){var b,c,d=a(this),e=d.parent(".bPromoCatalogSliderWrap_eSlide");e.length&&e.attr("id")&&(b=e.attr("id").replace("slide_id_",""),c=i[b],c.hasOwnProperty("title")&&F.collectionClick(c.title,1*b+1))},c=function(){var b,c,d,e,f=a(this),g=f.parents(".bPromoCatalogSliderWrap_eSlide");g.length&&g.attr("id")&&(b=g.attr("id"),c=b.replace("slide_id_",""),d=i[c],e=a(".mTchiboSlider #"+b+" .prodItem > a").index(this),-1!=e&&d.hasOwnProperty("title")&&void 0!=typeof d.products[e].name&&F.productClick(d.title,d.products[e].name,1*e+1))};F.checkRule("collection_click")&&g.on("click",".mTchiboSlider .bPromoCatalogSliderWrap_eSlideLink",b),F.checkRule("product_click")&&g.on("click",".mTchiboSlider .prodItem > a",c),F.pageVisibility()}},pageVisibility:function(){var a,b,c=function(){w=document[a]?!0:!1};F.isAnalyticsEnabled&&u.hasOwnProperty("use_page_visibility")&&1==u.use_page_visibility&&("undefined"!=typeof document.hidden?(a="hidden",b="visibilitychange"):"undefined"!=typeof document.mozHidden?(a="mozHidden",b="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(a="msHidden",b="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(a="webkitHidden",b="webkitvisibilitychange"),c(),"undefined"==typeof document.addEventListener||"undefined"==typeof a||document.addEventListener(b,c,!1))},collectionShow:function(){},collectionClick:function(a,b){var c;F.isAnalyticsEnabled&&"undefined"!=typeof _gaq&&"undefined"!=typeof a&&"undefined"!=typeof b&&(c=["_trackEvent","collection_click",a+"_"+b],_gaq.push(c))},productClick:function(a,b,c){var d;F.isAnalyticsEnabled&&"undefined"!=typeof _gaq&&"undefined"!=typeof a&&"undefined"!=typeof b&&"undefined"!=typeof c&&(d=["_trackEvent","item_click",a+"_"+b,c.toString()],_gaq.push(d))},isAnalyticsEnabled:function(){return u&&u.hasOwnProperty("enabled")&&1==u.enabled},checkRule:function(a){return F.isAnalyticsEnabled&&"undefined"!=typeof a&&u.hasOwnProperty(a)&&1==u[a].enabled&&(1==u[a].tchiboOnly&&"tchibo"===v||1!=u[a].tchiboOnly)?!0:!1}};a(function(){x(),F.init(),g.on("click",".bPromoCatalogSlider_eArrow",A),g.on("click",".bPaginator_eLink",B),p&&(c=window.location.hash,c.indexOf("slide")+1&&(n=parseInt(c.slice(6),10)-1,D(n))),y(n),i.hasOwnProperty(n)&&i[n].hasOwnProperty("title")&&i[n].hasOwnProperty("time")&&F.checkRule("collection_view")&&F.collectionShow(i[n].title,1*n+1,i[n].time)})}}(jQuery),function(){var a;$.ajaxSetup({error:function(b){if(403==b.status){if(a=$("#auth-block"),!a.length)return;a.lightbox_me({centered:!0,autofocus:!0,onLoad:function(){a.find("input:first").focus()}})}}})}(),function(){var a=$("body"),b="subscribed",c=function(){var a=$(".bSubscribeLightboxPopup"),c=$(".bSubscribeLightboxPopup__eInput"),d=$(".bSubscribeLightboxPopup__eBtn"),e={show:!window.docCookies.hasItem(b),agreed:1===window.docCookies.getItem(b)},f=new FormValidator({fields:[{fieldNode:c,customErr:"Неправильный емейл",require:!0,validBy:"isEmail"}]}),g=function(){var b=c.val(),e=$(this).data("url"),g=function(b){return b.success?(a.html('<span class="bSubscribeLightboxPopup__eTitle mType">Спасибо! подтверждение подписки отправлено на указанный e-mail</span>'),window.docCookies.setItem("subscribed",1,15768e4,"/"),setTimeout(function(){a.slideUp(300)},3e3),void("undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Account","Emailing sign up","Page top"]))):!1};return d.hasClass("mDisabled")?!1:(f.validate({onInvalid:function(a){},onValid:function(){$.post(e,{email:b},g)}}),!1)},h=function(){var b=$(".bSubscribeLightboxPopup__eNotNow"),c=function(b){b.preventDefault();var c=$(this).data("url");a.slideUp(300),window.docCookies.setItem("subscribed",0,15768e4,"/"),$.post(c)};a.slideDown(300),d.bind("click",g),b.off("click"),b.bind("click",c)};return c.placeholder(),e.show?void h():!1};a.bind("showsubscribe",c),a.trigger("showsubscribe")}(),function(){$(".js-siteVersionSwitcher").click(function(a){a.preventDefault();var b=window.location.host,c=b.split(".");c.length>2&&(b=c[c.length-2]+"."+c[c.length-1]);var d=$(a.currentTarget).data("config");document.cookie=d.cookieName+"=1; expires="+new Date(Date.now()+1e3*d.cookieLifetime).toUTCString()+"; domain="+b+"; path=/",location=a.currentTarget.href})}(),function(){$(document).ready(function(){var a=$("body");a.on("click",".jsRecommendedItem",function(b){b.stopPropagation();try{var c=$(this),d=c.attr("href"),e=c.parents(".js-slider"),f=e.length?e.data("slider").sender:null;a.trigger("trackGoogleEvent",{category:"RR_взаимодействие",action:"Перешел на карточку товара",label:f?f.position:null,hitCallback:function(){d&&setTimeout(function(){window.location.href=d},90)}}),e.trigger("TL_recommendation_clicked")}catch(g){}}),a.on("click",".jsRecommendedSliderNav",function(){try{var b=$(this),c=b.parents(".js-slider"),d=c.length?c.data("slider").sender:null;a.trigger("trackGoogleEvent",["RR_Взаимодействие","Пролистывание",d.position])}catch(e){}});try{$(".js-slider").each(function(a,b){var c=$(b).data("slider"),d=docCookies.getItem("product_viewed");"viewed"==c.type&&"string"==typeof d&&(c.rrviewed=ENTER.utils.arrayUnique(d.split(",")),$(b).data("slider",c))})}catch(b){}a.on("mouseenter",".slideItem_i",function(){var a=$(this),b=a.parents(".js-slider").find(".slideItem_flt");b.length&&(b.find(".slideItem_flt_i").text(a.data("product").name),b.addClass("slideItem_flt-show"),b.offset({left:a.offset().left}))}),a.on("mouseleave",".slideItem_i",function(){var a=$(this),b=a.parents(".js-slider").find(".slideItem_flt");b.length&&(b.find(".slideItem_flt_i").text(""),b.removeClass("slideItem_flt-show"))})})}(),function(){var a=$("body"),b=$("div.searchbox form"),c=b.find("input.searchtext"),d=$("#searchAutocomplete"),e=$(".bSearchSuggest__eRes"),f=-1,g=0,h={},i=null,j=function(){var a=e.eq(f).attr("href"),b=e.eq(f).hasClass("bSearchSuggest__eCategoryRes")?"suggest_category":"suggest_product";"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Search",b,a])},k=function(){var a=c.val(),b=function(b){b.success&&(h[a]=b.content,d.html(b.content),e=$(".bSearchSuggest__eRes"),g=e.length,g&&setTimeout(searchInputFocusin,99))},f=function(){var c="/search/autocomplete?q=";return a.length<3?!1:(c+=encodeURI(a),void $.ajax({type:"GET",url:c,success:b}))};return 0===a.length?(d.empty(),!1):(clearTimeout(i),h[a]?(b(h[a]),!1):void(i=setTimeout(f,300)))},l=function(){var a=c.val().replace(/(^\s*)|(\s*$)/g,"").replace(/(\s+)/g," ");c.val(a)};suggestKeyUp=function(a){var b=a.which;return b>=37&&40>=b||27===b||13===b?!1:void k()},suggestKeyDown=function(a){var b=a.which,c=function(){e.removeClass("hover").eq(f).addClass("hover")},h=function(){f-1>=0?(f--,c()):(f=-1,e.removeClass("hover"),$(this).focus())},i=function(){g-1>=f+1&&(f++,c())},k=function(){var a=e.eq(f).attr("href");j(),document.location.href=a};return 38===b?(h(),!1):40===b?(i(),!1):27===b?(d.empty(),!1):13===b&&(l(),-1!==f)?(k(),!1):void 0},searchSubmit=function(){var a=c.attr("value");return 0===a.length?!1:void l()},searchInputFocusin=function(){d.show()},suggestCloser=function(a){var b=a.target.className;b.indexOf("bSearchSuggest")+1||b.indexOf("searchtext")+1||d.hide()},hoverForItem=function(){var a=0;e.removeClass("hover"),a=$(this).addClass("hover").index(),f=a-1},searchHintSelect=function(){var a=$(this).text();c.val(a+" ").focus(),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","tooltip",a]),k()},$(document).ready(function(){c.bind("keydown",suggestKeyDown),c.bind("keyup",suggestKeyUp),c.bind("focus",searchInputFocusin),b.bind("submit",searchSubmit),c.placeholder(),a.bind("click",suggestCloser),a.on("mouseenter",".bSearchSuggest__eRes",hoverForItem),a.on("click",".bSearchSuggest__eRes",j),a.on("click",".sHint_value",searchHintSelect)})}(),function(){if(/catalog\/tchibo/.test(document.location.href)&&window.history&&window.history.replaceState){var a=window.history;$(window).on("beforeunload",function(){a.replaceState({pageYOffset:pageYOffset},"")}),a&&a.state&&a.state.pageYOffset&&window.scrollTo(0,a.state.pageYOffset)}}(),window.TLT)throw"Attempting to recreate TLT. Library may be included more than once on the page.";var TLT=function(){"use strict";function a(a,b,c){var d=null,e=TLT.getService("queue"),f=TLT.getModule("replay"),g=null,h=window.location,i=h.origin||null;b&&"string"==typeof b&&(c&&"string"==typeof c||(c=""),i||(i=(h.protocol||"")+"//"+(h.host||"")),d={type:2,screenview:{type:a,name:b,url:h.pathname,host:i,referrer:c}},"LOAD"===a?g={type:"screenview_load"}:"UNLOAD"===a&&(g={type:"screenview_unload"}),g&&f&&f.onevent(g),("LOAD"===a||"UNLOAD"===a)&&e.post("",d,"DEFAULT"))}var b=(new Date).getTime(),c={},d={},e=!1,f=null,g=function(){function a(a){var b,e,f=t.getService("browser"),g=t.getCoreConfig().framesBlacklist;if(c=c||[],a=a||null,"undefined"!=typeof g&&g.length>0){for(e=0;e<g.length;e+=1)b=f.queryAll(g[e],a),b&&b.length>0&&(c=c.concat(b));d=d.concat(f.queryAll("iframe",a))}}function b(b){return t.utils.indexOf(d,b)<0&&a(b.ownerDocument),t.utils.indexOf(c,b)>-1}var c,d=[];return b.clearCache=function(){c=null},b}(),h=null,i={config:["getConfig","updateConfig","getCoreConfig","updateCoreConfig","getModuleConfig","updateModuleConfig","getServiceConfig","updateServiceConfig"],queue:["addHeader","post","setAutoFlush","flushAll"],browserBase:["getXPathFromNode","processDOMEvent"]},j=function(){var a={};return{normalizeModuleEvents:function(b,c,d,e){{var f=!1,g=!1;t.getService("browser")}return d=d||t._getLocalTop(),e=e||d.document,a[b]={loadFired:!1,pageHideFired:!1},t.utils.forEach(c,function(a){switch(a.name){case"load":f=!0,c.push(t.utils.mixin(t.utils.mixin({},a),{name:"pageshow"}));break;case"unload":g=!0,c.push(t.utils.mixin(t.utils.mixin({},a),{name:"pagehide"})),c.push(t.utils.mixin(t.utils.mixin({},a),{name:"beforeunload"}));break;case"change":t.utils.isLegacyIE&&"w3c"===t.getFlavor()&&c.push(t.utils.mixin(t.utils.mixin({},a),{name:"propertychange"}))}}),f||g?(a[b].silentLoad=!f,a[b].silentUnload=!g,f||c.push({name:"load",target:d}),void(g||c.push({name:"unload",target:d}))):void delete a[b]},canPublish:function(b,c){var d;if(a.hasOwnProperty(b)===!1)return!0;switch(d=a[b],c.type){case"load":return d.pageHideFired=!1,d.loadFired=!0,!d.silentLoad;case"pageshow":return d.pageHideFired=!1,c.type="load",!d.loadFired&&!d.silentLoad;case"pagehide":return c.type="unload",d.loadFired=!1,d.pageHideFired=!0,!d.silentUnload;case"unload":case"beforeunload":return c.type="unload",d.loadFired=!1,!d.pageHideFired&&!d.silentUnload}return!0},isUnload:function(a){return"object"==typeof a?"unload"===a.type||"beforeunload"===a.type||"pagehide"===a.type:!1}}}(),k={},l={},m=function(){},n=null,o=!0,p=null,q=!1,r=!1,s=navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1||navigator.userAgent.indexOf("iPad")>-1,t={getStartTime:function(){return b},init:function(a,b){var c;if(n=b,!o)throw"init must only be called once!";o=!1,c=function(d){d=d||window.event||{},(document.addEventListener||"load"===d.type||"complete"===document.readyState)&&(document.removeEventListener?(document.removeEventListener("DOMContentLoaded",c,!1),window.removeEventListener("load",c,!1)):(document.detachEvent("onreadystatechange",c),window.detachEvent("onload",c)),m(a,b))},"complete"===document.readyState?setTimeout(c):document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):(document.attachEvent("onreadystatechange",c),window.attachEvent("onload",c))},isInitialized:function(){return e},getState:function(){return f},destroy:function(a){var b="",c="",h=null,i=null,j=null,l=null,m=!1;if(o)return!1;if(this.stopAll(),!a){l=this.getService("browser");for(b in k)k.hasOwnProperty(b)&&null!==l&&(c=b.split("|")[0],h=k[b].target,m=k[b].delegateTarget||void 0,l.unsubscribe(c,h,this._publishEvent,m))}for(i in d)d.hasOwnProperty(i)&&(j=d[i].instance,j&&"function"==typeof j.destroy&&j.destroy(),d[i].instance=null);if(g.clearCache(),k={},e=!1,o=!0,f="destroyed","function"==typeof n)try{n("destroyed")}catch(p){}},_updateModules:function(a){var b=this.getCoreConfig(),d=this.getService("browser"),e=null,f=null;if(!(b&&d&&b.modules))return!1;try{for(f in b.modules)if(b.modules.hasOwnProperty(f))if(e=b.modules[f],c.hasOwnProperty(f)){if(e.enabled===!1){this.stop(f);continue}this.start(f),e.events&&this._registerModuleEvents(f,e.events,a)}else d.loadScript&&d.loadScript(b.moduleBase+f+".js");this._registerModuleEvents.clearCache()}catch(g){return t.destroy(),!1}return!0},rebind:function(a){t._updateModules(a)},getSessionData:function(){if(!t.isInitialized())throw"getSessionData API was called before UIC is initialized.";var a,b,c=null,d=null,e=t.getCoreConfig();return e&&e.sessionDataEnabled?(d=e.sessionData||{},a=d.sessionQueryName,a?b=t.utils.getQueryStringValue(a,d.sessionQueryDelim):(a=d.sessionCookieName||"TLTSID",b=t.utils.getCookieValue(a)),a&&b&&(c=c||{},c.tltSCN=a,c.tltSCV=b,c.tltSCVNeedsHashing=!!d.sessionValueNeedsHashing),c):null},logCustomEvent:function(a,b){if(!t.isInitialized())throw"logCustomEvent API was called before UIC is initialized.";var c=null,d=this.getService("queue");a&&"string"==typeof a||(a="CUSTOM"),b=b||{},c={type:5,customEvent:{name:a,data:b}},d.post("",c,"DEFAULT")},logExceptionEvent:function(a,b,c){if(!t.isInitialized())throw"logExceptionEvent API was called before UIC is initialized.";var d=null,e=this.getService("queue");a&&"string"==typeof a&&(b=b||"",c=c||"",d={type:6,exception:{description:a,url:b,line:c}},e.post("",d,"DEFAULT"))},logScreenviewLoad:function(b,c,d){if(!t.isInitialized())throw"logScreenviewLoad API was called before UIC is initialized.";a("LOAD",b,c,d)},logScreenviewUnload:function(b){if(!t.isInitialized())throw"logScreenviewUnload API was called before UIC is initialized.";a("UNLOAD",b)},logScreenCapture:function(){if(!t.isInitialized())throw"logScreenCapture API was called before UIC is initialized.";var a=l.screenCapture;a&&a.enabled&&a.cbFunction()},registerBridgeCallbacks:function(a){var b=0,c=0,d=null;if(!a)return!1;if(0===a.length)return l={},!1;try{for(b=0,c=a.length;c>b;b+=1)d=a[b],"object"==typeof d&&d.cbType&&d.cbFunction&&(l[d.cbType]={enabled:d.enabled,cbFunction:d.cbFunction})}catch(e){return!1}return!0},redirectQueue:function(a){var b,c,d,e,f;if(!a||!a.length)return a;if(d=l.messageRedirect,d&&d.enabled)for(f=t.getService("serializer"),b=0,c=a.length;c>b;b+=1)e=d.cbFunction(f.serialize(a[b]),a[b]),e&&"object"==typeof e?a[b]=e:(a.splice(b,1),b-=1,c=a.length);return a},_hasSameOrigin:function(a){try{return a.document.location.host===document.location.host&&a.document.location.protocol===document.location.protocol}catch(b){}return!1},provideRequestHeaders:function(){var a=null,b=l.addRequestHeaders;return b&&b.enabled&&(a=b.cbFunction()),a},_registerModuleEvents:function(){function a(a,b,c){var f,g,h,i=t.getService("browserBase"),l=t.getService("browser"),m=t.utils.getDocument(c),n=t._getLocalTop(),o=t.utils.isIFrameDescendant(c);if(c=c||m,j.normalizeModuleEvents(a,b,n,m),o&&(f=i.ElementData.prototype.examineID(c).id,"string"==typeof f)){f=f.slice(0,f.length-1);for(g in k)if(k.hasOwnProperty(g))for(h=0;h<k[g].length;h+=1)if(a===k[g][h]&&-1!==g.indexOf(f)){delete k[g];break}}t.utils.forEach(b,function(b){var f=e(b.target,n,m)||m,g=e(b.delegateTarget,n,m),h="";b.recurseFrames!==!0&&o||("string"==typeof f?b.delegateTarget&&"jQuery"===t.getFlavor()?(h=t._buildToken4delegateTarget(b.name,f,b.delegateTarget),k.hasOwnProperty(h)?k[h].push(a):(k[h]=[a],k[h].target=f,k[h].delegateTarget=g,l.subscribe(b.name,f,t._publishEvent,g,h))):t.utils.forEach(l.queryAll(f,c),function(c){var e=d.get(c);e||(e=i.ElementData.prototype.examineID(c),d.set(c,e)),h=b.name+"|"+e.id+e.type,-1===t.utils.indexOf(k[h],a)&&(k[h]=k[h]||[],k[h].push(a),k[h].target=c,l.subscribe(b.name,c,t._publishEvent))}):(h=t._buildToken4bubbleTarget(b.name,f,"undefined"==typeof b.target),k.hasOwnProperty(h)?-1===t.utils.indexOf(k[h],a)&&k[h].push(a):(k[h]=[a],l.subscribe(b.name,f,t._publishEvent))),""!==h&&"string"!=typeof f&&(k[h].target=f))})}function b(a){var b=t.utils.getIFrameWindow(a);return null!==b&&t._hasSameOrigin(b)&&null!==b.document&&"complete"===b.document.readyState}function c(c,e,f){if(f=f||t._getLocalTop().document,d=d||new t.utils.WeakMap,a(c,e,f),"performance"!==c){var h,i,j=null,k=null,l=t.getService("browser"),m=l.queryAll("iframe, frame",f);for(h=0,i=m.length;i>h;h+=1)j=m[h],g(j)||(b(j)&&(k=t.utils.getIFrameWindow(j),t._registerModuleEvents(c,e,k.document)),function(a,c,d){var e=null,f={moduleName:a,moduleEvents:c,hIFrame:d,_registerModuleEventsDelayed:function(){var b=null;g(d)||(b=t.utils.getIFrameWindow(d),t._hasSameOrigin(b)&&t._registerModuleEvents(a,c,b.document))}};t.utils.addEventListener(d,"load",function(){f._registerModuleEventsDelayed()}),t.utils.isLegacyIE&&b(d)&&(e=t.utils.getIFrameWindow(d),t.utils.addEventListener(e.document,"readystatechange",function(){f._registerModuleEventsDelayed()}))}(c,e,j))}}var d,e=function(a,b,c){return"window"===a?b:"document"===a?c:a};return c.clearCache=function(){d&&(d.clear(),d=null)},c}(),_buildToken4currentTarget:function(a){var b=a.nativeEvent?a.nativeEvent.currentTarget:null,c=b?this.getService("browserBase").ElementData.prototype.examineID(b):{id:a.target.id,type:a.target.idType};
return a.type+"|"+c.id+c.type},_buildToken4delegateTarget:function(a,b,c){return a+"|"+b+"|"+c},_buildToken4bubbleTarget:function(a,b,c,d){var e,f,h=t._getLocalTop(),i=t.getService("browser"),j=function(a){var b=null;return t._hasSameOrigin(e.parent)&&t.utils.forEach(i.queryAll("iframe, frame",e.parent.document),function(c){var d=null;g(c)||(d=t.utils.getIFrameWindow(c),t._hasSameOrigin(d)&&d.document===a&&(b=c))}),b},k=t.utils.getDocument(b),l=this.getService("browserBase"),m=null,n=a;return k&&(e=k.defaultView||k.parentWindow),b===window||b===window.window?n+="|null-2|window":c&&e&&t._hasSameOrigin(e.parent)&&"undefined"!=typeof k&&h.document!==k?(m=j(k),m&&(f=l.ElementData.prototype.examineID(m),n+="|"+f.xPath+"-2")):n+=d&&d!==document&&"jQuery"===t.getFlavor()?"|null-2|"+t.utils.getTagName(b)+"|"+t.utils.getTagName(d):"|null-2|document",n},_reinitConfig:function(){t._updateModules()},_handleTouchStart:function(a){var b,c;if(s)return!1;if(null===p)return p=a,!0;for(b=0;b<p.nativeEvent.touches.length;b+=1)for(c=0;c<a.nativeEvent.touches.length;c+=1)if(p.nativeEvent.touches[b]===a.nativeEvent.touches[c])return!0;return t._prepNonIosTouchEnd(),p=a,!0},_handleTouchMove:function(a){s||(p=a)},_handleTouchScroll:function(a){return s?!1:(null!==p&&"scroll"===a.type&&(p.target.position.x=a.target.position.x,p.target.position.y=a.target.position.y,q=!0),!0)},_prepNonIosTouchEnd:function(){var a=!1;return null!==p&&(p.type="touchend",p.nativeEvent.type="touchend",t._publishEvent(p),q&&(p.type="scroll",p.nativeEvent.type="scroll",r=!0,t._publishEvent(p)),a=!0),p=null,q=!1,r=!1,a},_publishEvent:function(a){var b,c,d,e=null,g=null,i=a.delegateTarget&&a.data?a.data:t._buildToken4currentTarget(a),l=null,m=null,n=!1,o=!1,u=t.getService("browser"),v=a.delegateTarget||null;if(("load"!==a.type&&"pageshow"!==a.type||a.nativeEvent.customLoad)&&(!s||"touchstart"!==a.type&&"touchmove"!==a.type)){if(null!==p&&"touchstart"!==a.type&&"touchmove"!==a.type&&"scroll"!==a.type&&"touchend"!==a.type)t._prepNonIosTouchEnd();else{if("touchstart"===a.type)return void t._handleTouchStart(a);if("touchmove"===a.type)return void t._handleTouchMove(a);if(null!==p&&"scroll"===a.type&&!r)return void t._handleTouchScroll(a);q&&(i="scroll|null-2|window")}if((!t.utils.isIE||("click"===a.type&&(h=a.target.element),"beforeunload"!==a.type||(n=!1,t.utils.forEach(t.getCoreConfig().ieExcludedLinks,function(a){var b,c,d=u.queryAll(a);for(b=0,c=d?d.length:0;c>b;b+=1)if(void 0!==typeof d[b]&&d[b]===h)return void(n=!0)}),!n)))&&(j.isUnload(a)&&(f="unloading"),"change"!==a.type||!t.utils.isLegacyIE||"w3c"!==t.getFlavor()||"checkbox"!==a.target.element.type&&"radio"!==a.target.element.type)){if("propertychange"===a.type){if("checked"!==a.nativeEvent.propertyName||!("checkbox"===a.target.element.type||"radio"===a.target.element.type&&a.target.element.checked))return;a.type=a.target.type="change"}if(k.hasOwnProperty(i)||(a.hasOwnProperty("nativeEvent")&&(d=a.nativeEvent.currentTarget||a.nativeEvent.target),i=t._buildToken4bubbleTarget(a.type,d,!0,v)),k.hasOwnProperty(i))for(l=k[i],b=0,c=l.length;c>b;b+=1)e=l[b],g=t.getModule(e),m=t.utils.mixin({},a),g&&t.isStarted(e)&&"function"==typeof g.onevent&&(o=j.canPublish(e,m),o&&g.onevent(m));m&&"unload"===m.type&&o&&t.destroy()}}},_getLocalTop:function(){return window.window},addModule:function(a,b){if(c.hasOwnProperty(a))throw new Error("Attempting to add duplicate module '"+a+"' on TLT.");c[a]={creator:b,instance:null,context:null,messages:[]},this.isInitialized()&&this.start(a)},getModule:function(a){return c[a]&&c[a].instance?c[a].instance:null},removeModule:function(a){this.stop(a),delete c[a]},isStarted:function(a){return c.hasOwnProperty(a)&&null!==c[a].instance},start:function(a){var b=c[a],d=null;if(!c.hasOwnProperty(a))throw new Error("Attempting to start nonexistent module '"+a+"' on TLT.");b&&null===b.instance&&(b.context=new TLT.ModuleContext(a,this),d=b.instance=b.creator(b.context),"function"==typeof d.init&&d.init())},startAll:function(){var a=null;for(a in c)c.hasOwnProperty(a)&&this.start(a)},stop:function(a){var b=c[a],d=null;b&&null!==b.instance&&(d=b.instance,"function"==typeof d.destroy&&d.destroy(),b.instance=b.context=null)},stopAll:function(){var a=null;for(a in c)c.hasOwnProperty(a)&&this.stop(a)},addService:function(a,b){if(d.hasOwnProperty(a))throw new Error("Attempting to add duplicate service '"+a+"' on TLT.");d[a]={creator:b,instance:null}},getService:function(a){if(d.hasOwnProperty(a)){if(!d[a].instance){try{d[a].instance=d[a].creator(this),"function"==typeof d[a].instance.init&&d[a].instance.init()}catch(b){if(b.code&&("JQUERYNOTSUPPORTED"===b.code||"NOQUERYSELECTOR"===b.code))return null;throw b}"function"!=typeof d[a].instance.getServiceName&&(d[a].instance.getServiceName=function(){return a})}return d[a].instance}return null},removeService:function(a){delete d[a]},broadcast:function(a){var b=null,d=null;if(a&&"object"==typeof a){if(!a.hasOwnProperty("type"))throw new Error("Message is missing property 'type'.");for(b in c)c.hasOwnProperty(b)&&(d=c[b],t.utils.indexOf(d.messages,a.type)>-1&&"function"==typeof d.instance.onmessage&&d.instance.onmessage(a))}},listen:function(a,b){var d=null;this.isStarted(a)&&(d=c[a],-1===t.utils.indexOf(d.messages,b)&&d.messages.push(b))},_getServices:function(){return d},fail:function(a,b,c){a="UIC FAILED. "+a;try{t.destroy(!!c)}finally{throw t.utils.clog(a),new t.UICError(a,b)}},UICError:function(){function a(a,b){this.message=a,this.code=b}return a.prototype=new Error,a.prototype.name="UICError",a.prototype.constructor=a,a}(),getFlavor:function(){return"jQuery"}};return m=function(a){var b,c,d,g;if(e)return void t.utils.clog("TLT.init() called more than once. Ignoring.");if(!TLT||!TLT.replay){if(b=t.getService("config"),b.updateConfig(a),!t._updateModules())return void("destroyed"!==f&&t.destroy());if(b.subscribe&&b.subscribe("configupdated",t._reinitConfig),e=!0,f="loaded",c={type:"load",target:window.window,srcElement:window.window,currentTarget:window.window,bubbles:!0,cancelBubble:!1,cancelable:!0,timeStamp:+new Date,customLoad:!0},g=t.getService("browserBase"),d=new g.WebEvent(c),t._publishEvent(d),"function"==typeof n)try{n("initialized")}catch(h){}}},function(){var a,b,c=null;for(c in i)if(i.hasOwnProperty(c))for(a=0,b=i[c].length;b>a;a+=1)!function(a,b){t[b]=function(){var c=this.getService(a);return c?c[b].apply(c,arguments):void 0}}(c,i[c][a])}(),t}();if(function(){"use strict";var a=function(){var a=window.navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")}(),b=function(){var b=!!window.performance;return a&&(!b||document.documentMode<9)}(),c={isIE:a,isLegacyIE:b,indexOf:function(a,b){var c,d;if(a&&a instanceof Array)for(c=0,d=a.length;d>c;c+=1)if(a[c]===b)return c;return-1},forEach:function(a,b,c){var d,e;if(a&&a.length&&b&&b.call)for(d=0,e=a.length;e>d;d+=1)b.call(c,a[d],d,a)},some:function(a,b){var c,d,e=!1;for(c=0,d=a.length;d>c;c+=1)if(e=b(a[c],c,a))return e;return e},convertToArray:function(a){for(var b=0,c=a.length,d=[];c>b;)d.push(a[b]),b+=1;return d},isUndefOrNull:function(a){return"undefined"==typeof a||null===a},mixin:function(a){var b,c,d,e;for(d=1,e=arguments.length;e>d;d+=1){c=arguments[d];for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}return a},extend:function(a,b,d){var e="";for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a&&"[object Object]"===Object.prototype.toString.call(d[e])?("undefined"==typeof b[e]&&(b[e]={}),c.extend(a,b[e],d[e])):b[e]=d[e]);return b},clone:function(a){var b,d;if(null===a||"object"!=typeof a)return a;if(a instanceof Object){b="[object Array]"===Object.prototype.toString.call(a)?[]:{};for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=c.clone(a[d]));return b}},createObject:function(){var a=null,b=null;return"function"==typeof Object.create?a=Object.create:(b=function(){},a=function(a){if("object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object prototype need to be an object!");return b.prototype=a,new b}),a}(),access:function(a,b){var c,d,e,f=b||window;if("string"==typeof a&&("object"==typeof f||null===f)){for(c=a.split("."),d=0,e=c.length;e>d;d+=1)if(0!==d||"window"!==c[d]){if(!Object.prototype.hasOwnProperty.call(f,c[d]))return;if(f=f[c[d]],e-1>d&&!(f instanceof Object))return}return f}},isNumeric:function(a){return!isNaN(a+1-1)},isUpperCase:function(a){return a===a.toUpperCase()&&a!==a.toLowerCase()},isLowerCase:function(a){return a===a.toLowerCase()&&a!==a.toUpperCase()},getDocument:function(a){return 9!==a.nodeType?c.isUndefOrNull(a.ownerDocument)?a.document:a.ownerDocument:a},getWindow:function(a){if(a.self!==a){var b=c.getDocument(a);return c.isUndefOrNull(b.defaultView)?b.parentWindow:b.defaultView}return a},getIFrameWindow:function(a){var b=null;if(!a)return b;try{b=a.contentWindow||(a.contentDocument?a.contentDocument.parentWindow:null)}catch(c){}return b},getTagName:function(a){return a===document?"document":a===window||a===window.window?"window":"string"==typeof a?a.toLowerCase():"object"!=typeof a||c.isUndefOrNull(a)||"string"!=typeof a.tagName?"":a.tagName.toLowerCase()},isIFrameDescendant:function(a){return c.getWindow(a)!=TLT._getLocalTop()},getOrientationMode:function(a){var b="INVALID";if("number"!=typeof a)return b;switch(a){case 0:case 180:case 360:b="PORTRAIT";break;case 90:case-90:case 270:b="LANDSCAPE";break;default:b="UNKNOWN"}return b},clog:function(a){if("object"==typeof a.console&&"function"==typeof a.console.log&&"function"==typeof a.console.log.apply){var b=a.console;return function(){b.log.apply(b,arguments)}}return function(){}}(window),trim:function(a){return a&&a.toString?a.toString().replace(/^\s+|\s+$/g,""):a},ltrim:function(a){return a&&a.toString?a.toString().replace(/^\s+/,""):a},rtrim:function(a){return a&&a.toString?a.toString().replace(/\s+$/,""):a},getCookieValue:function(a,b){var d,e,f,g,h,i=null;try{if(b=b||document.cookie,!a||!a.toString)return null;for(a+="=",h=a.length,g=b.split(";"),d=0,e=g.length;e>d;d+=1)if(f=g[d],f=c.ltrim(f),0===f.indexOf(a)){i=f.substring(h,f.length);break}}catch(j){i=null}return i},getQueryStringValue:function(a,b,c){var d,e,f,g,h=null;try{if(c=c||window.location.search,f=c.length,!a||!a.toString||!f)return null;b=b||"&",c=b+c.substring(1),a=b+a+"=",d=c.indexOf(a),-1!==d&&(g=d+a.length,e=c.indexOf(b,g),-1===e&&(e=f),h=decodeURIComponent(c.substring(g,e)))}catch(i){}return h},addEventListener:function(){return window.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)}}(),WeakMap:function(){function a(a,b){var c,d;for(a=a||[],c=0,d=a.length;d>c;c+=1)if(a[c][0]===b)return c;return-1}return function(){var b=[];this.set=function(c,d){var e=a(b,c);b[e>-1?e:b.length]=[c,d]},this.get=function(c){var d=b[a(b,c)];return d?d[1]:void 0},this.clear=function(){b=[]},this.has=function(c){return a(b,c)>=0},this.remove=function(c){var d=a(b,c);d>=0&&b.splice(d,1)},this["delete"]=this.remove}}()};"undefined"!=typeof TLT&&TLT||(window.TLT={}),TLT.utils=c}(),function(){"use strict";TLT.EventTarget=function(){this._handlers={}},TLT.EventTarget.prototype={constructor:TLT.EventTarget,publish:function(a,b){var c=0,d=0,e=this._handlers[a],f={type:a,data:b};if("undefined"!=typeof e)for(d=e.length;d>c;c+=1)e[c](f)},subscribe:function(a,b){if(this._handlers.hasOwnProperty(a)||(this._handlers[a]=[]),"function"!=typeof b)throw new Error("Event handler for '"+a+"' isn't a function.");this._handlers[a].push(b)},unsubscribe:function(a,b){var c=0,d=0,e=this._handlers[a];if(e)for(d=e.length;d>c;c+=1)if(e[c]===b)return void e.splice(c,1)}}}(),TLT.ModuleContext=function(){"use strict";var a=["broadcast","getConfig:getModuleConfig","listen","addHeader","post","getXPathFromNode","getStartTime"];return function(b,c){var d={},e=0,f=a.length,g=null,h=null,i=null;for(e=0;f>e;e+=1)g=a[e].split(":"),g.length>1?(i=g[0],h=g[1]):(i=g[0],h=g[0]),d[i]=function(a){return function(){var d=c.utils.convertToArray(arguments);if(d.unshift(b),!c.hasOwnProperty(a))throw new Error("Attempting to access method '"+a+"' on TLT, but it doesn't exist. There's a misconfigured passthru method.");return c[a].apply(c,d)}}(h);return d.utils=c.utils,d}}(),TLT.addService("config",function(a){"use strict";function b(b,c){a.utils.extend(!0,b,c),d.publish("configupdated",d.getConfig())}var c={core:{},modules:{},services:{}},d=a.utils.extend(!1,a.utils.createObject(new TLT.EventTarget),{getConfig:function(){return c},updateConfig:function(a){b(c,a)},getCoreConfig:function(){return c.core},updateCoreConfig:function(a){b(c.core,a)},getServiceConfig:function(a){return c.services[a]||null},updateServiceConfig:function(a,d){"undefined"==typeof c.services[a]&&(c.services[a]={}),b(c.services[a],d)},getModuleConfig:function(a){return c.modules[a]||null},updateModuleConfig:function(a,d){"undefined"==typeof c.modules[a]&&(c.modules[a]={}),b(c.modules[a],d)},destroy:function(){c={core:{},modules:{},services:{}}}});return d}),TLT.addService("queue",function(a){"use strict";function b(){}function c(){return window.location.pathname}function d(a,b,c,d){var e=A.get(a),f={name:b,value:c},g=null;"string"==typeof b&&"string"==typeof c&&(e.headers||(e.headers={once:[],always:[]}),g=d?e.headers.always:e.headers.once,g.push(f))}function e(a,b){function c(a,b){var c=0,d=0,e=null;for(c=0,d=a.length;d>c;c+=1)e=a[c],b[e.name]=e.value}var d=0,e=0,f=A.get(a),g=f.headers,h=null;if(b=b||{},g)for(h=[g.always,g.once],d=0,e=h.length;e>d;d+=1)c(h[d],b);return b}function f(a){var b=null,c=null;if(!A.exists(a))throw new Error("Queue: "+a+" does not exist!");b=A.get(a),c=b?b.headers:null,c&&(c.once=[])}function g(){var b,c,e=0,f=a.provideRequestHeaders();if(f&&f.length)for(e=0,b=f.length;b>e;e+=1)c=f[e],d("DEFAULT",c.name,c.value,c.recurring);return e}function h(d,h){var i,j=A.flush(d),k=null!==j?j.length:0,l=A.get(d),m={"Content-Type":"application/json","X-Tealeaf":"device (UIC) Lib/3.1.0.1520","X-TealeafType":"GUI","X-TeaLeaf-Page-Url":c()},n=l.serializer||"json",o=null;if(j=v.wrapMessages(j),k){if(g(),e(d,m),l.crossDomainEnabled){if(o=a.utils.getIFrameWindow(l.crossDomainIFrame),!o)return void a.utils.clog("Cannot access xdomain frame window.");if(i={request:{url:l.url,async:!h,headers:m,data:t.serialize(j,n)}},a.utils.isIE||"function"!=typeof window.postMessage)try{o.sendMessage(i)}catch(p){return void a.utils.clog("Cannot access sendMessage API on xdomain frame window.")}else o.postMessage(i,l.crossDomainIFrame.src)}else r.sendRequest({oncomplete:b,url:l.url,async:!h,headers:m,data:t.serialize(j,n)});f(d)}}function i(a){var b=null,c=q.queues,d=0;for(d=0;d<c.length;d+=1)b=c[d],h(b.qid,a);return!0}function j(b,c){var d=A.push(b,v.createMessage(c));d>=A.get(b).threshold&&y&&"unloading"!==a.getState()&&h(b)}function k(a){var b=null,c=q.queues,d="",e=0,f=0;for(e=0;e<c.length;e+=1)if(b=c[e],b&&b.modules)for(f=0;f<b.modules.length;f+=1)if(d=b.modules[f],d===a)return b.qid;return w.qid}function l(a,b){x[a]=window.setTimeout(function c(){h(a),x[a]=window.setTimeout(c,b)},b)}function m(){var a=0;for(a in x)x.hasOwnProperty(a)&&(window.clearTimeout(x[a]),delete x[a]);x={}}function n(){}function o(b){q=b,a.utils.forEach(q.queues,function(b){var c=null;"DEFAULT"===b.qid&&(w=b),b.crossDomainEnabled&&(c=s.query(b.crossDomainFrameSelector),c||a.fail("Cross domain iframe not found")),A.add(b.qid,{url:b.endpoint,threshold:b.maxEvents,serializer:b.serializer,timerInterval:b.timerInterval||0,crossDomainEnabled:b.crossDomainEnabled||!1,crossDomainIFrame:c}),"undefined"!=typeof b.timerInterval&&b.timerInterval>0&&l(b.qid,b.timerInterval)}),u.subscribe("configupdated",n),z=!0}function p(){y&&i(!q.asyncReqOnUnload),u.unsubscribe("configupdated",n),m(),q=null,w=null,z=!1}var q=null,r=a.getService("ajax"),s=a.getService("browser"),t=a.getService("serializer"),u=a.getService("config"),v=a.getService("message"),w=null,x={},y=!0,z=!1,A=function(){function b(a){return"undefined"!=typeof i[a]}function c(a,c){return b(a)||(i[a]={data:[],queueId:a,url:c.url,threshold:c.threshold,serializer:c.serializer,crossDomainEnabled:!!c.crossDomainEnabled,crossDomainIFrame:c.crossDomainIFrame}),i[a]}function d(a){b(a)&&delete i[a]}function e(a){return b(a)?i[a]:null}function f(a){var b=e(a);null!==b&&(b.data=[])}function g(a){var c=null;return b(a)&&(c=e(a).data,f(a)),c}function h(c,d){var f=null,g=null,h=window.tlBridge,i=window.iOSJSONShuttle;if("undefined"!=typeof h&&"function"==typeof h.addMessage)g=t.serialize(d),h.addMessage(g);else if("undefined"!=typeof i&&"function"==typeof i)g=t.serialize(d),i(g);else if(b(c))return f=e(c),f.data.push(d),f.data=a.redirectQueue(f.data),f.data.length;return 0}var i={};return{exists:b,add:c,remove:d,get:e,clear:f,flush:g,push:h}}();return{addHeaderToQueue:d,copyHeaders:e,clearHeaders:f,getExternalRequestHeaders:g,getQueueManager:function(){return A},getAutoFlushing:function(){return y},init:function(){z?a.utils.clog("Attempt to initialize service which has been already initialized(queueService)"):o(u.getServiceConfig("queue")||{})},destroy:function(){p()},_getQueue:function(a){return A.get(a).data},addHeader:function(a,b,c,e){if(e=e||k(a),!A.exists(e))throw new Error("Queue: "+e+" does not exist!");d(e,b,c)},setAutoFlush:function(a){y=a===!0?!0:!1},flush:function(a){if(!A.exists(a))throw new Error("Queue: "+a+" does not exist!");h(a)},flushAll:function(a){return i(!!a)},post:function(a,b,c){if(c=c||k(a),!A.exists(c))throw new Error("Queue: "+c+" does not exist!");j(c,b)}}}),TLT.addService("browserBase",function(a){"use strict";function b(){z=a.getService("config"),s=a.getService("serializer"),t=a.getService("config").getServiceConfig("browser")||{},u=t.hasOwnProperty("blacklist")?t.blacklist:[],v=t.hasOwnProperty("customid")?t.customid:[]}function c(){b(),z.subscribe("configupdated",b),A=!0}function d(){z.unsubscribe("configupdated",b),A=!1}function e(a){var b,c,d;if(!a||!a.id||"string"!=typeof a.id)return!1;for(b=0,c=u.length;c>b;b+=1)if("string"==typeof u[b]){if(a.id===u[b])return!1}else if("object"==typeof u[b]&&(d=new RegExp(u[b].regex,u[b].flags),d.test(a.id)))return!1;return!0}function f(a){return a&&"undefined"!=typeof a.originalEvent&&"undefined"!=typeof a.isDefaultPrevented&&!a.isSimulated}function g(a){return a?(a.type&&0===a.type.indexOf("touch")&&(f(a)&&(a=a.originalEvent),"touchstart"===a.type?a=a.touches[a.touches.length-1]:"touchend"===a.type&&(a=a.changedTouches[0])),a):null}function h(a){var b=a||window.event,c=document.documentElement,d=document.body;return f(b)&&(b=b.originalEvent),("undefined"==typeof a||"undefined"==typeof b.target)&&(b.target=b.srcElement||window.window,b.timeStamp=Number(new Date),(null===b.pageX||"undefined"==typeof b.pageX)&&(b.pageX=b.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),b.pageY=b.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0)),b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0}),b}function i(a){var b=null;if(!a)return null;for(a.srcElement?b=a.srcElement:(b=a.target,b||(b=a.explicitOriginalTarget),b||(b=a.originalTarget)),b||0!==a.type.indexOf("touch")||(b=g(a).target);b&&x[b.tagName];)b=b.parentNode;return b||null!==a.srcElement||(b=window.window),b}function j(a){var b=0,c=0,d=document.documentElement,e=document.body;return a=g(a),a&&(a.pageX||a.pageY?(b=a.pageX,c=a.pageY):(a.clientX||a.clientY)&&(b=a.clientX+(d?d.scrollLeft:e?e.scrollLeft:0)-(d?d.clientLeft:e?e.clientLeft:0),c=a.clientY+(d?d.scrollTop:e?e.scrollTop:0)-(d?d.clientTop:e?e.clientTop:0))),{x:b,y:c}}function k(a,b){this.x=a||0,this.y=b||0}function l(a,b){this.width=a||0,this.height=b||0}function m(a,b){var c,d,e;b=i(a),c=this.examineID(b),d=this.examineType(b,a),e=this.examinePosition(a,b),this.element=b,this.id=c.id,this.idType=c.type,this.type=d.type,this.subType=d.subType,this.state=this.examineState(b),this.position=new k(e.x,e.y),this.size=new l(e.width,e.height),this.xPath=c.xPath,this.name=c.name}function n(){var b,c,d,e=1;if(document.body.getBoundingClientRect){try{b=document.body.getBoundingClientRect()}catch(f){return a.utils.clog("getBoundingClientRect failed.",f),e}c=b.right-b.left,d=document.body.offsetWidth,e=Math.round(c/d*100)/100}return e}function o(b){var c,d,e,f;if(!b||!b.getBoundingClientRect)return{x:0,y:0,width:0,height:0};try{c=b.getBoundingClientRect(),f=r(document)}catch(g){return a.utils.clog("getBoundingClientRect failed.",g),{x:0,y:0,width:0,height:0}}return d={x:c.left+f.left,y:c.top+f.top,width:c.right-c.left,height:c.bottom-c.top},a.utils.isIE&&(d.x-=document.documentElement.clientLeft,d.y-=document.documentElement.clientTop,e=n(),1!==e&&(d.x=Math.round(d.x/e),d.y=Math.round(d.y/e),d.width=Math.round(d.width/e),d.height=Math.round(d.height/e))),d}function p(a){var b;switch(this.data=a.data||null,this.delegateTarget=a.delegateTarget||null,a=h(a),b=j(a),this.custom=!1,this.nativeEvent=this.custom===!0?null:a,this.position=new k(b.x,b.y),this.target=new m(a,a.target),this.timestamp=(new Date).getTime(),this.type=a.type,this.type){case"focusin":this.type="focus";break;case"focusout":this.type="blur"}}function q(b){a._publishEvent(new p(b))}function r(a){var b,c={left:-1,top:-1};return a=a||document,b=a.documentElement||a.body.parentNode||a.body,c.left="number"==typeof window.pageXOffset?window.pageXOffset:b.scrollLeft,c.top="number"==typeof window.pageYOffset?window.pageYOffset:b.scrollTop,c}var s,t,u,v,w,x={OPTGROUP:!0,OPTION:!0,NOBR:!0},y={},z=a.getService("config"),A=!1;return w=function(){function b(b){for(var d,f=!1,g=null,h=null,i=null,j=[],k=!0,l=a._getLocalTop();k;)if(k=!1,!a.utils.isUndefOrNull(b)){for(a.utils.isUndefOrNull(b.tagName)||c.hasOwnProperty(b.tagName)&&(b=b.parentNode),f=e(b);b!==document&&!f;f=e(b)){if(i=b.parentNode,i||(h=a.utils.getWindow(b),i=h!==l?h.frameElement:document),g=i.firstChild,"undefined"==typeof g)return j;for(d=0;g;g=g.nextSibling)if(1===g.nodeType&&g.tagName===b.tagName){if(g===b){j[j.length]=[b.tagName,d];break}d+=1}b=i}f&&(j[j.length]=[b.id],a.utils.isIFrameDescendant(b)&&(k=!0,b=a.utils.getWindow(b).frameElement))}return j}var c={NOBR:!0,P:!0};return function(a){var c=b(a),d=[],e=c.length;if(1>e)return"null";for(;e;)e-=1,d[d.length]=c[e].length>1?'["'+c[e][0]+'",'+c[e][1]+"]":"["+s.serialize(c[e][0],"json")+"]";return"["+d.join(",")+"]"}}(),y.xpath=function(a,b){var c,d,e,f,g,h,i=s.parse(a),j=null;if(b="undefined"!=typeof b?b:document,c=b,!i)return null;for(d=0,g=i.length;g>d&&c;d+=1)if(j=i[d],1===j.length)c=b.getElementById(j[0]);else{for(e=0,f=-1,h=c.childNodes.length;h>e;e+=1)if(1===c.childNodes[e].nodeType&&c.childNodes[e].tagName.toUpperCase()===j[0]&&(f+=1,f===j[1])){c=c.childNodes[e];break}if(-1===f)return null}return c!==b&&c?c:null},m.HTML_ID=-1,m.XPATH_ID=-2,m.ATTRIBUTE_ID=-3,m.prototype.examineID=function(b){var c,d,f,g,h,i=v.length;try{f=w(b)}catch(j){}g=b.name;try{if(!a.utils.isIFrameDescendant(b))if(e(b))c=b.id,d=m.HTML_ID;else if(v.length&&b.attributes)for(;i;)i-=1,h=b.attributes[v[i]],"undefined"!=typeof h&&(c=v[i]+"="+(h.value||h),d=m.ATTRIBUTE_ID)}catch(k){}return c||(c=f,d=m.XPATH_ID),{id:c,type:d,xPath:f,name:g}},m.prototype.examineType=function(a,b){var c="";return c="change"===b.type?"TEXTAREA"===a.tagName||"INPUT"===a.tagName&&"text"===a.type?"textChange":"valueChange":b.type,{type:b.type,subType:c}},m.prototype.examineState=function(b){var c={a:["innerText","href"],input:{range:["maxValue:max","value"],checkbox:["value","checked"],radio:["value","checked"],image:["src"]},select:["value"],button:["value","innerText"],textarea:["value"]},d="undefined"!=typeof b.tagName?b.tagName.toLowerCase():"",e=c[d]||null,f=null,g=null,h=null,i="";if(null!==e){"[object Object]"===Object.prototype.toString.call(e)&&(e=e[b.type]||["value"]),g={};for(i in e)e.hasOwnProperty(i)&&(-1!==e[i].indexOf(":")?(h=e[i].split(":"),g[h[0]]=b[h[1]]):g[e[i]]="innerText"===e[i]?a.utils.trim(b.innerText||b.textContent):b[e[i]])}return"select"===d&&b.options&&!isNaN(b.selectedIndex)&&(g.index=b.selectedIndex,g.index>=0&&g.index<b.options.length&&(f=b.options[b.selectedIndex],g.value=f.getAttribute("value")||f.getAttribute("label")||f.text||f.innerText,g.text=f.text||f.innerText)),g},m.prototype.examinePosition=function(a,b){var c=j(a),d=o(b);return d.x=c.x||c.y?Math.round(Math.abs(c.x-d.x)):d.width/2,d.y=c.x||c.y?Math.round(Math.abs(c.y-d.y)):d.height/2,d},{normalizeEvent:h,normalizeTarget:i,getEventDetails:g,getEventPosition:j,getBoundingClientRectNormalized:o,checkId:e,getZoomValue:n,getDocScrollPosition:r,init:function(){A?a.utils.clog("Attempt to initialize service which has been already initialized(browserBaseService)"):c()},destroy:function(){d()},WebEvent:p,ElementData:m,processDOMEvent:q,getXPathFromNode:function(a,b){return w(b)},queryDom:y}}),TLT.addService("browser",function(a){"use strict";function b(a){return function(b){var c=new k.WebEvent(b);a(c)}}function c(b,c){"function"!=typeof b[c]&&a.fail("jQuery Object does not support "+c,i.JQUERY_NOT_SUPPORTED)}function d(){var b,d=["on","off"],e=["ajax","find","getScript"],g="function"==typeof f&&"object"==typeof f.fn?f.fn.jquery:0,h=0!==g?parseInt(g.split(".")[0],10):0,j=0!==g?parseInt(g.split(".")[1],10):0,k=0,l=null;for("function"!=typeof f&&a.fail("jQuery not found.",i.JQUERY_NOT_FOUND),b=0,k=e.length;k>b;b+=1)c(f,e[b]);for(b=0,k=d.length,l=f({});k>b;b+=1)c(l,d[b]);h>=2||1===h&&j>=7||a.fail("jQuery Object has the wrong version ("+g+")",i.JQUERY_NOT_SUPPORTED)}function e(b){var e=l.useCapture===!0;g.xpath=k.queryDom.xpath,f=b.hasOwnProperty("jQueryObject")?a.utils.access(b.jQueryObject):window.jQuery,d(),e&&"function"==typeof document.addEventListener?(m=function(a,b,c){var d=function(a){c(f.event.fix(a))};a.addEventListener(b,d,e)},n=function(a,b,c){var d=function(a){c(f.event.fix(a))};a.removeEventListener(b,d,e)}):(c(f({}),"on"),m=function(a,b,c){f(a).on(b,c)},c(f({}),"off"),n=function(a,b,c){f(a).off(b,c)}),o=!0}var f,g,h,i={JQUERY_NOT_SUPPORTED:"JQUERYNOTSUPPORTED",JQUERY_NOT_FOUND:"JQUERYNOTFOUND"},j=a.getService("config"),k=a.getService("browserBase"),l=j.getServiceConfig("browser")||{},m=null,n=null,o=!1;return g={list2Array:function(a){var b,c=a.length,d=[];if(!a)return d;if("undefined"==typeof a.length)return[a];for(b=0;c>b;b+=1)d[b]=a[b];return d},find:function(a,b,c){return c=c||"css",this.list2Array(this[c](a,b))},css:function(a,b){return b=b||document,f(b).find(a).get()}},h=function(){var c=new a.utils.WeakMap;return{add:function(a){var d=c.get(a)||[b(a),0];return d[1]+=1,c.set(a,d),d[0]},find:function(a){var b=c.get(a);return b?b[0]:null},remove:function(a){var b=c.get(a);b&&(b[1]-=1,b[1]<=0&&c.remove(a))}}}(),{jQueryFnExists:c,verifyJQuery:d,handlerMappings:h,init:function(){o?a.utils.clog("Attempt to initialize service which has been already initialized(browserService.jQuery)"):e(j.getServiceConfig("browser")||{})},destroy:function(){o=!1},getServiceName:function(){return"jQuery"},query:function(a,b,d){c(f,"find");try{return g.find(a,b,d)[0]||null}catch(e){return[]}},queryAll:function(a,b,d){c(f,"find");try{return g.find(a,b,d)}catch(e){return[]}},loadScript:function(a){c(f,"getScript"),f.getScript(a)},subscribe:function(a,b,d,e,g){var i=h.add(d);c(f({}),"on"),e?f(e).on(a,b,g,i):m(b,a,i)},unsubscribe:function(b,d,e,g){c(f({}),"off");var i=h.find(e);if(i){try{g?f(g).off(b,d,i):n(d,b,i)}catch(j){a.utils.clog("Unsubscribe failed for event: "+b+"\n"+j.message)}h.remove(e)}},getJQuery:function(){return f}}}),TLT.addService("ajax",function(a){"use strict";function b(a){a=a.split("\n");var b={},c=0,d=a.length,e=null;for(c=0;d>c;c+=1)e=a[c].split(": "),b[e[0]]=e[1];return b}function c(a){return function(c,d,e){var f=c,g=!1;"success"===d&&(f=e||c,g=!0),a({headers:b(f.getAllResponseHeaders()),responseText:f.responseText,statusCode:f.status,success:g})}}function d(b){f=b.hasOwnProperty("jQueryObject")?a.utils.access(b.jQueryObject):window.jQuery,i=!0}var e,f,g=a.getService("config"),h=a.getService("browser"),i=!1;return e={init:function(a){var b=parseFloat(f.fn.jquery);this.init=1.7>=b?e["jQuery<=1.7"]:e["jQuery>=1.8"],this.init(a)},"jQuery<=1.7":function(a){a.complete=c(a.oncomplete),delete a.oncomplete,f.ajax(a)},"jQuery>=1.8":function(a){var b,d=c(a.oncomplete);delete a.oncomplete,b=f.ajax(a.url,a),h.jQueryFnExists(b,"always"),b.always(d)}},{init:function(){i?a.utils.clog("Attempt to initialize service which has been already initialized(ajaxService.jQuery)"):d(g.getServiceConfig("browser")||{})},destroy:function(){i=!1},sendRequest:function(a){h.jQueryFnExists(f,"ajax"),a.type=a.type||"POST",e.init(a)}}}),TLT.addService("message",function(a){"use strict";function b(a){var b="";this.type=a.type,this.offset=(new Date).getTime()-l.getTime(),(2===a.type||null===i)&&(i=new Date),this.screenviewOffset=(new Date).getTime()-i.getTime(),this.count=k+=1,this.fromWeb=!0;for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function c(b,c){var d=v.PVC_MASK_BASIC;b.maskType===v.PVC_MASK_EMPTY.maskType?d=v.PVC_MASK_EMPTY:b.maskType===v.PVC_MASK_BASIC.maskType?d=v.PVC_MASK_BASIC:b.maskType===v.PVC_MASK_TYPE.maskType?d=v.PVC_MASK_TYPE:b.maskType===v.PVC_MASK_CUSTOM.maskType&&(d="string"==typeof b.maskFunction?a.utils.access(b.maskFunction):b.maskFunction,"function"!=typeof d&&(d=v.PVC_MASK_BASIC)),"undefined"!=typeof c.target.prevState&&c.target.prevState.hasOwnProperty("value")&&(c.target.prevState.value=d(c.target.prevState.value)),"undefined"!=typeof c.target.currState&&c.target.currState.hasOwnProperty("value")&&(c.target.currState.value=d(c.target.currState.value))}function d(a,b){var c,d,e,f,g,h,i,j;for(c=0,i=a.length;i>c;c+=1)if(j=a[c],"string"==typeof j){for(e=o.queryAll(j),d=0,f=e?e.length:0;f>d;d+=1)if(e[d]&&(g=n.ElementData.prototype.examineID(e[d]),g.type===b.idType&&g.id===b.id))return!0}else if(j.id&&j.idType&&b.idType.toString()===j.idType.toString())switch(typeof j.id){case"string":if(j.id===b.id)return!0;break;case"object":if(h=new RegExp(j.id.regex,j.id.flags),h.test(b.id))return!0}return!1}function e(a){var b,e,f;if(!a||!a.hasOwnProperty("target"))return a;for(b=0,e=u.length;e>b;b+=1)if(f=u[b],d(f.targets,a.target)){c(f,a);break}return a}function f(){p=a.getService("config"),q=p.getServiceConfig("message")||{},u=q.hasOwnProperty("privacy")?q.privacy:[]}function g(){p.subscribe&&p.subscribe("configupdated",f),I=!0}function h(){p.unsubscribe("configupdated",f),I=!1}var i=null,j=0,k=0,l=new Date,m=new Date,n=a.getService("browserBase"),o=a.getService("browser"),p=a.getService("config"),q=p.getServiceConfig("message")||{},r=window.location.href,s="TODO",t="ID"+m.getHours()+"H"+m.getMinutes()+"M"+m.getSeconds()+"S"+m.getMilliseconds()+"R"+Math.random(),u=q.hasOwnProperty("privacy")?q.privacy:[],v={},w={lower:"x",upper:"X",numeric:"9",symbol:"@"},x=navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1||navigator.userAgent.indexOf("iPad")>-1,y=navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Android")>-1,z=window.devicePixelRatio||1,A=window.screen?window.screen.width:0,B=window.screen?window.screen.height:0,C=window.orientation||0,D=x||y?A:320>=A?A:A/z,E=x||y?B:320>=A?B:B/z,F=window.screen?window.screen.height-window.screen.availHeight:0,G=window.innerWidth||document.documentElement.clientWidth,H=window.innerHeight||document.documentElement.clientHeight,I=!1;return v.PVC_MASK_EMPTY=function(){return""},v.PVC_MASK_BASIC=function(a){var b="XXXXX";return"string"!=typeof a?"":a.length?b:""},v.PVC_MASK_TYPE=function(b){var c,d=0,e=0,f="";if("string"!=typeof b)return f;for(c=b.split(""),d=0,e=c.length;e>d;d+=1)f+=a.utils.isNumeric(c[d])?w.numeric:a.utils.isUpperCase(c[d])?w.upper:a.utils.isLowerCase(c[d])?w.lower:w.symbol;return f},v.PVC_MASK_EMPTY.maskType=1,v.PVC_MASK_BASIC.maskType=2,v.PVC_MASK_TYPE.maskType=3,v.PVC_MASK_CUSTOM={maskType:4},{privacyMasks:v,applyMask:c,matchesTarget:d,privacyFilter:e,updateConfig:f,init:function(){I?a.utils.clog("Attempt to initialize service which has been already initialized(messageService)"):g()
},destroy:function(){h()},createMessage:function(a){if("undefined"==typeof a.type)throw new TypeError("Invalid queueEvent given!");return e(new b(a))},wrapMessages:function(b){var c={messageVersion:"2.2.0.0",serialNumber:j+=1,sessions:[{id:t,startTime:m.getTime(),timezoneOffset:m.getTimezoneOffset(),messages:b,clientEnvironment:{webEnvironment:{libVersion:"3.1.0.1520",page:r,windowId:s,screen:{devicePixelRatio:z,deviceOriginalWidth:x||y?A*z:A,deviceOriginalHeight:x||y?B*z:B,deviceWidth:D,deviceHeight:E,deviceToolbarHeight:F,width:G,height:H,orientation:C}}}}]},d=c.sessions[0].clientEnvironment.webEnvironment.screen;return d.orientationMode=a.utils.getOrientationMode(d.orientation),c}}}),TLT.addService("serializer",function(core){"use strict";function serializeToJSON(a){var b,c,d=0;if("object"!=typeof a||null===a)switch(typeof a){case"function":case"undefined":return"null";case"string":return'"'+a.replace(/\"/g,'\\"')+'"';default:return String(a)}else if("[object Array]"===Object.prototype.toString.call(a))for(b="[",c=0,d=a.length;d>c;c+=1)Object.prototype.hasOwnProperty.call(a,c)&&(b+=serializeToJSON(a[c])+",");else{b="{";for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b=b.concat('"',c,'":',serializeToJSON(a[c]),","),d+=1)}return d>0&&(b=b.substring(0,b.length-1)),b+=String.fromCharCode(b.charCodeAt(0)+2)}function addObjectIfExist(a,b,c){var d,e,f;for(a=a||[],d=0,e=a.length;e>d;d+=1)if(f=a[d],"string"==typeof f&&(f=core.utils.access(f)),"function"==typeof f){b[c]=f;break}}function checkParserAndSerializer(){var a;return"function"!=typeof serialize.json||"function"!=typeof parse.json?a=!0:(a="undefined"==typeof parse.json('{"foo": "bar"}')?!0:"bar"!==parse.json('{"foo": "bar"}').foo,"undefined"==typeof parse.json("[1, 2]")?a=!0:(a=a||1!==parse.json("[1, 2]")[0],a=a||2!==parse.json("[1,2]")[1]),a=a||'{"foo":"bar"}'!==serialize.json({foo:"bar"}),a=a||"[1,2]"!==serialize.json([1,2])),a}function initSerializerService(a){var b;for(b in a)a.hasOwnProperty(b)&&(addObjectIfExist(a[b].stringifiers,serialize,b),addObjectIfExist(a[b].parsers,parse,b));a.json&&a.json.hasOwnProperty("defaultToBuiltin")&&a.json.defaultToBuiltin!==!0||(serialize.json=serialize.json||defaultSerializers.json.serialize,parse.json=parse.json||defaultSerializers.json.parse),("function"!=typeof serialize.json||"function"!=typeof parse.json)&&core.fail("JSON parser and/or serializer not provided in the UIC config. Can't continue."),checkParserAndSerializer()&&("function"!=typeof serialize.json&&"function"!=typeof parse.json||"function"!=typeof serialize.json||"function"!=typeof parse.json||("undefined"==typeof parse.json('{"foo": "bar"}')||"bar"!==parse.json('{"foo":"bar"}').foo,"undefined"==typeof parse.json("[1, 2]")||1!==parse.json("[1,2]")[0]||2!==parse.json("[1,2]")[1],'{"foo":"bar"}'!==serialize.json({foo:"bar"}),"[1,2]"!==serialize.json([1,2])),core.fail("JSON stringification and parsing are not working as expected")),configService.subscribe&&configService.subscribe("configupdated",updateConfig),isInitialized=!0}function destroy(){serialize={},parse={},configService.unsubscribe("configupdated",updateConfig),isInitialized=!1}var configService=core.getService("config"),serialize={},parse={},defaultSerializers={json:function(){return"undefined"!=typeof window.JSON?{serialize:window.JSON.stringify,parse:window.JSON.parse}:{serialize:serializeToJSON,parse:function(data){return eval("("+data+")")}}}()},updateConfig=null,isInitialized=!1;return updateConfig=function(){configService=core.getService("config"),initSerializerService(configService.getServiceConfig("serializer")||{})},{updateConfig:updateConfig,init:function(){isInitialized?core.utils.clog("Attempt to initialize service which has been already initialized(serializerService)"):initSerializerService(configService.getServiceConfig("serializer")||{})},destroy:function(){destroy()},parse:function(a,b){return b=b||"json","function"!=typeof parse[b]&&core.utils.clog("Unsupported type of data in parse method of serializer service: "+b),parse[b](a)},serialize:function(a,b){return b=b||"json","function"!=typeof serialize[b]&&core.utils.clog("Unsupported type of data in serializer method of serializer service: "+b),serialize[b](a)}}}),!TLT||"function"!=typeof TLT.addModule)throw"Overstat module included but TLT is not defined!!!";if(TLT.addModule("overstat",function(a){"use strict";function b(a,b){var c,d;if(!a||"object"!=typeof a)return null;for(d=b.split("."),c=0;c<d.length;c+=1){if("undefined"==typeof a||null===a[d[c]])return null;a=a[d[c]]}return a}function c(b){var c=a.getConfig()||{},d=c[b];return"number"==typeof d?d:D[b]}function d(c,d){var e=b(c,"webEvent.target.element.tagName")||"",f="input"===e.toLowerCase()?b(c,"webEvent.target.element.type"):"",g=B[e.toLowerCase()+":"+f]||e,h={type:9,event:{hoverDuration:c.hoverDuration,hoverToClick:b(d,"hoverToClick")},target:{id:b(c,"webEvent.target.id")||"",idType:b(c,"webEvent.target.idType")||"",name:b(c,"webEvent.target.name")||"",tlType:g,type:e,subType:f,position:{width:b(c,"webEvent.target.element.offsetWidth")||0,height:b(c,"webEvent.target.element.offsetHeight")||0,relXY:c.gridX+","+c.gridY}}};void 0!==typeof h.target.id&&""!==h.target.id&&a.post(h)}function e(a){return a&&a.element&&(a=a.element),!a||a===document.body||a===document.html||a===document}function f(a){return a?a.element?a.element.parentNode:a.parentNode:null}function g(a){if(!a)return null;var b=a.element?a.element.offsetParent:a.offsetParent;return b||f(a)}function h(a,b){if(!b||b===a)return!1;for(b=f(b);!e(b);){if(b===a)return!0;b=f(b)}return!1}function i(a){return a.nativeEvent&&(a=a.nativeEvent),a}function j(a){return a?a.element||a:null}function k(a){return a?(a.element&&(a=a.element),a.nodeType||-1):-1}function l(a){return a?(a.element&&(a=a.element),a.tagName?a.tagName.toUpperCase():""):""}function m(a){return a&&a.element&&(a=a.element),a}function n(a){var b=l(a);return 1!==k(a)||"TR"===b||"TBODY"===b||"THEAD"===b}function o(b){return b?b.xPath?b.xPath:(b=j(b),a.getXPathFromNode(b)):""}function p(a,b){var c=C[a];return c&&c[b]?c[b]():void 0}function q(a,b,e,f){this.xPath=null!==a?o(a):"",this.domNode=a,this.hoverDuration=0,this.hoverUpdateTime=0,this.gridX=Math.max(b,0),this.gridY=Math.max(e,0),this.parentKey="",this.updateTimer=-1,this.disposed=!1,this.childKeys={},this.webEvent=f,this.getKey=function(){return this.xPath+":"+this.gridX+","+this.gridY},this.update=function(){var a=(new Date).getTime(),b=this.getKey();0!==this.hoverUpdateTime&&(this.hoverDuration+=a-this.hoverUpdateTime),this.hoverUpdateTime=a,clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){p(b,"update")},c("UPDATE_INTERVAL"))},this.dispose=function(a){if(clearTimeout(this.updateTimer),delete C[this.getKey()],this.disposed=!0,a){var b=this.clone();C[b.getKey()]=b,b.update()}},this.process=function(a){if(clearTimeout(this.updateTimer),this.disposed)return!1;var b=!1,e=this;if(this.hoverDuration>=c("HOVER_THRESHOLD_MIN"))for(this.hoverDuration=Math.min(this.hoverDuration,c("HOVER_THRESHOLD_MAX")),b=!0,d(this,{hoverToClick:!!a});"undefined"!=typeof e;)e.dispose(a),e=C[e.parentKey];else this.dispose(a);return b},this.clone=function(){var a=new q(this.domNode,this.gridX,this.gridY);return a.parentKey=this.parentKey,a}}function r(a,b,c){return new q(a,b,c)}function s(a){if(a&&a.position)return{x:a.position.x,y:a.position.y};a=m(a);for(var b=a.offsetLeft,c=a.offsetTop,d=b,f=c,h=0,i=0,j=g(a);j&&!e(j);)h=j.offsetLeft-(j.scrollLeft||0),i=j.offsetTop-(j.scrollTop||0),(h!==d||i!==f)&&(b+=h,c+=i,d=h,f=i),j=g(j);return isNaN(b)&&(b=0),isNaN(c)&&(c=0),{x:b,y:c}}function t(a,b,c){a=m(a);var d=s(a),e=b-d.x,f=c-d.y;return isFinite(e)||(e=0),isFinite(f)||(f=0),{x:e,y:f}}function u(a,b,d){a=m(a);var e=a.offsetWidth>0?Math.max(a.offsetWidth/c("GRIDCELL_MAX_X"),c("GRIDCELL_MIN_WIDTH")):c("GRIDCELL_MIN_WIDTH"),f=a.offsetHeight>0?Math.max(a.offsetHeight/c("GRIDCELL_MAX_X"),c("GRIDCELL_MIN_HEIGHT")):c("GRIDCELL_MIN_HEIGHT"),g=Math.floor(b/e),h=Math.floor(d/f);return isFinite(g)||(g=0),isFinite(h)||(h=0),{x:g,y:h}}function v(a){var b=a,c=a.getKey(),d={},e=null;for(d[c]=!0;"undefined"!=typeof b&&(d[b.parentKey]=!0,""!==b.parentKey&&b.parentKey!==b.getKey());)b=C[b.parentKey];for(e in C)C.hasOwnProperty(e)&&!d[e]&&(b=C[e],b&&b.process())}function w(a,b){var c=null,d=null;for(d in C)C.hasOwnProperty(d)&&(c=C[d],c.domNode===a&&c.getKey()!==b&&c.process())}function x(a,b,c){if(b||(b=a.target),e(b))return null;var d,f,h,i,j,k,l;return n(b)?h=x(a,g(b),c):(d=t(b,a.position.x,a.position.y),f=u(b,d.x,d.y),h=new q(b,f.x,f.y,a),i=h.getKey(),C[i]?h=C[i]:C[i]=h,h.update(),c||(l=g(b),l&&(k=x(a,l,!0),null!==k&&(j=k.getKey(),i=h.getKey(),i!==j&&(h.parentKey=j))),v(h))),h}function y(a){a=i(a),h(a.target,a.relatedTarget)||w(a.target)}function z(){var a,b=null;for(a in C)C.hasOwnProperty(a)&&(b=C[a],b.process(!0))}function A(a){var c=b(a,"target.id");if(c)switch(a.type){case"mousemove":x(a);break;case"mouseout":y(a);break;case"click":z(a)}}var B={"input:radio":"radioButton","input:checkbox":"checkBox","input:text":"textBox","input:password":"textBox","input:file":"fileInput","input:button":"button","input:submit":"submitButton","input:reset":"resetButton","input:image":"image","input:color":"color","input:date":"date","input:datetime":"datetime","input:datetime-local":"datetime-local","input:number":"number","input:email":"email","input:tel":"tel","input:search":"search","input:url":"url","input:time":"time","input:week":"week","input:month":"month","textarea:":"textBox","select:":"selectList","button:":"button","a:":"link"},C={},D={UPDATE_INTERVAL:250,HOVER_THRESHOLD_MIN:1e3,HOVER_THRESHOLD_MAX:12e4,GRIDCELL_MAX_X:10,GRIDCELL_MAX_Y:10,GRIDCELL_MIN_WIDTH:20,GRIDCELL_MIN_HEIGHT:20};return{DEBUG:1,postUIEvent:d,getValue:b,init:function(){},destroy:function(){var a;for(a in C)C.hasOwnProperty(a)&&(C[a].dispose(),delete C[a])},onevent:function(a){"object"==typeof a&&a.type&&A(a)},onmessage:function(){},createHoverEvent:r,cleanupHoverEvents:v,eventMap:C}}),!TLT||"function"!=typeof TLT.addModule)throw"Performance module included but TLT is not defined!!!";TLT.addModule("performance",function(a){"use strict";function b(a,b){return"string"!=typeof a?!1:b&&"object"==typeof b?b[a]===!0:!1}function c(a,c){var d=0,e={},f="",g=0;if(!a||"object"!=typeof a||!a.navigationStart)return{};d=a.navigationStart;for(f in a)(Object.prototype.hasOwnProperty.call(a,f)||"number"==typeof a[f])&&(b(f,c)||(g=a[f],e[f]="number"==typeof g&&g&&"navigationStart"!==f?g-d:g));return e}function d(b){var c,d,e=0,f=a.utils;return b&&(c=b.responseEnd>0&&b.responseEnd<b.domLoading?b.responseEnd:b.domLoading,d=b.loadEventStart,f.isNumeric(c)&&f.isNumeric(d)&&d>c&&(e=d-c)),e}function e(b){var c=a.getStartTime();b.timestamp>c&&!h&&(h=b.timestamp-c)}function f(b){var e,f,i,j=a.getConfig()||{},k="UNKNOWN",l={type:7,performance:{}};if(b&&!g.perfEventSent){if(f=b.performance||{},i=f.timing,e=f.navigation,i)l.performance.timing=c(i,j.filter),l.performance.timing.renderTime=d(i);else{if(!j.calculateRenderTime)return;l.performance.timing={renderTime:h,calculated:!0}}if(e){switch(e.type){case 0:k="NAVIGATE";break;case 1:k="RELOAD";break;case 2:k="BACKFORWARD";break;default:k="UNKNOWN"}l.performance.navigation={type:k,redirectCount:e.redirectCount}}a.post(l),g.perfEventSent=!0}}var g={loadReceived:!1,unloadReceived:!1,perfEventSent:!1},h=0;return{isFiltered:b,parseTiming:c,getRenderTime:d,postPerformanceEvent:f,init:function(){},destroy:function(){},onevent:function(a){if("object"==typeof a&&a.type)switch(a.type){case"load":g.loadReceived=!0,e(a);break;case"unload":g.unloadReceived=!0,g.perfEventSent||f(window)}},onmessage:function(){}}}),TLT.addModule("replay",function(a){"use strict";function b(a,b){var c,d;if(!a||"object"!=typeof a)return null;for(d=b.split("."),c=0;c<d.length;c+=1){if("undefined"==typeof a||null===a[d[c]])return null;a=a[d[c]]}return a}function c(a){var b=[];for(a=a.parentNode;a;)b.push(a),a=a.parentNode;return b}function d(b){return a.utils.some(b,function(a){return"A"===a.tagName||"BUTTON"===a.tagName?a:null})}function e(a){var b=a.type;return b="string"==typeof b?b.toLowerCase():"unknown","blur"===b&&(b="focusout"),b}function f(f){var g,h=b(f,"webEvent.target.element.tagName"),i="input"===h.toLowerCase()?b(f,"webEvent.target.element.type"):"",j=I[h.toLowerCase()+":"+i]||h,k=c(b(f,"webEvent.target.element")),l=null,m=b(f,"webEvent.target.position.relXY"),n=b(f,"webEvent.target.subtype");return g={type:4,target:{id:f.id||"",idType:b(f,"webEvent.target.idType"),name:b(f,"webEvent.target.name"),tlType:j,type:h,subType:i,position:{width:b(f,"webEvent.target.element.offsetWidth"),height:b(f,"webEvent.target.element.offsetHeight")},currState:f.currState||null},event:{tlEvent:e(b(f,"webEvent")),type:b(f,"webEvent.target.type")}},m&&(g.target.position.relXY=m),"number"==typeof f.dwell&&f.dwell>0&&(g.target.dwell=f.dwell),"number"==typeof f.visitedCount&&(g.target.visitedCount=f.visitedCount),"undefined"!=typeof f.prevState&&(g.prevState=f.prevState),"undefined"!=typeof n&&(g.event.subType=n),g.target.name=b(f,"webEvent.target.name"),l=d(k),g.target.isParentLink=!!l,l&&(l.href&&(g.target.currState=g.target.currState||{},g.target.currState.href=g.target.currState.href||l.href),l.value&&(g.target.currState=g.target.currState||{},g.target.currState.value=g.target.currState.value||l.value),(l.innerText||l.textContent)&&(g.target.currState=g.target.currState||{},g.target.currState.innerText=a.utils.trim(g.target.currState.innerText||l.innerText||l.textContent))),null===g.target.currState&&delete g.target.currState,(null===g.target.name||"undefined"==typeof g.target.name)&&delete g.target.name,g}function g(b){a.post(b)}function h(a){var c=b(a,"target.name"),d=b(a,"target.dwell")||-1;c&&(T+=c+":"+d+";",U=c)}function i(b){var c,d,e,f,g=0,i=b.length,j={mouseout:!0,mouseover:!0},k=[];for(g=0;i>g;g+=1)if(d=b[g])if(j[d.event.type])k.push(d);else{for(c=g+1;i>c&&b[c]&&j[b[c].event.type];c+=1);i>c&&(e=b[c],e&&d.target.id===e.target.id&&d.event.type!==e.event.type&&("click"===d.event.type&&(f=d,d=e,e=f),"click"===e.event.type?(d.target.position=e.target.position,g+=1):"blur"===e.event.type&&(d.target.dwell=e.target.dwell,d.target.visitedCount=e.target.visitedCount,d.focusInOffset=e.focusInOffset,d.target.position=e.target.position,g+=1),b[c]=null,b[g]=d)),k.push(b[g])}for(d=k.shift();d;d=k.shift())h(d),a.post(d);b.splice(0,b.length)}function j(a,c){bb=c,bb.inFocus=!0,"undefined"==typeof L[a]&&(L[a]={}),L[a].focus=bb.dwellStart=Number(new Date),L[a].focusInOffset=Z?bb.dwellStart-Number(Z):-1,L[a].prevState=b(c,"target.state"),L[a].visitedCount=L[a].visitedCount+1||1}function k(a,c){O.push(f({webEvent:a,id:c,currState:b(a,"target.state")}))}function l(a){var b=!1,c="|button|image|submit|reset|checkbox|radio|",d=null;if("object"!=typeof a||!a.type)return b;switch(a.type){case"INPUT":d="|"+(a.subType||"")+"|",b=-1===c.indexOf(d.toLowerCase())?!1:!0;break;case"TEXTAREA":b=!1;break;default:b=!0}return b}function m(a,c){var d;"undefined"!=typeof a&&null!==a&&"undefined"!=typeof c&&null!==c&&(bb.inFocus=!1,"undefined"!=typeof L[a]&&L[a].hasOwnProperty("focus")?L[a].dwell=Number(new Date)-L[a].focus:(L[a]={},L[a].dwell=0),0===O.length&&(c.type=c.target.type="blur",k(c,a)),d=O[O.length-1],d&&(d.target.dwell=L[a].dwell,d.focusInOffset=L[a].focusInOffset,d.target.visitedCount=L[a].visitedCount,"click"!==d.event.type||l(d.target)||(d.target.currState=b(c,"target.state"),d.event.type="blur",d.event.tlEvent="focusout")),i(O))}function n(a,b){var c=!1;return O.length>0&&O[O.length-1]&&O[O.length-1].target.id!==a&&"scroll"!==b.type&&"resize"!==b.type&&"mouseout"!==b.type&&"mouseover"!==b.type&&"textBox"!==O[O.length-1].target.tlType&&"selectList"!==O[O.length-1].target.tlType&&(m(O[O.length-1].target.id,O[O.length-1]),c=!0),c}function o(a,b){"undefined"==typeof L[a]||L[a].hasOwnProperty("focus")||j(a,b),k(b,a),"undefined"!=typeof L[a]&&"undefined"!=typeof L[a].prevState&&("textBox"===O[O.length-1].target.tlType||"selectList"===O[O.length-1].target.tlType)&&(O[O.length-1].target.prevState=L[a].prevState)}function p(a){var b=a.target.position.x,c=a.target.position.y,d=a.target.size.width,e=a.target.size.height,f=Math.abs(b/d).toFixed(1),g=Math.abs(c/e).toFixed(1);return f=f>1||0>f?.5:f,g=g>1||0>g?.5:g,f+","+g}function q(a,c){var d,e=!0,f=0;return"SELECT"===c.target.element.tagName&&cb&&cb.target.id===a?void(cb=null):(bb.inFocus||j(a,c),f=O.length,f&&"change"!==b(O[f-1],"event.type")&&o(a,c),d=p(c),f=O.length,0===c.position.x&&0===c.position.y&&f&&"radioButton"===b(O[f-1],"target.tlType")?e=!1:c.target.position.relXY=d,f&&b(O[f-1],"target.id")===a?e&&(O[f-1].target.position.relXY=d):k(c,a),void(cb=c))}function r(){var a=window.orientation||0;return a}function s(){var b=r(),c={type:4,event:{type:"orientationchange"},target:{prevState:{orientation:J,orientationMode:a.utils.getOrientationMode(J)},currState:{orientation:b,orientationMode:a.utils.getOrientationMode(b)}}};g(c),J=b}function t(a){var b=!1;return a?b=K.scale===a.scale&&Math.abs((new Date).getTime()-K.timestamp)<500:b}function u(a){K.scale=a.scale,K.rotation=a.rotation,K.timestamp=(new Date).getTime()}function v(a){var b,c="INVALID";return"undefined"==typeof a||null===a?c:(b=Number(a),c=isNaN(b)?"INVALID":1>b?"CLOSE":b>1?"OPEN":"NONE")}function w(a){var c={},d=b(a,"nativeEvent.rotation")||0,e=b(a,"nativeEvent.scale")||1,f=null,h={type:4,event:{type:"touchend"},target:{id:b(a,"target.id"),idType:b(a,"target.idType")}};db&&(!e||1===e)||!db&&a.nativeEvent.touches.length<=1||(f={rotation:d?d.toFixed(2):0,scale:e?e.toFixed(2):1},f.pinch=v(f.scale),t(f)||(K&&K.timestamp&&(c.rotation=K.rotation,c.scale=K.scale,c.pinch=v(c.scale)),b(c,"scale")&&(h.target.prevState=c),h.target.currState=f,g(h),u(f)))}function x(c){var d=[],e=0,f=36e5,g=null;switch(c){case"load":V=(new Date).getTime(),d=window.document.getElementsByName("object"),a.addHeader("X-TeaLeaf-Page-Objects",d.length);break;case"unload":g=b(window,"performance.timing"),g&&g.loadEventStart&&(e=Math.abs(g.loadEventStart-g.responseEnd),a.addHeader("X-TeaLeaf-Page-Render",e>f?f:e)),W=(new Date).getTime()-V,a.addHeader("X-TeaLeaf-Page-Dwell",W),a.addHeader("X-TeaLeaf-Page-Cui-Exceptions",S),a.addHeader("X-TeaLeaf-Visit-Order",T),a.addHeader("X-TeaLeaf-Page-Last-Field",U)}}function y(c){var d=document.documentElement,e=document.body,f={type:1,clientState:{pageWidth:document.width||(d?d.offsetWidth:0),pageHeight:Math.max(document.height?document.height:0,d?d.offsetHeight:0,d?d.scrollHeight:0),viewPortWidth:window.innerWidth||d.clientWidth,viewPortHeight:window.innerHeight||d.clientHeight,viewPortX:window.pageXOffset||(d?d.scrollLeft||0:e?e.scrollLeft:0),viewPortY:window.pageYOffset||(d?d.scrollTop||0:e?e.scrollTop:0),deviceOrientation:window.orientation||0,event:b(c,"type")}},g=1,h=1;return g=90===Math.abs(f.clientState.deviceOrientation)?db||eb?hb-ib:320>=gb?hb-ib:hb/fb-ib:db||eb?gb+ib:320>=gb?gb-ib:gb/fb-ib,h=0===f.clientState.viewPortWidth?1:g/f.clientState.viewPortWidth,f.clientState.deviceScale=h-.02,f.clientState.deviceScale=f.clientState.deviceScale.toFixed(3),f.clientState.viewTime=null===Y?0:(new Date).getTime()-Y.getTime(),"scroll"===c.type&&0>=P&&($=R.clientState.viewPortX,_=R.clientState.viewPortY),"scroll"===c.type&&(f.clientState.viewPortXStart=$,f.clientState.viewPortYStart=_),Q=a.utils.clone(f),f}function z(){return null!==Q&&"load"!==Q.clientState.event?("scroll"===Q.clientState.event&&(delete Q.clientState.viewPortXStart,delete Q.clientState.viewPortYStart),Q.clientState.event="attention",Q.clientState.viewTime=null===Z?0:(new Date).getTime()-Z.getTime(),g(Q),Z=new Date,!0):!1}function A(a){return"scroll"===a.clientState.event&&a.clientState.viewPortXStart===a.clientState.viewPortX&&a.clientState.viewPortYStart===a.clientState.viewPortY?!1:!0}function B(b){var c=null===ab?0:(new Date).getTime()-ab.getTime();return null!==Q&&(b.type!==Q.clientState.event||c>=1e3)?(A(Q)&&(g(Q),"touchend"!==Q.clientState.event&&(R=a.utils.clone(Q))),Q=null,Y=null,P=0,!0):(null!==Q&&1===P&&c>=1e3&&("resize"===Q.clientState.event||"scroll"===Q.clientState.event||"orientationchange"===Q.clientState.event||"screenview_load"===b.type)&&z(),!1)}function C(a,c){var d,e,f=["type","target.id"],g=null,h=!0,i=10,j=0,k=0,l=0;for(a&&c&&"object"==typeof a&&"object"==typeof c||(h=!1),d=0,e=f.length;h&&e>d;d+=1)if(g=f[d],b(a,g)!==b(c,g)){h=!1;break}return h&&(k=b(a,"timestamp"),l=b(c,"timestamp"),isNaN(k)&&isNaN(l)||(j=Math.abs(b(a,"timestamp")-b(c,"timestamp")),(isNaN(j)||j>i)&&(h=!1))),h}function D(){var a=window.location.hash;a!==M&&(M&&TLT.logScreenviewUnload(M),a&&TLT.logScreenviewLoad(a),M=a)}function E(b){var c=jb.storageKeys;return"string"!=typeof b?!1:-1===a.utils.indexOf(c,b)?!1:!0}function F(a){var b=null;return a&&E(a.key)&&(b={type:8,webStorage:a},g(b)),b}function G(a){var c={type:4,event:{type:a.type},target:{id:b(a,"target.id"),idType:b(a,"target.idType")}};g(c)}var H,I={"input:radio":"radioButton","input:checkbox":"checkBox","input:text":"textBox","input:password":"textBox","input:file":"fileInput","input:button":"button","input:submit":"submitButton","input:reset":"resetButton","input:image":"image","input:color":"color","input:date":"date","input:datetime":"datetime","input:datetime-local":"datetime-local","input:number":"number","input:email":"email","input:tel":"tel","input:search":"search","input:url":"url","input:time":"time","input:week":"week","input:month":"month","textarea:":"textBox","select:":"selectList","button:":"button","a:":"link"},J=window.orientation||0,K={scale:0,timestamp:0},L={},M=window.location.hash,N=null,O=[],P=0,Q=null,R=null,S=0,T="",U="",V=(new Date).getTime(),W=0,X=null,Y=null,Z=null,$=0,_=0,ab=null,bb={inFocus:!1},cb=null,db=navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1||navigator.userAgent.indexOf("iPad")>-1,eb=navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Android")>-1,fb=window.devicePixelRatio||1,gb=window.screen?window.screen.width:0,hb=window.screen?window.screen.height:0,ib=window.screen?window.screen.height-window.screen.availHeight:0,jb=a.getConfig();return"function"!=typeof window.onerror&&(window.onerror=function(b,c,d){var e=null;"string"==typeof b&&(d=d||-1,e={type:6,exception:{description:b,url:c,line:d}},S+=1,a.post(e))}),H=function(a){var b=a.Storage?a.Storage.prototype.getItem:function(){};return function(){var c;try{a.Storage.prototype.getItem=function(a){try{var d=b.call(localStorage,a);return c={key:a||null,value:d},F(c),d}catch(e){}}}catch(d){return!1}return!0}}(window),{tlTypes:I,currOrientation:J,pastEvents:L,lastEventId:N,tmpQueue:O,postEventQueue:i,eventCounter:P,curClientState:Q,getViewEventStart:function(){return Y},setViewEventStart:function(a){Y=a},viewTimeStart:Z,getValue:b,parentElements:c,getParentLink:d,createQueueEvent:f,postUIEvent:g,handleFocus:j,handleBlur:m,handleChange:o,handleClick:q,getNormalizedOrientation:r,handleOrientationChange:s,handleClientState:y,checkViewClientState:z,checkClientState:B,getPinchType:v,saveTouchState:u,isDuplicateTouch:t,getTlEvent:e,isDuplicateEvent:C,trackHashchange:D,isTargetClickable:l,defaultEventHandler:G,extendGetItem:H,isStorageKeyCaptured:E,handleStorage:F,init:function(){},destroy:function(){m(N)},onevent:function(a){var c=null,d=null;if("object"==typeof a&&a.type){if(C(a,X))return void(X=a);switch(X=a,c=b(a,"target.id"),"[object Object]"!==Object.prototype.toString.call(L[c])&&(L[c]={}),B(a),n(c,a),ab=new Date,a.type){case"hashchange":D();break;case"focus":d=j(c,a);break;case"blur":d=m(c,a);break;case"click":d=q(c,a);break;case"change":d=o(c,a);break;case"orientationchange":d=s(a);break;case"touchend":d=w(a),d=y(a);break;case"load":H(),x("load"),TLT.logScreenviewLoad("root"),d=y(a),Z=new Date;break;case"screenview_load":Z=new Date;break;case"screenview_unload":break;case"resize":case"scroll":null===Y&&0>=P&&(Y=new Date),d=y(a),A(d)?d=null:P+=1;break;case"unload":null!==O&&i(O),x("unload"),d=y(a),z(),g(d),TLT.logScreenviewUnload("root");break;default:G(a)}return N=c,d}},onmessage:function(){}}}),TLT.addModule("saas",function(){"use strict";var a=function(){if("undefined"!=typeof TLT.getCoreConfig().modules.saas){var a;for(a in TLT.getCoreConfig().modules.saas)TLT.getCoreConfig().modules.saas.hasOwnProperty(a)&&"string"==typeof a&&"string"==typeof TLT.getCoreConfig().modules.saas[a]&&(this[a]=TLT.getCoreConfig().modules.saas[a],document.cookie=a+"="+this[a]);this.get=function(a){return"string"!=typeof a||"undefined"==typeof this?"SaaS Data undefined or key is not a string":"undefined"==typeof this[a]?"Key does not exist within saasData":this[a]},this.set=function(a,b){return"string"!=typeof a||"string"!=typeof b||"undefined"==typeof this||"get"===a||"set"===a||"toSaasString"===a||"clear"===a||"remove"===a?!1:(this[a]=b,document.cookie=a+"="+b,!0)},this.clear=function(){var a;for(a in this)this.hasOwnProperty(a)&&"get"!==a&&"set"!==a&&"toSaasString"!==a&&"clear"!==a&&"remove"!==a&&(document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",delete this[a])},this.remove=function(a){this.hasOwnProperty(a)&&"get"!==a&&"set"!==a&&"toSaasString"!==a&&"clear"!==a&&"remove"!==a&&(document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;",delete this[a])},this.toSaasString=function(){var a,b="";for(a in this)this.hasOwnProperty(a)&&"string"==typeof this.get(a)&&(b+=a+"="+this.get(a)+";");return b}}},b=new a;return{init:function(){TLT.saasData=b},destroy:function(){},onevent:function(){}}});var changeTarget;TLT.init({services:{browser:{jQueryObject:"window.jQuery"},queue:{queues:[{qid:"DEFAULT",endpoint:"/TealeafTarget.php",maxEvents:25,timerinterval:0}],asyncReqOnUnload:!1},serializer:{json:{defaultToBuiltin:!0,parsers:[],stringifiers:[]}}},core:{modules:{performance:{enabled:!0,events:[{name:"load",target:window},{name:"unload",target:window}]},replay:{enabled:!0,events:[{name:"load",target:window},{name:"unload",target:window},{name:"click",recurseFrames:!0},{name:"focus",target:"input, select, textarea, button",recurseFrames:!0},{name:"blur",target:"input, select, textarea, button",recurseFrames:!0},{name:"change",target:changeTarget,recurseFrames:!0},{name:"resize",target:window},{name:"scroll",target:window},{name:"hashchange",target:window},{name:"orientationchange",target:window},{name:"touchend"}]},overstat:{enabled:!0,events:[{name:"click",recurseFrames:!0},{name:"mousemove",recurseFrames:!0},{name:"mouseout",recurseFrames:!0}]}},sessionData:{sessionCookieName:"enter"}},modules:{performance:{calculateRenderTime:!0,filter:{navigationStart:!0,unloadEventStart:!0,unloadEventEnd:!0,redirectStart:!0,redirectEnd:!0,fetchStart:!0,domainLookupStart:!0,domainLookupEnd:!0,connectStart:!0,connectEnd:!0,secureConnectionStart:!0,requestStart:!0,responseStart:!0,responseEnd:!0,domLoading:!0,domInteractive:!0,domContentLoadedEventStart:!0,domContentLoadedEventEnd:!0,domComplete:!0,loadEventStart:!0,loadEventEnd:!0}}}}),function(){var a=300,b=600,c=15,d=null,e=null,f=!1,g=null,h=null,i=null,j=null,k=null,l={x:0,y:0},m={x:0,y:0},n={x:0,y:0},o={x:0,y:0},p=function(a){d=new Date,e=a,$(".bMainMenuLevel-2__eItem").removeClass("hover"),a.addClass("hover")},q=function(){var b=$(this);b.hasClass("jsEmptyChild")||(d=new Date,f=!0,setTimeout(function(){f&&new Date-d>a&&p(b)},a+20),b.find(".lazyMenuImg").each(function(a,b){var c=$(b);c.attr("src",c.data("src"))}))},r=function(){var a=$(this);a.removeClass("hover"),f=!1},s=function(){l={x:o.x,y:o.y-$(window).scrollTop()},m={x:k.left-c,y:k.top-$(window).scrollTop()},n={x:k.left-c,y:k.top+k.height-$(window).scrollTop()}},t=function(){var a=(l.x-o.x)*(m.y-l.y)-(m.x-l.x)*(l.y-o.y),b=(m.x-o.x)*(n.y-m.y)-(n.x-m.x)*(m.y-o.y),d=(n.x-o.x)*(l.y-n.y)-(l.x-n.x)*(n.y-o.y);return a>=0&&b>=0&&d>=0||0>=a&&0>=b&&0>=d||o.x>=m.x&&o.x<=m.x+c&&o.y>=m.y&&o.y<=n.y?!0:!1},u=function(a){o={x:a.pageX,y:a.pageY-$(window).scrollTop()};var b=$(this);h&&b.attr("class")===h.attr("class")&&(z(b),g=new Date),y(b)},v=function(a){h=a,a.addClass("hover"),g=new Date,z(a)},w=function(){var a=$(this);y(a),a.addClass("hoverNowLvl2"),g&&new Date-g<=b&&t()&&setTimeout(function(){a.hasClass("hoverNowLvl2")&&new Date-g>b&&y(a)},b+20)},x=function(){var a=$(this);a.removeClass("hoverNowLvl2")},y=function(a){g?(!t()||g&&new Date-g>b&&t())&&(h.removeClass("hover"),v(a)):v(a)},z=function(a){i=A(a),j=A(a.find(".bMainMenuLevel-3"));var b=a.find(".bMainMenuLevel-2__eTitle")[0].offsetWidth;k={top:j.top,left:j.left+b,width:j.width-b,height:j.height},s()},A=function(a){var b=$(a).width(),c=$(a).height();a=a[0];for(var d=0,e=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)d+=a.offsetLeft-a.scrollLeft,e+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:e,left:d,width:b,height:c}};$(".bMainMenuLevel-1__eItem").mouseenter(q),$(".bMainMenuLevel-1__eItem").mouseleave(r),$(".bMainMenuLevel-2__eItem").mouseenter(w),$(".bMainMenuLevel-2__eItem").mousemove(u),$(".bMainMenuLevel-2__eItem").mouseleave(x)}(),function(){var a=$("#upper"),b=!1,c=function(){$(window).scrollTop()>600&&!b?(b=!0,a.animate({marginTop:"0"},400)):$(window).scrollTop()<600&&b&&(b=!1,a.animate({marginTop:"-55px"},400))},d=function(){return $(window).scrollTo("0px",400),!1};$(window).scroll(c),a.bind("click",d)}(),function(a){function b(a,b){$.each(r,function(){this.removeClass(s)}),a?p.show(0,b||function(){}):p.slideDown(),p.length&&q.css("visibility","hidden")}function c(){p.slideUp(),q.css("visibility","visible")}function d(a){x||(l&&l.length&&w.scrollTop()>=l.offset().top&&!a?b():c())}function e(){return $.scrollTo(m,500),a.catalog.filter.openFilter(),!1}function f(){function a(){var a=$(".topbarfix_cartOn");a.length&&a.slideUp(300,function(){a.removeAttr("style")})}function b(){y&&o.showOverlay&&y.fadeOut(100,function(){y.off("click"),y.remove(),o.showOverlay=!1,x=!1,d()})}var c=p.find(".topbarfix_cart"),e=p.find(".topbarfix_log"),f="mOpenedPopup",g=c.find(".hintDd");return g.hasClass("mhintDdOn")?(g.removeClass("mhintDdOn"),e.removeClass(f),c.removeClass(f),a(),b(),!1):(a(),void b())}function g(a,c,d){$.each(r,function(){this.removeClass(s)});var e=$(".topbarfix_cartOn");!o.showOverlay&&y&&(v.append(y),y.fadeIn(300),o.showOverlay=!0,y.on("click",f)),a?e.slideDown(300):e.show(),b(!0),d&&i(c,d),x=!0,$(document.body).trigger("showUserCart")}function h(){var b=$(this),c=function(a){var b,c=$(".jsChangeRegion"),d=c.length?c.data("region-id"):!1,e=window._rutarget||[];d&&a.hasOwnProperty("product")&&a.product.hasOwnProperty("id")&&(b={event:"removeFromCart",sku:a.product.id,regionId:d},e.push(b))},d=function(a){"undefined"!=typeof JSREObject&&a.hasOwnProperty("product")&&a.product.hasOwnProperty("id")&&JSREObject("cart_remove",a.product.id)},e=function(a){a.hasOwnProperty("product")&&a.product.hasOwnProperty("id")&&window.rrApiOnReady.push(function(){window.rrApi.removeFromBasket(a.product.id)})},h=function(a){"undefined"!=typeof a&&(e(a),c(a),d(a))},i=function(b){b.success&&(h(b),a.UserModel.cart.remove(function(a){return a.id==b.product.id}),$(".js-basketLineDeleteLink-"+b.product.id).click(),0==a.UserModel.cart().length?f():g(),v.trigger("removeFromCart",[b.product]))};return $.ajax({type:"GET",url:b.attr("href"),success:i}),!1}function i(b,c){function d(c){if(c.success&&o.showOverlay&&(g.find(".bGoodsSlider").remove(),e=$(c.content)[0],g.append(e),g.addClass("mhintDdOn"),$(e).goodsSlider(),ko.applyBindings(a.UserModel,e),b.product&&b.product.article)){if(c.data)try{rrApi.recomTrack(c.data.method,c.data.id,c.data.recommendations)}catch(d){}"function"==typeof _gaq&&_gaq.push(["_trackEvent","cart_recommendation","cart_rec_shown",b.product.article]),"function"==typeof _kmq&&_kmq.push(["record","cart recommendation shown",{"SKU cart rec shown":b.product.article}])}}var e,f=p.find(".topbarfix_cart"),g=f.find(".hintDd");c.url&&$.ajax({type:"GET",url:c.url,success:d})}function j(){var a=$(this).parents(".jsSliderItem").data("product");a.article&&(_gaq&&_gaq.push(["_trackEvent","cart_recommendation","cart_rec_clicked",a.article]),_kmq&&_kmq.push(["record","cart recommendation clicked",{"SKU cart rec clicked":a.article}]))
}function k(a,b,c){if(a.stopPropagation(),!r[b]){var d=$(".js-compare-popup",c);$(".js-compare-popup-closer",d).click(function(){d.removeClass(s)}),$(".js-topbarfixLogin, .js-topbarfixNotEmptyCart",c).mouseover(function(){d.removeClass(s)}),$("html").click(function(){d.removeClass(s)}),$(d).click(function(a){a.stopPropagation()}),$(document).keyup(function(a){27==a.keyCode&&d.removeClass(s)}),r[b]=d}r[b].addClass(s)}var l,m,n=a.utils,o=n.extendApp("ENTER.userBar"),p=o.userBarFixed=$(".topbarfix-fx"),q=o.userBarStatic=$(".topbarfix-stc"),r={},s="topbarfix_cmpr_popup-show",t=p.find(".js-userbar-upLink"),u=p.data("value"),v=$("body"),w=$(window),x=!1,y=$("<div>").css({position:"fixed",display:"none",width:"100%",height:"100%",top:0,left:0,zIndex:900,background:"black",opacity:.4});o.showOverlay=!1,o.show=b,v.on("click",".jsUpsaleProduct",j),v.on("click",".jsCartDelete",h),$(".js-noProductsForCompareLink",p).click(function(a){k(a,"fixed",p)}),$(".js-noProductsForCompareLink",q).click(function(a){k(a,"static",q)}),p.length?("/cart"!==window.location.pathname&&v.on("addtocart",g),p.on("click",".jsCartDelete",h),l=$(u.target),m=u.filterTarget?$(u.filterTarget):l,t.length&&t.on("click",e),l.length?w.on("scroll",function(){d()}):w.on("scroll",function(){d(!0)})):(y.remove(),y=!1)}(window.ENTER);