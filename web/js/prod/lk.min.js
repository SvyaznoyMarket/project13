+function(a){a(".js-slider-2").goodsSlider({leftArrowSelector:".goods-slider__btn--prev",rightArrowSelector:".goods-slider__btn--next",sliderWrapperSelector:".goods-slider__inn",sliderSelector:".goods-slider-list",itemSelector:".goods-slider-list__i"})}(jQuery),function(){var a=($("#user_mobile_phone"),$(".jsCardNumber")),b=$(".js-input-control:not(always-show)"),c=function(a,b){void 0!=typeof a&&void 0!=typeof b&&a.mask(b,{placeholder:"*"})},d=function(){var a=$(this),b=a.data("mask");void 0!=typeof b&&c(a,b)},e=function(){var a=$(this),b=a.val(),c=a.parent().find(".js-label-control");""==b?c.hide():c.show()};$.mask.definitions.x="[0-9]",a.length&&a.each(d),$.mask.definitions.x="[0-9]",$(".js-lk-mobilePhone, .js-lk-homePhone").mask("+7 (xxx) xxx-xx-xx",{autoclear:0}),$.each(b,e),b.on("keyup",e)}(),function(a){var b=a("body"),c=a("#personal-container"),d=a("#tpl-favorite-messagePopup"),e=a("#tpl-favorite-createPopup"),f=a("#tpl-favorite-movePopup"),g=a("#tpl-favorite-deletePopup"),h=a("#tpl-favorite-deleteFavoritePopup"),i=a("#tpl-favorite-shareProductPopup"),j=a(".personal-favorit__checkbox").not(".js-fav-all"),k=function(b){a("body").append('<div class="overlay"></div>'),a(".overlay").data("popup",b).show(),a(b).show()},l=function(b){a(b).remove(),a(".overlay").remove()};b.on("click",".overlay",function(){var b=a(this).data("popup");l(b)}),b.on("click",".popup-closer",function(){l("#"+a(this).parent().attr("id"))}),b.on("click",".personal-favorit__stock",function(){a(this).toggleClass("on")}),j.on("change",function(b){var c=a(this),d=c.closest(".personal__favorits").find(".js-fav-all"),e=c.closest(".personal__favorits").find(".personal-favorit__checkbox").not(".js-fav-all"),f=!0;e.each(function(b){return f=!!a(this).prop("checked")}),d.attr("checked",f)}),b.on("change",".js-fav-all",function(){var b=a(this).closest(".personal__favorits").find(".personal-favorit__checkbox"),c=!!a(this).attr("checked");a(b).each(function(){a(this).prop("checked",c)})}),b.on("click",".js-notification-link",function(b){var c=a(this);try{c.toggleClass("on"),a.post(c.attr("href")),b.preventDefault()}catch(d){}}),b.on("click",".js-favorite-createPopup",function(){var b=a(this),d=b.data(),f=d.value;try{$popup=a(Mustache.render(e.html(),f)).appendTo(c),k("#"+$popup.attr("id"))}catch(g){}}),b.on("click",".js-favorite-deleteFavoritePopup",function(){var b=a(this),d=b.data(),e=d.value;try{$popup=a(Mustache.render(h.html(),e)).appendTo(c),k("#"+$popup.attr("id"))}catch(f){}}),b.on("click",".js-favorite-movePopup",function(){var b,e=a(this),g=e.data(),h=g.container&&a(g.container),i=g.value,j=[];try{if(!h.length)throw{name:"Контейнер не найден"};if($productInputs=h.find('input[data-type="product"]:checked'),!$productInputs.length)throw{name:"Товары не выбраны",code:"empty-product"};$productInputs.each(function(b,c){j.push(a(c).val())}),i.productUis=j.join(","),b=a(Mustache.render(f.html(),i)).appendTo(c),k("#"+b.attr("id"))}catch(l){"empty-product"===l.code&&(b=a(Mustache.render(d.html(),{message:{title:l.name}})).appendTo(c),k("#"+b.attr("id")))}}),b.on("click",".js-favorite-deletePopup",function(){var b,e=a(this),f=e.data(),h=f.container&&a(f.container),i=f.value,j=[];try{if(!h.length)throw{name:"Контейнер не найден"};if($productInputs=h.find('input[data-type="product"]:checked'),!$productInputs.length)throw{name:"Товары не выбраны",code:"empty-product"};$productInputs.each(function(b,c){j.push(a(c).val())}),i.productUis=j.join(","),b=a(Mustache.render(g.html(),i)).appendTo(c),k("#"+b.attr("id"))}catch(l){"empty-product"===l.code&&(b=a(Mustache.render(d.html(),{message:{title:l.name}})).appendTo(c),k("#"+b.attr("id")))}}),b.on("click",".js-favorite-shareProductPopup",function(){var b,e,f,g=a(this),h=g.data(),j=h.container&&a(h.container),l=h.value,m=[],n=[];try{if(!j.length)throw{name:"Контейнер не найден"};if($productInputs=j.find('input[data-type="product"]:checked'),!$productInputs.length)throw{name:"Товары не выбраны",code:"empty-product"};$productInputs.each(function(b,c){e=a(c).data("product"),m.push(e.barcode),n.push(e.name)}),l.productUis=m.join(","),l.countMessage=m.length+" "+ENTER.utils.numberChoice(m.length,["товаром","товарами","товарами"]),l.productNames=n.join(", "),f="http://www.enter.ru/products/set/"+m.join(","),l.twitter={url:ENTER.utils.shareLink.twitter(f,"")},l.facebook={url:ENTER.utils.shareLink.facebook(f,"")},l.vkontakte={url:ENTER.utils.shareLink.vkontakte(f,"")},l.googleplus={url:ENTER.utils.shareLink.googleplus(f,"")},l.odnoklassniki={url:ENTER.utils.shareLink.odnoklassniki(f,"")},l.mailru={url:ENTER.utils.shareLink.mailru(f,"")},l.mail={url:ENTER.utils.shareLink.mail(f,"","","")},b=a(Mustache.render(i.html(),l)).appendTo(c),k("#"+b.attr("id"))}catch(o){"empty-product"===o.code&&(b=a(Mustache.render(d.html(),{message:{title:o.name}})).appendTo(c),k("#"+b.attr("id")))}}),b.on("click",".js-shareLink",function(b){var c=a(this),d=c.attr("href");0===d.indexOf("http")&&(b.stopPropagation(),window.open(d,"","toolbar=0,status=0,width=626,height=436"),b.preventDefault())})}(jQuery),function(a){var b=a(document.body);b.on("click",".personalTable_cell_rowspan",function(){var b=a(this).find(".textCorner"),c=a(this).data("value"),d=a(".personalTable_rowgroup_"+c);d.toggle(),b.hasClass("textCorner-open")?b.removeClass("textCorner-open"):b.addClass("textCorner-open")}),b.on("click",".js-orderContainer-link",function(){var b=a(this),c=b.data("relation"),d=c.container&&a(c.container);try{if(!d.length)throw{message:"Не найден контейнер"};d.toggleClass("expanded")}catch(e){}}),a(".textCorner.mOldYear").removeClass("textCorner-open"),a(".personalTable_rowgroup.mOldYear").hide()}(jQuery);