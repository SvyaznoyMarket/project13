!function(a,b,c,d){function e(b,c){this.element=b,this.$form=a(b),this.$uploaders=a("input[type=file]",this.element),this.files={},this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="fileUpload",g={uploadData:{},submitData:{},uploadOptions:{},submitOptions:{},before:function(){},beforeSubmit:function(){return!0},success:function(){},error:function(){},complete:function(){}};e.prototype={init:function(){this.$uploaders.on("change",{context:this},this.processFiles),this.$form.on("submit",{context:this},this.uploadFiles)},processFiles:function(b){var c=b.data.context;c.files[a(b.target).attr("name")]=b.target.files},uploadFiles:function(b){b.stopPropagation(),b.preventDefault();var c=b.data.context;c.settings.before();var d=new FormData;d.append("file_upload_incoming","1"),a.each(c.files,function(b,c){a.each(c,function(a,b){d.append(a,b)})}),a.each(c.settings.uploadData,function(a,b){d.append(a,b)}),a.ajax(a.extend({},{url:c.$form.attr("action"),type:"POST",data:d,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a,d,e){c.processSubmit(b,a)},error:function(a,b,d){c.settings.error(a,b,d)}},c.settings.uploadOptions))},processSubmit:function(b,c){var d=b.data.context;if(d.settings.beforeSubmit(c)){var e=d.$form.serializeArray();a.each(c,function(a,b){e.push({name:a,value:b})}),a.each(d.settings.submitData,function(a,b){e.push({name:a,value:b})}),a.ajax(a.extend({},{url:d.$form.attr("action"),type:"POST",data:e,cache:!1,dataType:"json",success:function(a,b,c){d.settings.success(a,b,c)},error:function(a,b,c){d.settings.error(a,b,c)},complete:function(a,b){d.settings.complete(a,b)}},d.settings.submitOptions))}}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document),+function(a){var b,c=a(".jsSupplierLoginButton"),d=a("#auth-block"),e=d.find(".jsAuthFormLoginTitle"),f="supplier-login",g="error",h=a("#b2bRegisterForm"),i=h.find("input"),j=h.find("[name=detail\\[name\\]]"),k=h.find("[name=first_name]"),l=h.find("[name=email]"),m=h.find("[name=mobile]"),n=h.find("[name=agree]");a.mask.placeholder=" ",m.mask("8 999 999 99 99"),b=function(){return i.removeClass(g),n.next().removeClass("red"),""==j.val()&&j.addClass(g),""==k.val()&&k.addClass(g),ENTER.utils.validateEmail(l.val())||l.addClass(g),""==m.val()&&m.addClass(g),n.is(":checked")||n.next().addClass("red"),0==h.find("input.error").length&&n.is(":checked")},c.on("click",function(){d.addClass(f),e.text("Вход в Enter B2B"),d.lightbox_me({centered:!0,onClose:function(){d.removeClass(f),e.text("Вход в Enter")}})}),h.on("submit",function(f){f.preventDefault(),b()&&a.ajax(h.attr("action"),{type:"POST",data:h.serialize(),success:function(b){b.success&&(c.click(),d.find("[name=signin\\[username\\]]").val(h.find("[name=email]").val()),a('<div style="font-weight: bold; margin: 10px 0; color: gray" />').text("Пароль выслан на телефон и email").insertAfter(e)),("Некорректный email"==b.error||"Такой email уже занят"==b.error)&&h.find("[name=email]").addClass(g),('"Должен быть мобильный номер телефона"'==b.error||"Такой номер уже занят"==b.error)&&h.find("[name=mobile]").addClass(g)},error:function(){}})})}(jQuery),+function(a){var b,c=a("#priceForm"),d=a("#detailsForm"),e=a("#priceInput"),f=a("#priceButton"),g=a(".jsEditDetails"),h=a(".jsFillFormSpan"),i="error",j=a("[name=detail\\[name\\]]"),k=a("[name=detail\\[name_full\\]]"),l=a("[name=detail\\[legal_address\\]]"),m=a("[name=detail\\[real_address\\]]"),n=a("[name=detail\\[inn\\]]"),o=a("[name=detail\\[kpp\\]]"),p=a("[name=detail\\[account\\]]"),q=a("[name=detail\\[korr_account\\]]"),r=a("[name=detail\\[bik\\]]"),s=a("[name=detail\\[okpo\\]]");/supplier\/cabinet/.test(window.location.href)&&(b=function(){var b;return d.find("input").removeClass(i),a.each([j,k,l,m,n,o,p,q,r,s],function(a,b){""==b.val()&&b.addClass(i)}),b=d.find("input."+i).length>0,b?h.show():h.hide(),b},a.mask.placeholder=" ",a.each([n,o,p,q,r,s],function(a,b){b.mask(b.data("mask")+"")}),c.fileUpload({beforeSubmit:function(b){return b.success&&b.html&&(a(".jsPricesDiv").show(),a(".jsPricesList").prepend(b.html)),!0},success:function(a){}}),f.on("click",function(a){a.preventDefault(),e.click()}),e.on("change",function(){c.submit()}),d.on("submit",function(c){c.preventDefault(),a.ajax(d.attr("action"),{type:"POST",data:d.serialize(),success:function(c){b(),c.success&&a(".jsAddressSaved").fadeIn().delay(1e3).fadeOut()},error:function(){}})}),g.on("click",function(a){a.preventDefault(),d.show()}),b())}(jQuery);