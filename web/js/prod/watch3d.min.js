function likemovie(t,e,o,n){if(this.mvblock=$(t),!this.mvblock.length)return!1;if(!o||40!=o.length||n&&40!=n.length)return!1;var e=e?e:{},i=o,s=n,r=this,a=null,l=null,c=null;this.completenessIntrvl=600,this.rollingIntrvl=400;var m=[500,1200,2500];this.initres=m[0];var h=[1,11,21,31],u=h;this.howmany=40,this.zoom=1,this.imgzoom=0,this.mode="slow";var d=null,p=null,f=null,g=null,v=null,b=[[110,28],[121,28],[132,27],[143,26],[154,25],[165,24],[176,23],[187,21],[198,19],[209,16],[220,13],[209,10],[198,7],[187,6],[176,5],[165,4],[154,3],[143,2],[132,1],[121,0],[110,0],[99,0],[88,1],[77,2],[66,3],[55,4],[44,5],[33,6],[22,7],[11,10],[0,13],[11,16],[22,19],[33,21],[44,23],[55,24],[66,25],[77,26],[88,27],[99,28]],w=0,z=1,I=1,y=!1,k=!1;n||(k=!0);var x=0,M="roll",R=0,D=0,L={x:0,y:0},E=null,X=!0,T=!1;this.prefx="ib";for(var S=[],C=0,Y=0;r.howmany>Y;Y++)S[Y]=0;this.api=function(){e.zoomer&&(f=$(e.zoomer)),p=new loadbar,p.create(e.loadbar?e.loadbar:0),this.makeLite(),e.rollindex&&(v=$(e.rollindex)),this.toggle()},this.toggle=function(){if(!e.propriate)return!1;for(var t in e.propriate)X?$(e.propriate[t]).show():$(e.propriate[t]).hide();X=!X},this.hideVersions=function(){e&&e.makeLite&&$(e.makeLite).hide(),e&&e.makeFull&&$(e.makeFull).hide()},this.makeLite=function(){var t=null;e&&e.makeLite?t=$(e.makeLite):(t=$("<div>").attr("id","ml").html("make lite").appendTo("body"),e.makeLite="#ml"),t.css("cursor","pointer").bind({click:function(){r.turnVersion(),t.hide(),r.makeFull()}})},this.makeFull=function(){var t=null;e&&e.makeFull?t=$(e.makeFull):(t=$("<div>").attr("id","mf").html("make full").appendTo("body"),e.makeFull="#mf"),t.css("cursor","pointer").show().bind({click:function(){r.turnVersion(),t.hide()}})},this.rollshift=function(t){t=0>t-5?34+t:t-5,v.css("left",b[t][0]).css("top",b[t][1])},this.manualRollEnable=function(){v.bind({mousedown:function(t){t.preventDefault(),r.stopRolling(),T=!0,t.pageX,v.offset().left}}),$(document).mousemove(function(t){if(T){var e=11,o=t.pageX,n=t.pageY,i=v.offset();Math.abs(i.left-o)>e&&(mouseIsLeft=i.left>o?!0:!1,mouseIsTop=i.top>n?!0:!1,r.howmany/4>z-1-5||z-1-5>=3*(r.howmany/4)?z-1-5==3*(r.howmany/4)?(mouseIsLeft||mouseIsTop||r.nextSrc(1),!mouseIsLeft&&mouseIsTop&&r.nextSrc(-1)):mouseIsLeft?r.nextSrc(-1):r.nextSrc(1):z-1-5==r.howmany/4?(mouseIsLeft&&mouseIsTop&&r.nextSrc(1),mouseIsLeft&&!mouseIsTop&&r.nextSrc(-1)):mouseIsLeft?r.nextSrc(1):r.nextSrc(-1))}}),$(document).mouseup(function(){T=!1})},this.breakPreload=function(){if(clearInterval(l),k)for(var t=0;r.howmany>t;t++)1===S[t]&&(S[t]=0);for(var e=u.length;e>0;e--)document.getElementById(r.prefx+u[e-1])&&(document.getElementById(r.prefx+u[e-1]).complete||$("#"+r.prefx+u[e-1]).remove());r.prefx=k?"is":"ib"},this.preloadImages=function(t){if(!k&&$("#"+r.prefx+"1").length){t=[];for(var e=0;r.howmany>e,5>t.length;e++)2!=S[e]&&t.push(e+1)}for(var o=k?i:s,n=$("<div>"),a=0;t.length>a;a++)$("<img>").attr("src",o[t[a]-1]).attr("id",r.prefx+t[a]).appendTo(n).bind("load",function(){r.preloadOnebyone($(this).attr("id").replace(/\D/g,""))});k?$("#nvis500").append(n):$("#nvis").append(n)},this.preloadOnebyone=function(t){if(k||X)return!1;S[t-1]=2;for(var e=0,o=0;r.howmany>o;o++)2==S[o]&&e++;if(p.update(100*(e/r.howmany)),e==r.howmany){for(var n=0;r.howmany>n;n++)h[n]=n+1;return r.hideVersions(),r.manualRollEnable(),r.stop4slides(),r.createFrontier(),r.mode="medium",r.startRolling(70),void 0}C=99;for(var n=t;r.howmany+1*t>n;n++)if(!S[n%r.howmany]){C=n%r.howmany;break}99>C&&(S[C]=1,$("<img>").attr("src",s[C]).attr("id",r.prefx+(1*C+1)).appendTo($("#nvis")).bind("load",function(){r.preloadOnebyone($(this).attr("id").replace(/\D/g,""))}))},this.checkComplete=function(){for(var t=0,e=0;u.length>e;e++)document.getElementById(r.prefx+u[e]).complete&&t++;k&&p.update(100*((h.length-u.length+t)/r.howmany)),t==u.length&&(k?r.nextLoad():(clearInterval(l),r.show4slides()))},this.nextLoad=function(){if(h.length==this.howmany)return clearInterval(l),this.hideVersions(),this.manualRollEnable(),this.speedupRolling(70),void 0;switch(h.length){case 4:this.startRolling(),u=[6,16,26,36];break;case 8:u=[3,9,13,19,23,29,33,39];break;case 16:u=[4,8,14,18,24,28,34,38];break;case 24:u=[2,10,12,20,22,30,32,40];break;case 32:u=[5,7,15,17,25,27,35,37]}this.preloadImages(u),h=h.concat(u),h.sort(function(t,e){return t-e})},this.turnVersion=function(){k=!k,p.update(0),k?(this.stop4slides(),this.breakPreload(),this.preloadImages(u),this.createFrontier(),g.setDimensionProps(m[0]),this.zoom=1,g.zoom=1,g.noZoom(),g.addDrag(),l=setInterval(r.checkComplete,r.completenessIntrvl),h.length>4&&this.startRolling()):(this.stopRolling(),d.hide(),this.breakPreload(),u=[1,11,21,31],this.preloadImages(u),l=setInterval(r.checkComplete,r.completenessIntrvl),this.getInitSize(),g.setDimensionProps(m[this.zoom-1]),g.zoom=this.zoom,g.addZoom(L),g.addDrag())},this.startRolling=function(t){y=!0,t&&(r.rollingIntrvl=t),a=setInterval(function(){r.nextSrc(1)},r.rollingIntrvl)},this.stopRolling=function(){y=!1,clearInterval(a)},this.speedupRolling=function(t){r.rollingIntrvl=t,y&&(clearInterval(a),a=setInterval(function(){r.nextSrc(1)},r.rollingIntrvl))},this.nextSrc=function(t){switch(r.mode){case"medium":t:for(var e=0;h.length>e;e++)if(h[e]==z){z=!e&&0>t?h[h.length-1]:h[(e+1*t)%h.length];break t}break;case"slow":31==z&&h.length>4?r.mode="medium":z=(z+10)%this.howmany}if(cnvCompatible&&!k)d.attr("ref",z),E.clearRect(0,0,2500,2500),E.drawImage(document.getElementById(r.prefx+z),L.x,L.y,m[g.zoom-1],m[g.zoom-1]);else{var o=k?i:s;r.mvblock.hide(),d.attr("src",o[z-1]),r.mvblock.show()}r.rollshift(z-1)},this.show4slides=function(){for(var t=!0;t;)I=(I+10)%r.howmany,document.getElementById(r.prefx+I).complete&&(t=!1);d.fadeOut(1e3),setTimeout(function(){d.attr("src",s[I-1])},1e3),d.fadeIn(1e3),c=setTimeout(r.show4slides,3e3)},this.stop4slides=function(){c&&clearTimeout(c)},this.start=function(){R=r.mvblock.innerWidth(),D=r.mvblock.innerHeight(),$("<div>").hide().attr("id","nvis500").appendTo("body"),$("<div>").hide().attr("id","nvis").appendTo("body"),this.preloadImages(h),l=setInterval(r.checkComplete,r.completenessIntrvl),r.api(),this.initres=this.getInitSize();var t=k?i[0]:s[0];d=$("<img>").attr({src:t,width:r.initres,height:r.initres}).attr("id","ivn").css({position:"relative",left:Math.round((r.mvblock.innerWidth()-r.initres)/2),top:Math.round((r.mvblock.innerHeight()-r.initres)/2)}),d.appendTo(r.mvblock),k&&($(e.makeLite).hide(),d.bind({mousedown:function(t){w=t.pageX},click:function(){r.stopRolling()},dblclick:function(){r.startRolling()}}),g=new gigaimage(d,r.zoom,f,r.rollanddrop))},this.createFrontier=function(){!cnvCompatible||k?(this.mvblock.off(".cnve"),d.bind({mousedown:function(t){w=t.pageX},click:function(){r.stopRolling()},dblclick:function(){r.startRolling()}}),this.mvblock.css("text-align","left"),g=new gigaimage(d,r.zoom,f,r.rollanddrop),g.addZoom(),$(window).resize(function(){1==r.zoom&&d.css("left",Math.round((r.mvblock.innerWidth()-r.initres)/2)).css("top",Math.round((r.mvblock.innerHeight()-r.initres)/2))})):($("#ivn").remove(),g&&g.destroy(),d=$("<canvas>").attr({id:"ivn",width:R,height:D}),d.appendTo(this.mvblock),E=document.getElementById("ivn").getContext("2d"),E.drawImage(document.getElementById(r.prefx+"1"),Math.round((R-r.initres)/2),Math.round((D-r.initres)/2),r.initres,r.initres),L={x:Math.round((R-r.initres)/2),y:Math.round((D-r.initres)/2)},this.mvblock.live({"mousedown.cnve":function(t){w=t.pageX},"click.cnve":function(){r.stopRolling()},"dblclick.cnve":function(){r.startRolling()}}),g=new gigaimage(d,r.zoom,f,r.rollanddrop),g.addZoom(L),$(window).resize(function(){document.getElementById("ivn").width=r.mvblock.innerWidth(),document.getElementById("ivn").height=r.mvblock.innerHeight()}))},this.hide=function(){$(d).hide(),h.length!=this.howmany&&this.breakPreload(),k||h.length==this.howmany?this.stopRolling():this.stop4slides(),this.toggle()},this.show=function(){$(d).show(),k&&g.addZoom(L),g.addDrag(),h.length!=this.howmany&&(this.preloadImages(u),k&&(l=setInterval(r.checkComplete,r.completenessIntrvl))),k||h.length==this.howmany?this.startRolling():this.show4slides(),this.toggle()},this.rollanddrop=function(t,e,o){x!=o&&(x=o,M=Math.abs(e.x)>Math.abs(e.y)?"roll":"drop");var n;if("roll"==M&&Math.abs(t.pageX-w)>20*g.zoom)n=t.pageX-w>0?1:-1,w=t.pageX,r.nextSrc(n);else if("drop"==M)if(!cnvCompatible||k){var i={y:parseInt(d.css("top"),10)};d.css("top",e.y+i.y)}else L.y+=e.y,E.clearRect(0,0,2500,2500),E.drawImage(document.getElementById(r.prefx+z),L.x,L.y,m[g.zoom-1],m[g.zoom-1])},this.getInitSize=function(){if(k)this.zoom=1;else{var t=$(window).width();this.zoom=1030>t?1:1590>t?2:3}return this.imgzoom=m[this.zoom-1],this.imgzoom}}function gigaimage(t,e,o,n){var i=this,s=t,r="CANVAS"==s[0].tagName,a=!1,l=[500,1200,2500],c=0,m=null;if(this.zoom=e,o&&(m=new zoomer(o,i)),cnvCompatible&&r)var h=document.getElementById(s.attr("id")).getContext("2d");this.cursorHand=function(){s.css("cursor","url(/css/skin/cursor/cursor_1.png), url(/css/skin/cursor/cursor_1.gif), url(/css/skin/cursor/cursor_ie_1.cur), crosshair")},i.cursorHand(),this.cursorDrag=function(){s.css("cursor","url(/css/skin/cursor/cursor_2.png), url(/css/skin/cursor/cursor_2.gif), url(/css/skin/cursor/cursor_ie_2.cur), move")},this.setDimensionProps=function(t){var e=s.parent(),o=t?t:l[i.zoom-1];s.attr("width",o).attr("height",o).css("left",(e.width()-o)/2).css("top",(e.height()-o)/2)},cnvCompatible&&r||this.setDimensionProps(),this.zoomIn=function(){var t=s.parent(),e=t.offset();this.fixzoom(1,Math.round(t.width()/2)+e.left,Math.round($("#bigpopup").height()/2)+e.top)},this.zoomOut=function(){var t=s.parent(),e=t.offset();this.fixzoom(-1,Math.round(t.width()/2)+e.left,Math.round($("#bigpopup").height()/2)+e.top)},s.parent(),this.fixzoom=function(t,e,o){var n=this.zoom;if(!(1==i.zoom&&0>t||3==i.zoom&&t>0)){t>0?i.zoom++:i.zoom--,t/=Math.abs(t);var a=l[i.zoom-1]/l[n-1];if(cnvCompatible&&r){var c=s.parent().offset();e-=c.left+cnvimg.x,o-=c.top+cnvimg.y,cnvimg.x-=t*Math.abs(Math.round(e*(1-a))),cnvimg.y-=t*Math.abs(Math.round(o*(1-a)));var u=s.attr("ref");h.clearRect(0,0,2500,2500),h.drawImage(document.getElementById(lkmv.prefx+u),cnvimg.x,cnvimg.y,l[i.zoom-1],l[i.zoom-1])}else{var c=s.parent().offset(),d={x:parseInt(s.css("left"),10),y:parseInt(s.css("top"),10)};e-=c.left+d.x,o-=c.top+d.y,d.x-=t*Math.abs(Math.round(e*(1-a))),d.y-=t*Math.abs(Math.round(o*(1-a))),s.attr("width",l[i.zoom-1]).attr("height",l[i.zoom-1]).css({left:d.x,top:d.y})}m&&(t>0?m.plus():m.minus())}},this.addZoom=function(t){cnvimg=t,s.bind({mousewheel:function(t,e){t.preventDefault(),i.fixzoom(e,t.pageX,t.pageY)}}),m.show()},this.noZoom=function(){s.unbind("mousewheel"),m.hide()},this.addDrag=function(){function t(t){init={pageX:t.pageX,pageY:t.pageY},c=t.timeStamp,a=!0,i.cursorDrag()}s.bind({mousedown:function(e){e.preventDefault(),t(e)}}),window.addEventListener!==void 0&&(s[0].addEventListener("touchstart",function(e){e.preventDefault(),t(e)},!1),s[0].addEventListener("touchmove",function(t){if(a){t.preventDefault();var e={x:t.pageX-init.pageX,y:t.pageY-init.pageY};i.action(t,e,c,i.zoom),init.pageX=t.pageX,init.pageY=t.pageY}},!1),s[0].addEventListener("touchend",function(){a=!1,i.cursorHand()},!1))},this.addDrag(),$(document).bind("mousemove.zoomer",function(t){if(a){t.preventDefault();var e={x:t.pageX-init.pageX,y:t.pageY-init.pageY};i.action(t,e,c,i.zoom),init.pageX=t.pageX,init.pageY=t.pageY}}),$(document).bind("mouseup.zoomer",function(){a=!1,i.cursorHand()}),this.dropping=function(t,e){var o={x:parseInt(s.css("left"),10),y:parseInt(s.css("top"),10)};s.css("top",e.y+o.y).css("left",e.x+o.x)},this.action=n?n:this.dropping,this.destroy=function(){s.unbind("mousedown"),s.unbind("mousewheel"),s.unbind("touchstart"),s.unbind("touchmove"),s.unbind("touchend"),s.remove(),$(document).unbind(".zoomer");for(var t in this)delete this[t];i=null}}function loadbar(){this.percentage=0;var t="loadbar",e=null;this.create=function(o){return o?e=$(o):(e=$("<div>").attr("id",t).html("0%"),e.appendTo("body")),e},this.update=function(t){this.percentage=t?Math.round(t):0,e.html(this.percentage+"%"),100==this.percentage&&this.destroy()},this.destroy=function(){setTimeout(function(){e.fadeOut("slow")},2e3)}}function zoomer(t,e){if(!t)return!1;var o=$(".zoomind",t),n=!1,i=[54,28,-2],s=function(t){return i[2]+6>t?1:i[1]-4>t?2:i[1]+4>t?3:i[0]-6>t?4:5},r=o.parent().offset().top,a=3,l=3,c=[5,3,1];o.css("top",i[e.zoom-1]),this.hide=function(){t.hide()},this.show=function(){t.show()},$("b.plus",t).bind("click",function(){e.zoomIn&&e.zoomIn()}),$("b.minus",t).bind("click",function(){e.zoomOut&&e.zoomOut()}),o.bind({mousedown:function(t){n=!0,t.preventDefault(),t.stopPropagation()},mouseup:function(){n=!1}}),$("b.zoomind",t).parent().bind({mousemove:function(t){if(n){t.preventDefault(),t.stopPropagation();var i=t.pageY-r-3;if(55>i&&i>-3){o.css("top",i);var c=a-s(i);Math.abs(c)&&s(i)!=l&&s(i)%2&&(0>s(i)-l?e.zoomIn():e.zoomOut(),l=s(i)),2==Math.abs(c)?(0>c?e.zoomIn():e.zoomOut(),l=s(i)):Math.abs(c)>=3&&(0>c?(e.zoomIn(),e.zoomIn()):(e.zoomOut(),e.zoomOut()),l=s(i)),a=s(i)}}},mouseleave:function(){}}),this.minus=function(){n||(o.css("top",i[e.zoom-1]),l=c[e.zoom-1],a=c[e.zoom-1])},this.plus=function(){n||(o.css("top",i[e.zoom-1]),l=c[e.zoom-1],a=c[e.zoom-1])}}var cnvCompatible=document.createElement("canvas").getContext;