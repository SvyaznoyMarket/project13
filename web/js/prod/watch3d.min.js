function likemovie(e,t,r,i){if(this.mvblock=$(e),!this.mvblock.length)return!1;if(!r||40!=r.length||i&&40!=i.length)return!1;var t=t?t:{},n=r,o=i,a=this,s=null,l=null,c=null;this.completenessIntrvl=600,this.rollingIntrvl=400;var u=[500,1200,2500];this.initres=u[0];var d=[1,11,21,31],h=d;this.howmany=40,this.zoom=1,this.imgzoom=0,this.mode="slow";var p=null,f=null,m=null,v=null,g=null,_=[[110,28],[121,28],[132,27],[143,26],[154,25],[165,24],[176,23],[187,21],[198,19],[209,16],[220,13],[209,10],[198,7],[187,6],[176,5],[165,4],[154,3],[143,2],[132,1],[121,0],[110,0],[99,0],[88,1],[77,2],[66,3],[55,4],[44,5],[33,6],[22,7],[11,10],[0,13],[11,16],[22,19],[33,21],[44,23],[55,24],[66,25],[77,26],[88,27],[99,28]],E=0,y=1,b=1,T=!1,w=!1;i||(w=!0);var x=0,R="roll",S=0,M=0,H={x:0,y:0},C=null,A=!0,k=!1;this.prefx="ib";for(var D=[],P=0,F=0;a.howmany>F;F++)D[F]=0;this.api=function(){t.zoomer&&(m=$(t.zoomer)),f=new loadbar,f.create(t.loadbar?t.loadbar:0),this.makeLite(),t.rollindex&&(g=$(t.rollindex)),this.toggle()},this.toggle=function(){if(!t.propriate)return!1;for(var e in t.propriate)A?$(t.propriate[e]).show():$(t.propriate[e]).hide();A=!A},this.hideVersions=function(){t&&t.makeLite&&$(t.makeLite).hide(),t&&t.makeFull&&$(t.makeFull).hide()},this.makeLite=function(){var e=null;t&&t.makeLite?e=$(t.makeLite):(e=$("<div>").attr("id","ml").html("make lite").appendTo("body"),t.makeLite="#ml"),e.css("cursor","pointer").bind({click:function(){a.turnVersion(),e.hide(),a.makeFull()}})},this.makeFull=function(){var e=null;t&&t.makeFull?e=$(t.makeFull):(e=$("<div>").attr("id","mf").html("make full").appendTo("body"),t.makeFull="#mf"),e.css("cursor","pointer").show().bind({click:function(){a.turnVersion(),e.hide()}})},this.rollshift=function(e){e=0>e-5?34+e:e-5,g.css("left",_[e][0]).css("top",_[e][1])},this.manualRollEnable=function(){g.bind({mousedown:function(e){e.preventDefault(),a.stopRolling(),k=!0,e.pageX,g.offset().left}}),$(document).mousemove(function(e){if(k){var t=11,r=e.pageX,i=e.pageY,n=g.offset();Math.abs(n.left-r)>t&&(mouseIsLeft=n.left>r?!0:!1,mouseIsTop=n.top>i?!0:!1,a.howmany/4>y-1-5||y-1-5>=3*(a.howmany/4)?y-1-5==3*(a.howmany/4)?(mouseIsLeft||mouseIsTop||a.nextSrc(1),!mouseIsLeft&&mouseIsTop&&a.nextSrc(-1)):mouseIsLeft?a.nextSrc(-1):a.nextSrc(1):y-1-5==a.howmany/4?(mouseIsLeft&&mouseIsTop&&a.nextSrc(1),mouseIsLeft&&!mouseIsTop&&a.nextSrc(-1)):mouseIsLeft?a.nextSrc(1):a.nextSrc(-1))}}),$(document).mouseup(function(){k=!1})},this.breakPreload=function(){if(clearInterval(l),w)for(var e=0;a.howmany>e;e++)1===D[e]&&(D[e]=0);for(var t=h.length;t>0;t--)document.getElementById(a.prefx+h[t-1])&&(document.getElementById(a.prefx+h[t-1]).complete||$("#"+a.prefx+h[t-1]).remove());a.prefx=w?"is":"ib"},this.preloadImages=function(e){if(!w&&$("#"+a.prefx+"1").length){e=[];for(var t=0;a.howmany>t,5>e.length;t++)2!=D[t]&&e.push(t+1)}for(var r=w?n:o,i=$("<div>"),s=0;e.length>s;s++)$("<img>").attr("src",r[e[s]-1]).attr("id",a.prefx+e[s]).appendTo(i).bind("load",function(){a.preloadOnebyone($(this).attr("id").replace(/\D/g,""))});w?$("#nvis500").append(i):$("#nvis").append(i)},this.preloadOnebyone=function(e){if(w||A)return!1;D[e-1]=2;for(var t=0,r=0;a.howmany>r;r++)2==D[r]&&t++;if(f.update(100*(t/a.howmany)),t==a.howmany){for(var i=0;a.howmany>i;i++)d[i]=i+1;return a.hideVersions(),a.manualRollEnable(),a.stop4slides(),a.createFrontier(),a.mode="medium",a.startRolling(70),void 0}P=99;for(var i=e;a.howmany+1*e>i;i++)if(!D[i%a.howmany]){P=i%a.howmany;break}99>P&&(D[P]=1,$("<img>").attr("src",o[P]).attr("id",a.prefx+(1*P+1)).appendTo($("#nvis")).bind("load",function(){a.preloadOnebyone($(this).attr("id").replace(/\D/g,""))}))},this.checkComplete=function(){for(var e=0,t=0;h.length>t;t++)document.getElementById(a.prefx+h[t]).complete&&e++;w&&f.update(100*((d.length-h.length+e)/a.howmany)),e==h.length&&(w?a.nextLoad():(clearInterval(l),a.show4slides()))},this.nextLoad=function(){if(d.length==this.howmany)return clearInterval(l),this.hideVersions(),this.manualRollEnable(),this.speedupRolling(70),void 0;switch(d.length){case 4:this.startRolling(),h=[6,16,26,36];break;case 8:h=[3,9,13,19,23,29,33,39];break;case 16:h=[4,8,14,18,24,28,34,38];break;case 24:h=[2,10,12,20,22,30,32,40];break;case 32:h=[5,7,15,17,25,27,35,37]}this.preloadImages(h),d=d.concat(h),d.sort(function(e,t){return e-t})},this.turnVersion=function(){w=!w,f.update(0),w?(this.stop4slides(),this.breakPreload(),this.preloadImages(h),this.createFrontier(),v.setDimensionProps(u[0]),this.zoom=1,v.zoom=1,v.noZoom(),v.addDrag(),l=setInterval(a.checkComplete,a.completenessIntrvl),d.length>4&&this.startRolling()):(this.stopRolling(),p.hide(),this.breakPreload(),h=[1,11,21,31],this.preloadImages(h),l=setInterval(a.checkComplete,a.completenessIntrvl),this.getInitSize(),v.setDimensionProps(u[this.zoom-1]),v.zoom=this.zoom,v.addZoom(H),v.addDrag())},this.startRolling=function(e){T=!0,e&&(a.rollingIntrvl=e),s=setInterval(function(){a.nextSrc(1)},a.rollingIntrvl)},this.stopRolling=function(){T=!1,clearInterval(s)},this.speedupRolling=function(e){a.rollingIntrvl=e,T&&(clearInterval(s),s=setInterval(function(){a.nextSrc(1)},a.rollingIntrvl))},this.nextSrc=function(e){switch(a.mode){case"medium":e:for(var t=0;d.length>t;t++)if(d[t]==y){y=!t&&0>e?d[d.length-1]:d[(t+1*e)%d.length];break e}break;case"slow":31==y&&d.length>4?a.mode="medium":y=(y+10)%this.howmany}if(cnvCompatible&&!w)p.attr("ref",y),C.clearRect(0,0,2500,2500),C.drawImage(document.getElementById(a.prefx+y),H.x,H.y,u[v.zoom-1],u[v.zoom-1]);else{var r=w?n:o;a.mvblock.hide(),p.attr("src",r[y-1]),a.mvblock.show()}a.rollshift(y-1)},this.show4slides=function(){for(var e=!0;e;)b=(b+10)%a.howmany,document.getElementById(a.prefx+b).complete&&(e=!1);p.fadeOut(1e3),setTimeout(function(){p.attr("src",o[b-1])},1e3),p.fadeIn(1e3),c=setTimeout(a.show4slides,3e3)},this.stop4slides=function(){c&&clearTimeout(c)},this.start=function(){S=a.mvblock.innerWidth(),M=a.mvblock.innerHeight(),$("<div>").hide().attr("id","nvis500").appendTo("body"),$("<div>").hide().attr("id","nvis").appendTo("body"),this.preloadImages(d),l=setInterval(a.checkComplete,a.completenessIntrvl),a.api(),this.initres=this.getInitSize();var e=w?n[0]:o[0];p=$("<img>").attr({src:e,width:a.initres,height:a.initres}).attr("id","ivn").css({position:"relative",left:Math.round((a.mvblock.innerWidth()-a.initres)/2),top:Math.round((a.mvblock.innerHeight()-a.initres)/2)}),p.appendTo(a.mvblock),w&&($(t.makeLite).hide(),p.bind({mousedown:function(e){E=e.pageX},click:function(){a.stopRolling()},dblclick:function(){a.startRolling()}}),v=new gigaimage(p,a.zoom,m,a.rollanddrop))},this.createFrontier=function(){!cnvCompatible||w?(this.mvblock.off(".cnve"),p.bind({mousedown:function(e){E=e.pageX},click:function(){a.stopRolling()},dblclick:function(){a.startRolling()}}),this.mvblock.css("text-align","left"),v=new gigaimage(p,a.zoom,m,a.rollanddrop),v.addZoom(),$(window).resize(function(){1==a.zoom&&p.css("left",Math.round((a.mvblock.innerWidth()-a.initres)/2)).css("top",Math.round((a.mvblock.innerHeight()-a.initres)/2))})):($("#ivn").remove(),v&&v.destroy(),p=$("<canvas>").attr({id:"ivn",width:S,height:M}),p.appendTo(this.mvblock),C=document.getElementById("ivn").getContext("2d"),C.drawImage(document.getElementById(a.prefx+"1"),Math.round((S-a.initres)/2),Math.round((M-a.initres)/2),a.initres,a.initres),H={x:Math.round((S-a.initres)/2),y:Math.round((M-a.initres)/2)},this.mvblock.live({"mousedown.cnve":function(e){E=e.pageX},"click.cnve":function(){a.stopRolling()},"dblclick.cnve":function(){a.startRolling()}}),v=new gigaimage(p,a.zoom,m,a.rollanddrop),v.addZoom(H),$(window).resize(function(){document.getElementById("ivn").width=a.mvblock.innerWidth(),document.getElementById("ivn").height=a.mvblock.innerHeight()}))},this.hide=function(){$(p).hide(),d.length!=this.howmany&&this.breakPreload(),w||d.length==this.howmany?this.stopRolling():this.stop4slides(),this.toggle()},this.show=function(){$(p).show(),w&&v.addZoom(H),v.addDrag(),d.length!=this.howmany&&(this.preloadImages(h),w&&(l=setInterval(a.checkComplete,a.completenessIntrvl))),w||d.length==this.howmany?this.startRolling():this.show4slides(),this.toggle()},this.rollanddrop=function(e,t,r){x!=r&&(x=r,R=Math.abs(t.x)>Math.abs(t.y)?"roll":"drop");var i;if("roll"==R&&Math.abs(e.pageX-E)>20*v.zoom)i=e.pageX-E>0?1:-1,E=e.pageX,a.nextSrc(i);else if("drop"==R)if(!cnvCompatible||w){var n={y:parseInt(p.css("top"),10)};p.css("top",t.y+n.y)}else H.y+=t.y,C.clearRect(0,0,2500,2500),C.drawImage(document.getElementById(a.prefx+y),H.x,H.y,u[v.zoom-1],u[v.zoom-1])},this.getInitSize=function(){if(w)this.zoom=1;else{var e=$(window).width();this.zoom=1030>e?1:1590>e?2:3}return this.imgzoom=u[this.zoom-1],this.imgzoom}}function gigaimage(e,t,r,i){var n=this,o=e,a="CANVAS"==o[0].tagName,s=!1,l=[500,1200,2500],c=0,u=null;if(this.zoom=t,r&&(u=new zoomer(r,n)),cnvCompatible&&a)var d=document.getElementById(o.attr("id")).getContext("2d");this.cursorHand=function(){o.css("cursor","url(/css/skin/cursor/cursor_1.png), url(/css/skin/cursor/cursor_1.gif), url(/css/skin/cursor/cursor_ie_1.cur), crosshair")},n.cursorHand(),this.cursorDrag=function(){o.css("cursor","url(/css/skin/cursor/cursor_2.png), url(/css/skin/cursor/cursor_2.gif), url(/css/skin/cursor/cursor_ie_2.cur), move")},this.setDimensionProps=function(e){var t=o.parent(),r=e?e:l[n.zoom-1];o.attr("width",r).attr("height",r).css("left",(t.width()-r)/2).css("top",(t.height()-r)/2)},cnvCompatible&&a||this.setDimensionProps(),this.zoomIn=function(){var e=o.parent(),t=e.offset();this.fixzoom(1,Math.round(e.width()/2)+t.left,Math.round($("#bigpopup").height()/2)+t.top)},this.zoomOut=function(){var e=o.parent(),t=e.offset();this.fixzoom(-1,Math.round(e.width()/2)+t.left,Math.round($("#bigpopup").height()/2)+t.top)},o.parent(),this.fixzoom=function(e,t,r){var i=this.zoom;if(!(1==n.zoom&&0>e||3==n.zoom&&e>0)){e>0?n.zoom++:n.zoom--,e/=Math.abs(e);var s=l[n.zoom-1]/l[i-1];if(cnvCompatible&&a){var c=o.parent().offset();t-=c.left+cnvimg.x,r-=c.top+cnvimg.y,cnvimg.x-=e*Math.abs(Math.round(t*(1-s))),cnvimg.y-=e*Math.abs(Math.round(r*(1-s)));var h=o.attr("ref");d.clearRect(0,0,2500,2500),d.drawImage(document.getElementById(lkmv.prefx+h),cnvimg.x,cnvimg.y,l[n.zoom-1],l[n.zoom-1])}else{var c=o.parent().offset(),p={x:parseInt(o.css("left"),10),y:parseInt(o.css("top"),10)};t-=c.left+p.x,r-=c.top+p.y,p.x-=e*Math.abs(Math.round(t*(1-s))),p.y-=e*Math.abs(Math.round(r*(1-s))),o.attr("width",l[n.zoom-1]).attr("height",l[n.zoom-1]).css({left:p.x,top:p.y})}u&&(e>0?u.plus():u.minus())}},this.addZoom=function(e){cnvimg=e,o.bind({mousewheel:function(e,t){e.preventDefault(),n.fixzoom(t,e.pageX,e.pageY)}}),u.show()},this.noZoom=function(){o.unbind("mousewheel"),u.hide()},this.addDrag=function(){function e(e){init={pageX:e.pageX,pageY:e.pageY},c=e.timeStamp,s=!0,n.cursorDrag()}o.bind({mousedown:function(t){t.preventDefault(),e(t)}}),window.addEventListener!==void 0&&(o[0].addEventListener("touchstart",function(t){t.preventDefault(),e(t)},!1),o[0].addEventListener("touchmove",function(e){if(s){e.preventDefault();var t={x:e.pageX-init.pageX,y:e.pageY-init.pageY};n.action(e,t,c,n.zoom),init.pageX=e.pageX,init.pageY=e.pageY}},!1),o[0].addEventListener("touchend",function(){s=!1,n.cursorHand()},!1))},this.addDrag(),$(document).bind("mousemove.zoomer",function(e){if(s){e.preventDefault();var t={x:e.pageX-init.pageX,y:e.pageY-init.pageY};n.action(e,t,c,n.zoom),init.pageX=e.pageX,init.pageY=e.pageY}}),$(document).bind("mouseup.zoomer",function(){s=!1,n.cursorHand()}),this.dropping=function(e,t){var r={x:parseInt(o.css("left"),10),y:parseInt(o.css("top"),10)};o.css("top",t.y+r.y).css("left",t.x+r.x)},this.action=i?i:this.dropping,this.destroy=function(){o.unbind("mousedown"),o.unbind("mousewheel"),o.unbind("touchstart"),o.unbind("touchmove"),o.unbind("touchend"),o.remove(),$(document).unbind(".zoomer");for(var e in this)delete this[e];n=null}}function loadbar(){this.percentage=0;var e="loadbar",t=null;this.create=function(r){return r?t=$(r):(t=$("<div>").attr("id",e).html("0%"),t.appendTo("body")),t},this.update=function(e){this.percentage=e?Math.round(e):0,t.html(this.percentage+"%"),100==this.percentage&&this.destroy()},this.destroy=function(){setTimeout(function(){t.fadeOut("slow")},2e3)}}function zoomer(e,t){if(!e)return!1;var r=$(".zoomind",e),i=!1,n=[54,28,-2],o=function(e){return n[2]+6>e?1:n[1]-4>e?2:n[1]+4>e?3:n[0]-6>e?4:5},a=r.parent().offset().top,s=3,l=3,c=[5,3,1];r.css("top",n[t.zoom-1]),this.hide=function(){e.hide()},this.show=function(){e.show()},$("b.plus",e).bind("click",function(){t.zoomIn&&t.zoomIn()}),$("b.minus",e).bind("click",function(){t.zoomOut&&t.zoomOut()}),r.bind({mousedown:function(e){i=!0,e.preventDefault(),e.stopPropagation()},mouseup:function(){i=!1}}),$("b.zoomind",e).parent().bind({mousemove:function(e){if(i){e.preventDefault(),e.stopPropagation();var n=e.pageY-a-3;if(55>n&&n>-3){r.css("top",n);var c=s-o(n);Math.abs(c)&&o(n)!=l&&o(n)%2&&(0>o(n)-l?t.zoomIn():t.zoomOut(),l=o(n)),2==Math.abs(c)?(0>c?t.zoomIn():t.zoomOut(),l=o(n)):Math.abs(c)>=3&&(0>c?(t.zoomIn(),t.zoomIn()):(t.zoomOut(),t.zoomOut()),l=o(n)),s=o(n)}}},mouseleave:function(){}}),this.minus=function(){i||(r.css("top",n[t.zoom-1]),l=c[t.zoom-1],s=c[t.zoom-1])},this.plus=function(){i||(r.css("top",n[t.zoom-1]),l=c[t.zoom-1],s=c[t.zoom-1])}}var cnvCompatible=document.createElement("canvas").getContext;