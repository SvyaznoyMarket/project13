function likemovie(a,b,c,d){if(this.mvblock=$(a),!this.mvblock.length)return!1;if(!c||40!=c.length||d&&40!=d.length)return!1;var b=b?b:{},e=c,f=d,g=this,h=null,i=null,j=null;this.completenessIntrvl=600,this.rollingIntrvl=400;var k=[500,1200,2500];this.initres=k[0];var l=[1,11,21,31],m=l;this.howmany=40,this.zoom=1,this.imgzoom=0,this.mode="slow";var n=null,o=null,p=null,q=null,r=null,s=[[110,28],[121,28],[132,27],[143,26],[154,25],[165,24],[176,23],[187,21],[198,19],[209,16],[220,13],[209,10],[198,7],[187,6],[176,5],[165,4],[154,3],[143,2],[132,1],[121,0],[110,0],[99,0],[88,1],[77,2],[66,3],[55,4],[44,5],[33,6],[22,7],[11,10],[0,13],[11,16],[22,19],[33,21],[44,23],[55,24],[66,25],[77,26],[88,27],[99,28]],t=0,u=1,v=1,w=!1,x=!1;d||(x=!0);var y=0,z="roll",A=0,B=0,C={x:0,y:0},D=null,E=!0,F=!1;this.prefx="ib";for(var G=[],H=0,I=0;I<g.howmany;I++)G[I]=0;this.api=function(){b.zoomer&&(p=$(b.zoomer)),o=new loadbar,o.create(b.loadbar?b.loadbar:0),this.makeLite(),b.rollindex&&(r=$(b.rollindex)),this.toggle()},this.toggle=function(){if(!b.propriate)return!1;for(var a in b.propriate)E?$(b.propriate[a]).show():$(b.propriate[a]).hide();E=!E},this.hideVersions=function(){b&&b.makeLite&&$(b.makeLite).hide(),b&&b.makeFull&&$(b.makeFull).hide()},this.makeLite=function(){var a=null;b&&b.makeLite?a=$(b.makeLite):(a=$("<div>").attr("id","ml").html("make lite").appendTo("body"),b.makeLite="#ml"),a.css("cursor","pointer").bind({click:function(){g.turnVersion(),a.hide(),g.makeFull()}})},this.makeFull=function(){var a=null;b&&b.makeFull?a=$(b.makeFull):(a=$("<div>").attr("id","mf").html("make full").appendTo("body"),b.makeFull="#mf"),a.css("cursor","pointer").show().bind({click:function(){g.turnVersion(),a.hide()}})},this.rollshift=function(a){a=0>a-5?34+a:a-5,r.css("left",s[a][0]).css("top",s[a][1])},this.manualRollEnable=function(){r.bind({mousedown:function(a){a.preventDefault(),g.stopRolling(),F=!0;a.pageX,r.offset().left}}),$(document).mousemove(function(a){if(F){var b=11,c=a.pageX,d=a.pageY,e=r.offset();Math.abs(e.left-c)>b&&(mouseIsLeft=e.left>c?!0:!1,mouseIsTop=e.top>d?!0:!1,u-1-5<g.howmany/4||u-1-5>=g.howmany/4*3?u-1-5==g.howmany/4*3?(mouseIsLeft||mouseIsTop||g.nextSrc(1),!mouseIsLeft&&mouseIsTop&&g.nextSrc(-1)):mouseIsLeft?g.nextSrc(-1):g.nextSrc(1):u-1-5==g.howmany/4?(mouseIsLeft&&mouseIsTop&&g.nextSrc(1),mouseIsLeft&&!mouseIsTop&&g.nextSrc(-1)):mouseIsLeft?g.nextSrc(1):g.nextSrc(-1))}}),$(document).mouseup(function(a){F=!1})},this.breakPreload=function(){if(clearInterval(i),x)for(var a=0;a<g.howmany;a++)1===G[a]&&(G[a]=0);for(var b=m.length;b>0;b--)document.getElementById(g.prefx+m[b-1])&&(document.getElementById(g.prefx+m[b-1]).complete||$("#"+g.prefx+m[b-1]).remove());g.prefx=x?"is":"ib"},this.preloadImages=function(a){if(!x&&$("#"+g.prefx+"1").length){a=[];for(var b=0;b<g.howmany,a.length<5;b++)2!=G[b]&&a.push(b+1)}for(var c=x?e:f,d=$("<div>"),h=0;h<a.length;h++)$("<img>").attr("src",c[a[h]-1]).attr("id",g.prefx+a[h]).appendTo(d).bind("load",function(){g.preloadOnebyone($(this).attr("id").replace(/\D/g,""))});x?$("#nvis500").append(d):$("#nvis").append(d)},this.preloadOnebyone=function(a){if(x||E)return!1;G[a-1]=2;for(var b=0,c=0;c<g.howmany;c++)2==G[c]&&b++;if(o.update(b/g.howmany*100),b==g.howmany){for(var d=0;d<g.howmany;d++)l[d]=d+1;return g.hideVersions(),g.manualRollEnable(),g.stop4slides(),g.createFrontier(),g.mode="medium",void g.startRolling(70)}H=99;for(var d=a;d<g.howmany+1*a;d++)if(!G[d%g.howmany]){H=d%g.howmany;break}99>H&&(G[H]=1,$("<img>").attr("src",f[H]).attr("id",g.prefx+(1*H+1)).appendTo($("#nvis")).bind("load",function(){g.preloadOnebyone($(this).attr("id").replace(/\D/g,""))}))},this.checkComplete=function(){for(var a=0,b=0;b<m.length;b++)document.getElementById(g.prefx+m[b]).complete&&a++;x&&o.update((l.length-m.length+a)/g.howmany*100),a==m.length&&(x?g.nextLoad():(clearInterval(i),g.show4slides()))},this.nextLoad=function(){if(l.length==this.howmany)return clearInterval(i),this.hideVersions(),this.manualRollEnable(),void this.speedupRolling(70);switch(l.length){case 4:this.startRolling(),m=[6,16,26,36];break;case 8:m=[3,9,13,19,23,29,33,39];break;case 16:m=[4,8,14,18,24,28,34,38];break;case 24:m=[2,10,12,20,22,30,32,40];break;case 32:m=[5,7,15,17,25,27,35,37]}this.preloadImages(m),l=l.concat(m),l.sort(function(a,b){return a-b})},this.turnVersion=function(){x=!x,o.update(0),x?(this.stop4slides(),this.breakPreload(),this.preloadImages(m),this.createFrontier(),q.setDimensionProps(k[0]),this.zoom=1,q.zoom=1,q.noZoom(),q.addDrag(),i=setInterval(g.checkComplete,g.completenessIntrvl),l.length>4&&this.startRolling()):(this.stopRolling(),n.hide(),this.breakPreload(),m=[1,11,21,31],this.preloadImages(m),i=setInterval(g.checkComplete,g.completenessIntrvl),this.getInitSize(),q.setDimensionProps(k[this.zoom-1]),q.zoom=this.zoom,q.addZoom(C),q.addDrag())},this.startRolling=function(a){w=!0,a&&(g.rollingIntrvl=a),h=setInterval(function(){g.nextSrc(1)},g.rollingIntrvl)},this.stopRolling=function(){w=!1,clearInterval(h)},this.speedupRolling=function(a){g.rollingIntrvl=a,w&&(clearInterval(h),h=setInterval(function(){g.nextSrc(1)},g.rollingIntrvl))},this.nextSrc=function(a){switch(g.mode){case"medium":a:for(var b=0;b<l.length;b++)if(l[b]==u){u=!b&&0>a?l[l.length-1]:l[(b+1*a)%l.length];break a}break;case"slow":31==u&&l.length>4?g.mode="medium":u=(u+10)%this.howmany}if(cnvCompatible&&!x)n.attr("ref",u),D.clearRect(0,0,2500,2500),D.drawImage(document.getElementById(g.prefx+u),C.x,C.y,k[q.zoom-1],k[q.zoom-1]);else{var c=x?e:f;g.mvblock.hide(),n.attr("src",c[u-1]),g.mvblock.show()}g.rollshift(u-1)},this.show4slides=function(){for(var a=!0;a;)v=(v+10)%g.howmany,document.getElementById(g.prefx+v).complete&&(a=!1);n.fadeOut(1e3),setTimeout(function(){n.attr("src",f[v-1])},1e3),n.fadeIn(1e3),j=setTimeout(g.show4slides,3e3)},this.stop4slides=function(){j&&clearTimeout(j)},this.start=function(){A=g.mvblock.innerWidth(),B=g.mvblock.innerHeight(),$("<div>").hide().attr("id","nvis500").appendTo("body"),$("<div>").hide().attr("id","nvis").appendTo("body"),this.preloadImages(l),i=setInterval(g.checkComplete,g.completenessIntrvl),g.api(),this.initres=this.getInitSize();var a=x?e[0]:f[0];n=$("<img>").attr({src:a,width:g.initres,height:g.initres}).attr("id","ivn").css({position:"relative",left:Math.round((g.mvblock.innerWidth()-g.initres)/2),top:Math.round((g.mvblock.innerHeight()-g.initres)/2)}),n.appendTo(g.mvblock),x&&($(b.makeLite).hide(),n.bind({mousedown:function(a){t=a.pageX},click:function(){g.stopRolling()},dblclick:function(){g.startRolling()}}),q=new gigaimage(n,g.zoom,p,g.rollanddrop))},this.createFrontier=function(){!cnvCompatible||x?(this.mvblock.off(".cnve"),n.bind({mousedown:function(a){t=a.pageX},click:function(){g.stopRolling()},dblclick:function(){g.startRolling()}}),this.mvblock.css("text-align","left"),q=new gigaimage(n,g.zoom,p,g.rollanddrop),q.addZoom(),$(window).resize(function(){1==g.zoom&&n.css("left",Math.round((g.mvblock.innerWidth()-g.initres)/2)).css("top",Math.round((g.mvblock.innerHeight()-g.initres)/2))})):($("#ivn").remove(),q&&q.destroy(),n=$("<canvas>").attr({id:"ivn",width:A,height:B}),n.appendTo(this.mvblock),D=document.getElementById("ivn").getContext("2d"),D.drawImage(document.getElementById(g.prefx+"1"),Math.round((A-g.initres)/2),Math.round((B-g.initres)/2),g.initres,g.initres),C={x:Math.round((A-g.initres)/2),y:Math.round((B-g.initres)/2)},this.mvblock.live({"mousedown.cnve":function(a){t=a.pageX},"click.cnve":function(){g.stopRolling()},"dblclick.cnve":function(){g.startRolling()}}),q=new gigaimage(n,g.zoom,p,g.rollanddrop),q.addZoom(C),$(window).resize(function(){document.getElementById("ivn").width=g.mvblock.innerWidth(),document.getElementById("ivn").height=g.mvblock.innerHeight()}))},this.hide=function(){$(n).hide(),l.length!=this.howmany&&this.breakPreload(),x||l.length==this.howmany?this.stopRolling():this.stop4slides(),this.toggle()},this.show=function(){$(n).show(),x&&q.addZoom(C),q.addDrag(),l.length!=this.howmany&&(this.preloadImages(m),x&&(i=setInterval(g.checkComplete,g.completenessIntrvl))),x||l.length==this.howmany?this.startRolling():this.show4slides(),this.toggle()},this.rollanddrop=function(a,b,c){y!=c&&(y=c,z=Math.abs(b.x)>Math.abs(b.y)?"roll":"drop");var d;if("roll"==z&&Math.abs(a.pageX-t)>20*q.zoom)d=a.pageX-t>0?1:-1,t=a.pageX,g.nextSrc(d);else if("drop"==z)if(!cnvCompatible||x){var e={y:parseInt(n.css("top"),10)};n.css("top",b.y+e.y)}else C.y+=b.y,D.clearRect(0,0,2500,2500),D.drawImage(document.getElementById(g.prefx+u),C.x,C.y,k[q.zoom-1],k[q.zoom-1])},this.getInitSize=function(){if(x)this.zoom=1;else{var a=$(window).width();1030>a?this.zoom=1:1590>a?this.zoom=2:this.zoom=3}return this.imgzoom=k[this.zoom-1],this.imgzoom}}function gigaimage(a,b,c,d){var e=this,f=a,g="CANVAS"==f[0].tagName,h=!1,i=[500,1200,2500],j=0,k=null;if(this.zoom=b,c&&(k=new zoomer(c,e)),cnvCompatible&&g)var l=document.getElementById(f.attr("id")).getContext("2d");this.cursorHand=function(){f.css("cursor","url(/css/skin/cursor/cursor_1.png), url(/css/skin/cursor/cursor_1.gif), url(/css/skin/cursor/cursor_ie_1.cur), crosshair")},e.cursorHand(),this.cursorDrag=function(){f.css("cursor","url(/css/skin/cursor/cursor_2.png), url(/css/skin/cursor/cursor_2.gif), url(/css/skin/cursor/cursor_ie_2.cur), move")},this.setDimensionProps=function(a){var b=f.parent(),c=a?a:i[e.zoom-1];f.attr("width",c).attr("height",c).css("left",(b.width()-c)/2).css("top",(b.height()-c)/2)},cnvCompatible&&g||this.setDimensionProps(),this.zoomIn=function(){var a=f.parent(),b=a.offset();this.fixzoom(1,Math.round(a.width()/2)+b.left,Math.round($("#bigpopup").height()/2)+b.top)},this.zoomOut=function(){var a=f.parent(),b=a.offset();this.fixzoom(-1,Math.round(a.width()/2)+b.left,Math.round($("#bigpopup").height()/2)+b.top)};f.parent();this.fixzoom=function(a,b,c){var d=this.zoom;if(!(1==e.zoom&&0>a||3==e.zoom&&a>0)){a>0?e.zoom++:e.zoom--,a/=Math.abs(a);var h=i[e.zoom-1]/i[d-1];if(cnvCompatible&&g){var j=f.parent().offset();b-=j.left+cnvimg.x,c-=j.top+cnvimg.y,cnvimg.x-=a*Math.abs(Math.round(b*(1-h))),cnvimg.y-=a*Math.abs(Math.round(c*(1-h)));var m=f.attr("ref");l.clearRect(0,0,2500,2500),l.drawImage(document.getElementById(lkmv.prefx+m),cnvimg.x,cnvimg.y,i[e.zoom-1],i[e.zoom-1])}else{var j=f.parent().offset(),n={x:parseInt(f.css("left"),10),y:parseInt(f.css("top"),10)};b-=j.left+n.x,c-=j.top+n.y,n.x-=a*Math.abs(Math.round(b*(1-h))),n.y-=a*Math.abs(Math.round(c*(1-h))),f.attr("width",i[e.zoom-1]).attr("height",i[e.zoom-1]).css({left:n.x,top:n.y})}k&&(a>0?k.plus():k.minus())}},this.addZoom=function(a){cnvimg=a,f.bind({mousewheel:function(a,b){a.preventDefault(),e.fixzoom(b,a.pageX,a.pageY)}}),k.show()},this.noZoom=function(){f.unbind("mousewheel"),k.hide()},this.addDrag=function(){function a(a){init={pageX:a.pageX,pageY:a.pageY},j=a.timeStamp,h=!0,e.cursorDrag()}f.bind({mousedown:function(b){b.preventDefault(),a(b)}}),"undefined"!=typeof window.addEventListener&&(f[0].addEventListener("touchstart",function(b){b.preventDefault(),a(b)},!1),f[0].addEventListener("touchmove",function(a){if(h){a.preventDefault();var b={x:a.pageX-init.pageX,y:a.pageY-init.pageY};e.action(a,b,j,e.zoom),init.pageX=a.pageX,init.pageY=a.pageY}},!1),f[0].addEventListener("touchend",function(a){h=!1,e.cursorHand()},!1))},this.addDrag(),$(document).bind("mousemove.zoomer",function(a){if(h){a.preventDefault();var b={x:a.pageX-init.pageX,y:a.pageY-init.pageY};e.action(a,b,j,e.zoom),init.pageX=a.pageX,init.pageY=a.pageY}}),$(document).bind("mouseup.zoomer",function(a){h=!1,e.cursorHand()}),this.dropping=function(a,b){var c={x:parseInt(f.css("left"),10),y:parseInt(f.css("top"),10)};f.css("top",b.y+c.y).css("left",b.x+c.x)},this.action=d?d:this.dropping,this.destroy=function(){f.unbind("mousedown"),f.unbind("mousewheel"),f.unbind("touchstart"),f.unbind("touchmove"),f.unbind("touchend"),f.remove(),$(document).unbind(".zoomer");for(var a in this)delete this[a];e=null}}function loadbar(){this.percentage=0;var a="loadbar",b=null;this.create=function(c){return c?b=$(c):(b=$("<div>").attr("id",a).html("0%"),b.appendTo("body")),b},this.update=function(a){this.percentage=a?Math.round(a):0,b.html(this.percentage+"%"),100==this.percentage&&this.destroy()},this.destroy=function(){setTimeout(function(){b.fadeOut("slow")},2e3)}}function zoomer(a,b){if(!a)return!1;var c=$(".zoomind",a),d=!1,e=[54,28,-2],f=function(a){return a<e[2]+6?1:a<e[1]-4?2:a<e[1]+4?3:a<e[0]-6?4:5},g=c.parent().offset().top,h=3,i=3,j=[5,3,1];c.css("top",e[b.zoom-1]),this.hide=function(){a.hide()},this.show=function(){a.show()},$("b.plus",a).bind("click",function(){b.zoomIn&&b.zoomIn()}),$("b.minus",a).bind("click",function(){b.zoomOut&&b.zoomOut()}),c.bind({mousedown:function(a){d=!0,a.preventDefault(),a.stopPropagation()},mouseup:function(){d=!1}}),$("b.zoomind",a).parent().bind({mousemove:function(a){if(d){a.preventDefault(),a.stopPropagation();var e=a.pageY-g-3;if(55>e&&e>-3){c.css("top",e);var j=h-f(e);Math.abs(j)&&f(e)!=i&&f(e)%2&&(f(e)-i<0?b.zoomIn():b.zoomOut(),i=f(e)),2==Math.abs(j)?(0>j?b.zoomIn():b.zoomOut(),i=f(e)):Math.abs(j)>=3&&(0>j?(b.zoomIn(),b.zoomIn()):(b.zoomOut(),b.zoomOut()),i=f(e)),h=f(e)}}},mouseleave:function(){}}),this.minus=function(){d||(c.css("top",e[b.zoom-1]),i=j[b.zoom-1],h=j[b.zoom-1])},this.plus=function(){d||(c.css("top",e[b.zoom-1]),i=j[b.zoom-1],h=j[b.zoom-1])}}var cnvCompatible=document.createElement("canvas").getContext;