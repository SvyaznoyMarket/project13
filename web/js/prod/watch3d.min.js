function likemovie(e,t,i,r){if(this.mvblock=$(e),!this.mvblock.length)return!1;if(!i||40!=i.length||r&&40!=r.length)return!1;var t=t?t:{},n=i,a=r,o=this,s=null,l=null,c=null;this.completenessIntrvl=600,this.rollingIntrvl=400;var u=[500,1200,2500];this.initres=u[0];var h=[1,11,21,31],d=h;this.howmany=40,this.zoom=1,this.imgzoom=0,this.mode="slow";var f=null,p=null,m=null,v=null,g=null,_=[[110,28],[121,28],[132,27],[143,26],[154,25],[165,24],[176,23],[187,21],[198,19],[209,16],[220,13],[209,10],[198,7],[187,6],[176,5],[165,4],[154,3],[143,2],[132,1],[121,0],[110,0],[99,0],[88,1],[77,2],[66,3],[55,4],[44,5],[33,6],[22,7],[11,10],[0,13],[11,16],[22,19],[33,21],[44,23],[55,24],[66,25],[77,26],[88,27],[99,28]],E=0,y=1,b=1,T=!1,x=!1;r||(x=!0);var w=0,R="roll",S=0,M=0,H={x:0,y:0},C=null,k=!0,A=!1;this.prefx="ib";for(var P=[],D=0,L=0;o.howmany>L;L++)P[L]=0;this.api=function(){t.zoomer&&(m=$(t.zoomer)),p=new loadbar,p.create(t.loadbar?t.loadbar:0),this.makeLite(),t.rollindex&&(g=$(t.rollindex)),this.toggle()},this.toggle=function(){if(!t.propriate)return!1;for(var e in t.propriate)k?$(t.propriate[e]).show():$(t.propriate[e]).hide();k=!k},this.hideVersions=function(){t&&t.makeLite&&$(t.makeLite).hide(),t&&t.makeFull&&$(t.makeFull).hide()},this.makeLite=function(){var e=null;t&&t.makeLite?e=$(t.makeLite):(e=$("<div>").attr("id","ml").html("make lite").appendTo("body"),t.makeLite="#ml"),e.css("cursor","pointer").bind({click:function(){o.turnVersion(),e.hide(),o.makeFull()}})},this.makeFull=function(){var e=null;t&&t.makeFull?e=$(t.makeFull):(e=$("<div>").attr("id","mf").html("make full").appendTo("body"),t.makeFull="#mf"),e.css("cursor","pointer").show().bind({click:function(){o.turnVersion(),e.hide()}})},this.rollshift=function(e){e=0>e-5?34+e:e-5,g.css("left",_[e][0]).css("top",_[e][1])},this.manualRollEnable=function(){g.bind({mousedown:function(e){e.preventDefault(),o.stopRolling(),A=!0,e.pageX,g.offset().left}}),$(document).mousemove(function(e){if(A){var t=11,i=e.pageX,r=e.pageY,n=g.offset();Math.abs(n.left-i)>t&&(mouseIsLeft=n.left>i?!0:!1,mouseIsTop=n.top>r?!0:!1,o.howmany/4>y-1-5||y-1-5>=3*(o.howmany/4)?y-1-5==3*(o.howmany/4)?(mouseIsLeft||mouseIsTop||o.nextSrc(1),!mouseIsLeft&&mouseIsTop&&o.nextSrc(-1)):mouseIsLeft?o.nextSrc(-1):o.nextSrc(1):y-1-5==o.howmany/4?(mouseIsLeft&&mouseIsTop&&o.nextSrc(1),mouseIsLeft&&!mouseIsTop&&o.nextSrc(-1)):mouseIsLeft?o.nextSrc(1):o.nextSrc(-1))}}),$(document).mouseup(function(){A=!1})},this.breakPreload=function(){if(clearInterval(l),x)for(var e=0;o.howmany>e;e++)1===P[e]&&(P[e]=0);for(var t=d.length;t>0;t--)document.getElementById(o.prefx+d[t-1])&&(document.getElementById(o.prefx+d[t-1]).complete||$("#"+o.prefx+d[t-1]).remove());o.prefx=x?"is":"ib"},this.preloadImages=function(e){if(!x&&$("#"+o.prefx+"1").length){e=[];for(var t=0;o.howmany>t,5>e.length;t++)2!=P[t]&&e.push(t+1)}for(var i=x?n:a,r=$("<div>"),s=0;e.length>s;s++)$("<img>").attr("src",i[e[s]-1]).attr("id",o.prefx+e[s]).appendTo(r).bind("load",function(){o.preloadOnebyone($(this).attr("id").replace(/\D/g,""))});x?$("#nvis500").append(r):$("#nvis").append(r)},this.preloadOnebyone=function(e){if(x||k)return!1;P[e-1]=2;for(var t=0,i=0;o.howmany>i;i++)2==P[i]&&t++;if(p.update(100*(t/o.howmany)),t==o.howmany){for(var r=0;o.howmany>r;r++)h[r]=r+1;return o.hideVersions(),o.manualRollEnable(),o.stop4slides(),o.createFrontier(),o.mode="medium",o.startRolling(70),void 0}D=99;for(var r=e;o.howmany+1*e>r;r++)if(!P[r%o.howmany]){D=r%o.howmany;break}99>D&&(P[D]=1,$("<img>").attr("src",a[D]).attr("id",o.prefx+(1*D+1)).appendTo($("#nvis")).bind("load",function(){o.preloadOnebyone($(this).attr("id").replace(/\D/g,""))}))},this.checkComplete=function(){for(var e=0,t=0;d.length>t;t++)document.getElementById(o.prefx+d[t]).complete&&e++;x&&p.update(100*((h.length-d.length+e)/o.howmany)),e==d.length&&(x?o.nextLoad():(clearInterval(l),o.show4slides()))},this.nextLoad=function(){if(h.length==this.howmany)return clearInterval(l),this.hideVersions(),this.manualRollEnable(),this.speedupRolling(70),void 0;switch(h.length){case 4:this.startRolling(),d=[6,16,26,36];break;case 8:d=[3,9,13,19,23,29,33,39];break;case 16:d=[4,8,14,18,24,28,34,38];break;case 24:d=[2,10,12,20,22,30,32,40];break;case 32:d=[5,7,15,17,25,27,35,37]}this.preloadImages(d),h=h.concat(d),h.sort(function(e,t){return e-t})},this.turnVersion=function(){x=!x,p.update(0),x?(this.stop4slides(),this.breakPreload(),this.preloadImages(d),this.createFrontier(),v.setDimensionProps(u[0]),this.zoom=1,v.zoom=1,v.noZoom(),v.addDrag(),l=setInterval(o.checkComplete,o.completenessIntrvl),h.length>4&&this.startRolling()):(this.stopRolling(),f.hide(),this.breakPreload(),d=[1,11,21,31],this.preloadImages(d),l=setInterval(o.checkComplete,o.completenessIntrvl),this.getInitSize(),v.setDimensionProps(u[this.zoom-1]),v.zoom=this.zoom,v.addZoom(H),v.addDrag())},this.startRolling=function(e){T=!0,e&&(o.rollingIntrvl=e),s=setInterval(function(){o.nextSrc(1)},o.rollingIntrvl)},this.stopRolling=function(){T=!1,clearInterval(s)},this.speedupRolling=function(e){o.rollingIntrvl=e,T&&(clearInterval(s),s=setInterval(function(){o.nextSrc(1)},o.rollingIntrvl))},this.nextSrc=function(e){switch(o.mode){case"medium":e:for(var t=0;h.length>t;t++)if(h[t]==y){y=!t&&0>e?h[h.length-1]:h[(t+1*e)%h.length];break e}break;case"slow":31==y&&h.length>4?o.mode="medium":y=(y+10)%this.howmany}if(cnvCompatible&&!x)f.attr("ref",y),C.clearRect(0,0,2500,2500),C.drawImage(document.getElementById(o.prefx+y),H.x,H.y,u[v.zoom-1],u[v.zoom-1]);else{var i=x?n:a;o.mvblock.hide(),f.attr("src",i[y-1]),o.mvblock.show()}o.rollshift(y-1)},this.show4slides=function(){for(var e=!0;e;)b=(b+10)%o.howmany,document.getElementById(o.prefx+b).complete&&(e=!1);f.fadeOut(1e3),setTimeout(function(){f.attr("src",a[b-1])},1e3),f.fadeIn(1e3),c=setTimeout(o.show4slides,3e3)},this.stop4slides=function(){c&&clearTimeout(c)},this.start=function(){S=o.mvblock.innerWidth(),M=o.mvblock.innerHeight(),$("<div>").hide().attr("id","nvis500").appendTo("body"),$("<div>").hide().attr("id","nvis").appendTo("body"),this.preloadImages(h),l=setInterval(o.checkComplete,o.completenessIntrvl),o.api(),this.initres=this.getInitSize();var e=x?n[0]:a[0];f=$("<img>").attr({src:e,width:o.initres,height:o.initres}).attr("id","ivn").css({position:"relative",left:Math.round((o.mvblock.innerWidth()-o.initres)/2),top:Math.round((o.mvblock.innerHeight()-o.initres)/2)}),f.appendTo(o.mvblock),x&&($(t.makeLite).hide(),f.bind({mousedown:function(e){E=e.pageX},click:function(){o.stopRolling()},dblclick:function(){o.startRolling()}}),v=new gigaimage(f,o.zoom,m,o.rollanddrop))},this.createFrontier=function(){!cnvCompatible||x?(this.mvblock.die(".cnve"),f.bind({mousedown:function(e){E=e.pageX},click:function(){o.stopRolling()},dblclick:function(){o.startRolling()}}),this.mvblock.css("text-align","left"),v=new gigaimage(f,o.zoom,m,o.rollanddrop),v.addZoom(),$(window).resize(function(){1==o.zoom&&f.css("left",Math.round((o.mvblock.innerWidth()-o.initres)/2)).css("top",Math.round((o.mvblock.innerHeight()-o.initres)/2))})):($("#ivn").remove(),v&&v.destroy(),f=$("<canvas>").attr({id:"ivn",width:S,height:M}),f.appendTo(this.mvblock),C=document.getElementById("ivn").getContext("2d"),C.drawImage(document.getElementById(o.prefx+"1"),Math.round((S-o.initres)/2),Math.round((M-o.initres)/2),o.initres,o.initres),H={x:Math.round((S-o.initres)/2),y:Math.round((M-o.initres)/2)},this.mvblock.live({"mousedown.cnve":function(e){E=e.pageX},"click.cnve":function(){o.stopRolling()},"dblclick.cnve":function(){o.startRolling()}}),v=new gigaimage(f,o.zoom,m,o.rollanddrop),v.addZoom(H),$(window).resize(function(){document.getElementById("ivn").width=o.mvblock.innerWidth(),document.getElementById("ivn").height=o.mvblock.innerHeight()}))},this.hide=function(){$(f).hide(),h.length!=this.howmany&&this.breakPreload(),x||h.length==this.howmany?this.stopRolling():this.stop4slides(),this.toggle()},this.show=function(){$(f).show(),x&&v.addZoom(H),v.addDrag(),h.length!=this.howmany&&(this.preloadImages(d),x&&(l=setInterval(o.checkComplete,o.completenessIntrvl))),x||h.length==this.howmany?this.startRolling():this.show4slides(),this.toggle()},this.rollanddrop=function(e,t,i){w!=i&&(w=i,R=Math.abs(t.x)>Math.abs(t.y)?"roll":"drop");var r;if("roll"==R&&Math.abs(e.pageX-E)>20*v.zoom)r=e.pageX-E>0?1:-1,E=e.pageX,o.nextSrc(r);else if("drop"==R)if(!cnvCompatible||x){var n={y:parseInt(f.css("top"),10)};f.css("top",t.y+n.y)}else H.y+=t.y,C.clearRect(0,0,2500,2500),C.drawImage(document.getElementById(o.prefx+y),H.x,H.y,u[v.zoom-1],u[v.zoom-1])},this.getInitSize=function(){if(x)this.zoom=1;else{var e=$(window).width();this.zoom=1030>e?1:1590>e?2:3}return this.imgzoom=u[this.zoom-1],this.imgzoom}}function gigaimage(e,t,i,r){var n=this,a=e,o="CANVAS"==a[0].tagName,s=!1,l=[500,1200,2500],c=0,u=null;if(this.zoom=t,i&&(u=new zoomer(i,n)),cnvCompatible&&o)var h=document.getElementById(a.attr("id")).getContext("2d");this.cursorHand=function(){a.css("cursor","url(/css/skin/cursor/cursor_1.png), url(/css/skin/cursor/cursor_1.gif), url(/css/skin/cursor/cursor_ie_1.cur), crosshair")},n.cursorHand(),this.cursorDrag=function(){a.css("cursor","url(/css/skin/cursor/cursor_2.png), url(/css/skin/cursor/cursor_2.gif), url(/css/skin/cursor/cursor_ie_2.cur), move")},this.setDimensionProps=function(e){var t=a.parent(),i=e?e:l[n.zoom-1];a.attr("width",i).attr("height",i).css("left",(t.width()-i)/2).css("top",(t.height()-i)/2)},cnvCompatible&&o||this.setDimensionProps(),this.zoomIn=function(){var e=a.parent(),t=e.offset();this.fixzoom(1,Math.round(e.width()/2)+t.left,Math.round($("#bigpopup").height()/2)+t.top)},this.zoomOut=function(){var e=a.parent(),t=e.offset();this.fixzoom(-1,Math.round(e.width()/2)+t.left,Math.round($("#bigpopup").height()/2)+t.top)},a.parent(),this.fixzoom=function(e,t,i){var r=this.zoom;if(!(1==n.zoom&&0>e||3==n.zoom&&e>0)){e>0?n.zoom++:n.zoom--,e/=Math.abs(e);var s=l[n.zoom-1]/l[r-1];if(cnvCompatible&&o){var c=a.parent().offset();t-=c.left+cnvimg.x,i-=c.top+cnvimg.y,cnvimg.x-=e*Math.abs(Math.round(t*(1-s))),cnvimg.y-=e*Math.abs(Math.round(i*(1-s)));var d=a.attr("ref");h.clearRect(0,0,2500,2500),h.drawImage(document.getElementById(lkmv.prefx+d),cnvimg.x,cnvimg.y,l[n.zoom-1],l[n.zoom-1])}else{var c=a.parent().offset(),f={x:parseInt(a.css("left"),10),y:parseInt(a.css("top"),10)};t-=c.left+f.x,i-=c.top+f.y,f.x-=e*Math.abs(Math.round(t*(1-s))),f.y-=e*Math.abs(Math.round(i*(1-s))),a.attr("width",l[n.zoom-1]).attr("height",l[n.zoom-1]).css({left:f.x,top:f.y})}u&&(e>0?u.plus():u.minus())}},this.addZoom=function(e){cnvimg=e,a.bind({mousewheel:function(e,t){e.preventDefault(),n.fixzoom(t,e.pageX,e.pageY)}}),u.show()},this.noZoom=function(){a.unbind("mousewheel"),u.hide()},this.addDrag=function(){function e(e){init={pageX:e.pageX,pageY:e.pageY},c=e.timeStamp,s=!0,n.cursorDrag()}a.bind({mousedown:function(t){t.preventDefault(),e(t)}}),window.addEventListener!==void 0&&(a[0].addEventListener("touchstart",function(t){t.preventDefault(),e(t)},!1),a[0].addEventListener("touchmove",function(e){if(s){e.preventDefault();var t={x:e.pageX-init.pageX,y:e.pageY-init.pageY};n.action(e,t,c,n.zoom),init.pageX=e.pageX,init.pageY=e.pageY}},!1),a[0].addEventListener("touchend",function(){s=!1,n.cursorHand()},!1))},this.addDrag(),$(document).bind("mousemove.zoomer",function(e){if(s){e.preventDefault();var t={x:e.pageX-init.pageX,y:e.pageY-init.pageY};n.action(e,t,c,n.zoom),init.pageX=e.pageX,init.pageY=e.pageY}}),$(document).bind("mouseup.zoomer",function(){s=!1,n.cursorHand()}),this.dropping=function(e,t){var i={x:parseInt(a.css("left"),10),y:parseInt(a.css("top"),10)};a.css("top",t.y+i.y).css("left",t.x+i.x)},this.action=r?r:this.dropping,this.destroy=function(){a.unbind("mousedown"),a.unbind("mousewheel"),a.unbind("touchstart"),a.unbind("touchmove"),a.unbind("touchend"),a.remove(),$(document).unbind(".zoomer");for(var e in this)delete this[e];n=null}}function loadbar(){this.percentage=0;var e="loadbar",t=null;this.create=function(i){return i?t=$(i):(t=$("<div>").attr("id",e).html("0%"),t.appendTo("body")),t},this.update=function(e){this.percentage=e?Math.round(e):0,t.html(this.percentage+"%"),100==this.percentage&&this.destroy()},this.destroy=function(){setTimeout(function(){t.fadeOut("slow")},2e3)}}function zoomer(e,t){if(!e)return!1;var i=$(".zoomind",e),r=!1,n=[54,28,-2],a=function(e){return n[2]+6>e?1:n[1]-4>e?2:n[1]+4>e?3:n[0]-6>e?4:5},o=i.parent().offset().top,s=3,l=3,c=[5,3,1];i.css("top",n[t.zoom-1]),this.hide=function(){e.hide()},this.show=function(){e.show()},$("b.plus",e).bind("click",function(){t.zoomIn&&t.zoomIn()}),$("b.minus",e).bind("click",function(){t.zoomOut&&t.zoomOut()}),i.bind({mousedown:function(e){r=!0,e.preventDefault(),e.stopPropagation()},mouseup:function(){r=!1}}),$("b.zoomind",e).parent().bind({mousemove:function(e){if(r){e.preventDefault(),e.stopPropagation();var n=e.pageY-o-3;if(55>n&&n>-3){i.css("top",n);var c=s-a(n);Math.abs(c)&&a(n)!=l&&a(n)%2&&(0>a(n)-l?t.zoomIn():t.zoomOut(),l=a(n)),2==Math.abs(c)?(0>c?t.zoomIn():t.zoomOut(),l=a(n)):Math.abs(c)>=3&&(0>c?(t.zoomIn(),t.zoomIn()):(t.zoomOut(),t.zoomOut()),l=a(n)),s=a(n)}}},mouseleave:function(){}}),this.minus=function(){r||(i.css("top",n[t.zoom-1]),l=c[t.zoom-1],s=c[t.zoom-1])},this.plus=function(){r||(i.css("top",n[t.zoom-1]),l=c[t.zoom-1],s=c[t.zoom-1])}}var cnvCompatible=document.createElement("canvas").getContext;