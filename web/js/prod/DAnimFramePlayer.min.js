var DAnimFramePlayer=function(a,b){function c(a){for(var b=0;b<O.length;b++)if(O[b]==a)return;O[O.length]=a}function d(a){return e(a)?y+a:a}function e(a){return a.length<7||"http://"!=a.substring(0,7)}function f(){if(O.length&&-1==F){for(var a=0,b=0;b<O.length;b++)(!I&&O[b].complete||I&&"complete"==O[b].readyState)&&a++;{1*a/O.length}J&&J.doDraw(a*J.width/O.length),a>=O.length&&g()}}function g(){J&&J.Uninitialize(),F=0,B.animation&&B.animation.length&&(L.draggable=!1,L.style.position="absolute",L.style.cursor="pointer",L.ontouchstart=h,L.onclick=h,L.style.left=D-90+"px",L.style.top=E-90+"px",L.style.display="block",C.src=d(B.animation[0].img)),B.view360&&B.view360.length&&(M.style.position="absolute",M.style.left="10px",M.style.top=E-50+"px",M.style.display="block",M.style.cursor="pointer",M.onmousedown=m,I&&(M.onmouseup=s),N.style.position="absolute",N.style.left=D-140+"px",N.style.top=E-50+"px",N.style.display="block",N.style.cursor="pointer",N.onmousedown=n,I&&(N.onmouseup=s))}function h(){0==F&&B.animation&&B.animation.length&&(Q&&(clearInterval(Q),Q=null),L.style.display="none",B.view360&&B.view360.length&&(M.style.display="none",N.style.display="none"),F=1,z=B.view360&&0!=B.view360.length&&Math.floor(.5+o(G)/(6.2831852/B.view360.length))%B.view360.length!=0?-1:0,i())}function i(){if(-1==z){var a=Math.floor(.5+o(G)/(6.2831852/B.view360.length));a<.5*B.view360.length?a--:a++,a%B.view360.length==0?(C.src=d(B.animation[0].img),z=0):(G=a*(6.2831852/B.view360.length),p()),setTimeout(i,30)}else z++,z<B.animation.length?(C.src=d(B.animation[z].img),setTimeout(i,B.animation[z].interval)):(F=0,C.src=d(B.animation[0].img),L.style.display="block",B.view360&&B.view360.length&&(M.style.display="block",N.style.display="block"),G=0)}function j(){if(B){if(D=B.width,E=B.height,C=document.createElement("img"),C.width=B.width,C.height=B.height,B.splash&&(C.src=d(B.splash)),I?C.ondragStart=k:C.addEventListener("dragStart",k,!1),C.draggable=!1,K.appendChild(C),B.view360)for(var a=0;a<B.view360.length;a++)c(d(B.view360[a]));if(B.animation)for(var a=0;a<B.animation.length;a++)c(d(B.animation[a].img));if(O.length>0){J=new DAnimProgressBar(I),J.Initialize(K,D,E);for(var a=0;a<O.length;a++){var b=O[a];O[a]=new Image,I?O[a].onreadystatechange=f:O[a].onload=f,O[a].src=b}}}}function k(a){a.preventDefault(),a.stopPropagation()}function l(){return!1}function m(){2!=(I?window.event.button:event.button)&&(Q&&(clearInterval(Q),Q=null),I?M.setCapture():(event.preventDefault(),event.stopPropagation(),document.addEventListener("mouseup",s,!0)),q(),Q=setInterval(q,30))}function n(){2!=(I?window.event.button:event.button)&&(Q&&(clearInterval(Q),Q=null),I?N.setCapture():(document.addEventListener("mouseup",s,!0),event.preventDefault(),event.stopPropagation()),r(),Q=setInterval(r,30))}function o(a){for(;0>a||a>=6.2831854;)a>0?a-=6.2831852:a+=6.2831852;return a}function p(){if(B.view360&&B.view360.length){var a=Math.floor(.5+o(G)/(6.2831852/B.view360.length));C.src=d(B.view360[a%B.view360.length])}}function q(){G-=.2,p()}function r(){G+=.2,p()}function s(){null!=Q&&(clearInterval(Q),Q=null),I?N.releaseCapture():document.removeEventListener("mouseup",s,!0)}function t(a){if(0==F){var b=(I?window.event.offsetX:a.clientX)-K.offsetLeft;2==(I?window.event.button:a.button)&&(I?(window.event.returnValue=!1,window.event.cancelBubble=!0):a.preventDefault(),B.view360&&B.view360.length&&(I?(K.onmouseup=v,K.onmousemove=u,K.setCapture()):(document.addEventListener("mouseup",v,!0),document.addEventListener("mousemove",u,!0)),H=b-D/2,A=G))}}function u(a){var b=(I?window.event.offsetX:a.clientX)-K.offsetLeft,c=b-D/2;G=A+.02*(c-H),p(),I||a.stopPropagation()}function v(a){2==(I?window.event.button:a.button)&&(I?(window.event.returnValue=!1,window.event.cancelBubble=!0):a.preventDefault(),I?(K.releaseCapture(),K.onmouseup=null,K.onmousemove=null):(document.removeEventListener("mouseup",v,!0),document.removeEventListener("mousemove",u,!0)))}function w(a){0==F&&1==a.touches.length&&(bOldDraw?(window.event.returnValue=!1,window.event.cancelBubble=!0):a.preventDefault(),H=a.touches[0].pageX-D/2,A=o(G))}function x(a){if(0==F&&1==a.touches.length){a.preventDefault();var b=a.touches[0].pageX-D/2;G=A+.05*(b-H),p()}}var y,z,A,B=null,C=null,D=300,E=300,F=-1,G=0,H=0,I=0,J=null,K=document.createElement("DIV");K.setAttribute("id","js-product-3d-img-container"),K.style.position="relative",a.appendChild(K);var L=document.createElement("DIV");L.style.display="none",L.innerHTML='<img draggable="false" src="'+b+'/images/icon_play.png" width=80 height=80 border=0>',K.appendChild(L);var M=document.createElement("DIV");M.style.display="none",M.innerHTML='<img draggable="false" src="'+b+'/images/rotate_l.png" width=51 height=47 border=0>',K.appendChild(M);var N=document.createElement("DIV");N.style.display="none",N.innerHTML='<img draggable="false" src="'+b+'/images/rotate_r.png" width=55 height=47 border=0>',K.appendChild(N);var O=[],P=function(a){if(navigator.userAgent.indexOf("MSIE")>0){var b=navigator.userAgent.match(/MSIE ([\d\.]+)/);b&&parseFloat(b[1])<9&&(I=1)}I?(K.onselectstart=l,K.onmousedown=t):(K.onselectstart=l,K.addEventListener("mousedown",t,!1),K.addEventListener("touchstart",w,!1),K.addEventListener("touchmove",x,!1)),K.oncontextmenu=l,B=a,y="",j()},Q=null;return{DoLoadModel:P}},DAnimProgressBar=function(a){function b(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.arc(b+d-f,c+f,f,-Math.PI/2,Math.PI/2,!1),a.lineTo(b+f,c+e),a.arc(b+f,c+f,f,Math.PI/2,3*Math.PI/2,!1),a.closePath(),a.fill()}function c(a,c,d,e,f,g){a.save(),a.shadowOffsetX=2,a.shadowOffsetY=2,a.shadowBlur=5,a.shadowColor="#666",a.fillStyle="rgba(189,189,189,1)",b(a,c,d,e,f,g),a.shadowColor="rgba(0,0,0,0)";var h=a.createLinearGradient(0,d+f,0,0);h.addColorStop(0,"rgba(255,255,255, 0.1)"),h.addColorStop(.4,"rgba(255,255,255, 0.7)"),h.addColorStop(1,"rgba(255,255,255,0.4)"),a.fillStyle=h,b(a,c,d,e,f,g),a.fillStyle="white",a.restore()}function d(a,b,c,d,e,f,g){var h=0;a.beginPath(),f>d?(h=f-Math.sqrt(Math.pow(f,2)-Math.pow(f-d,2)),a.moveTo(b+d,c+h),a.lineTo(b+d,c+e-h),a.arc(b+f,c+f,f,Math.PI-Math.acos((f-d)/f),Math.PI+Math.acos((f-d)/f),!1)):d+f>g?(h=f-Math.sqrt(Math.pow(f,2)-Math.pow(f-(g-d),2)),a.moveTo(b+f,c),a.lineTo(b+d,c),a.arc(b+g-f,c+f,f,-Math.PI/2,-Math.acos((f-(g-d))/f),!1),a.lineTo(b+d,c+e-h),a.arc(b+g-f,c+f,f,Math.acos((f-(g-d))/f),Math.PI/2,!1),a.lineTo(b+f,c+e),a.arc(b+f,c+f,f,Math.PI/2,3*Math.PI/2,!1)):(a.moveTo(b+f,c),a.lineTo(b+d,c),a.lineTo(b+d,c+e),a.lineTo(b+f,c+e),a.arc(b+f,c+f,f,Math.PI/2,3*Math.PI/2,!1)),a.closePath(),a.fill(),g-1>d&&(a.save(),a.shadowOffsetX=1,a.shadowBlur=1,a.shadowColor="#666",d+f>g&&(h+=1),a.fillRect(b+d,c+h,1,i-2*h),a.restore())}function e(a,b,c,d,e,f,g){a.save(),a.fillStyle="white";var h=Math.floor(d/g*100)+"%",i=a.measureText(h).width,j=b+d-i-f/2;f+i>=d&&(j=b+f/2),a.fillText(h,j,c+22),a.restore()}var f=null,g=null,h=300,i=34,j=20,k=20,l=i/2,m=a,n=function(){f.style.display="none"},o=function(a,b,c){if(f=document.createElement(m?"DIV":"canvas"),m||(f.width=500,f.height=150),f.style.position="absolute",f.style.left=Math.floor((b-h)/2)+"px",f.style.top=Math.floor((c-i)/2)+"px",a.appendChild(f),m&&(f.style.width=h+"px",f.style.height=i/2+"px",f.style.overflow="hidden",f.style.borderColor="#000000",f.style.borderWidth="1px",f.style.borderStyle="solid",f.style.backgroundColor="#FFFFFF",f.innerHTML='<DIV style="background-color:#ADD9FF;width:0px;height:'+i/2+'px;"></DIV>'),!m){if(!f||!f.getContext)return;if(g=f.getContext("2d"),!g)return;g.font="16px Verdana";var d=g.createLinearGradient(0,k+i,0,0);d.addColorStop(0,"#4DA4F3"),d.addColorStop(.4,"#ADD9FF"),d.addColorStop(1,"#9ED1FF"),g.fillStyle=d}p(0)},p=function(a){if(m){var b=f.children(0);b&&(b.style.width=a+"px")}else g.clearRect(j-5,k-5,h+15,i+15),c(g,j,k,h,i,l),d(g,j,k,a,i,l,h),e(g,j,k,a,i,l,h)};return{width:h,height:i,Initialize:o,Uninitialize:n,doDraw:p}};