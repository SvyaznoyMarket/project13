var DAnimFramePlayer=function(e,t){function n(e){for(var t=0;X.length>t;t++)if(X[t]==e)return;X[X.length]=e}function a(e){return o(e)?P+e:e}function o(e){return 7>e.length||"http://"!=e.substring(0,7)}function i(){if(X.length&&-1==L){for(var e=0,t=0;X.length>t;t++)(!$&&X[t].complete||$&&"complete"==X[t].readyState)&&e++;1*e/X.length,A&&A.doDraw(e*A.width/X.length),e>=X.length&&r()}}function r(){A&&A.Uninitialize(),L=0,D.animation&&D.animation.length&&(V.draggable=!1,V.style.position="absolute",V.style.cursor="pointer",V.ontouchstart=l,V.onclick=l,V.style.left=T-90+"px",V.style.top=S-90+"px",V.style.display="block",E.src=a(D.animation[0].img)),D.view360&&D.view360.length&&(R.style.position="absolute",R.style.left="10px",R.style.top=S-50+"px",R.style.display="block",R.style.cursor="pointer",R.onmousedown=p,$&&(R.onmouseup=w),B.style.position="absolute",B.style.left=T-140+"px",B.style.top=S-50+"px",B.style.display="block",B.style.cursor="pointer",B.onmousedown=h,$&&(B.onmouseup=w))}function l(){0==L&&D.animation&&D.animation.length&&(z&&(clearInterval(z),z=null),V.style.display="none",D.view360&&D.view360.length&&(R.style.display="none",B.style.display="none"),L=1,I=D.view360&&0!=D.view360.length&&0!=Math.floor(.5+v(k)/(6.2831852/D.view360.length))%D.view360.length?-1:0,s())}function s(){if(-1==I){var e=Math.floor(.5+v(k)/(6.2831852/D.view360.length));.5*D.view360.length>e?e--:e++,0==e%D.view360.length?(E.src=a(D.animation[0].img),I=0):(k=e*(6.2831852/D.view360.length),f()),setTimeout(s,30)}else I++,D.animation.length>I?(E.src=a(D.animation[I].img),setTimeout(s,D.animation[I].interval)):(L=0,E.src=a(D.animation[0].img),V.style.display="block",D.view360&&D.view360.length&&(R.style.display="block",B.style.display="block"),k=0)}function d(){if(D){if(T=D.width,S=D.height,E=document.createElement("img"),E.width=D.width,E.height=D.height,D.splash&&(E.src=a(D.splash)),$?E.ondragStart=c:E.addEventListener("dragStart",c,!1),E.draggable=!1,j.appendChild(E),D.view360)for(var e=0;D.view360.length>e;e++)n(a(D.view360[e]));if(D.animation)for(var e=0;D.animation.length>e;e++)n(a(D.animation[e].img));if(X.length>0){A=new DAnimProgressBar($),A.Initialize(j,T,S);for(var e=0;X.length>e;e++){var t=X[e];X[e]=new Image,$?X[e].onreadystatechange=i:X[e].onload=i,X[e].src=t}}}}function c(e){e.preventDefault(),e.stopPropagation()}function u(){return!1}function p(){2!=($?window.event.button:event.button)&&(z&&(clearInterval(z),z=null),$?R.setCapture():(event.preventDefault(),event.stopPropagation(),document.addEventListener("mouseup",w,!0)),m(),z=setInterval(m,30))}function h(){2!=($?window.event.button:event.button)&&(z&&(clearInterval(z),z=null),$?B.setCapture():(document.addEventListener("mouseup",w,!0),event.preventDefault(),event.stopPropagation()),g(),z=setInterval(g,30))}function v(e){for(;0>e||e>=6.2831854;)e>0?e-=6.2831852:e+=6.2831852;return e}function f(){if(D.view360&&D.view360.length){var e=Math.floor(.5+v(k)/(6.2831852/D.view360.length));E.src=a(D.view360[e%D.view360.length])}}function m(){k-=.2,f()}function g(){k+=.2,f()}function w(){null!=z&&(clearInterval(z),z=null),$?B.releaseCapture():document.removeEventListener("mouseup",w,!0)}function y(e){if(0==L){var t=($?window.event.offsetX:e.clientX)-j.offsetLeft;2==($?window.event.button:e.button)&&($?(window.event.returnValue=!1,window.event.cancelBubble=!0):e.preventDefault(),D.view360&&D.view360.length&&($?(j.onmouseup=_,j.onmousemove=b,j.setCapture()):(document.addEventListener("mouseup",_,!0),document.addEventListener("mousemove",b,!0)),F=t-T/2,C=k))}}function b(e){var t=($?window.event.offsetX:e.clientX)-j.offsetLeft,n=t-T/2;k=C+.02*(n-F),f(),$||e.stopPropagation()}function _(e){2==($?window.event.button:e.button)&&($?(window.event.returnValue=!1,window.event.cancelBubble=!0):e.preventDefault(),$?(j.releaseCapture(),j.onmouseup=null,j.onmousemove=null):(document.removeEventListener("mouseup",_,!0),document.removeEventListener("mousemove",b,!0)))}function x(e){0==L&&1==e.touches.length&&(bOldDraw?(window.event.returnValue=!1,window.event.cancelBubble=!0):e.preventDefault(),F=e.touches[0].pageX-T/2,C=v(k))}function M(e){if(0==L&&1==e.touches.length){e.preventDefault();var t=e.touches[0].pageX-T/2;k=C+.05*(t-F),f()}}var P,I,C,D=null,E=null,T=300,S=300,L=-1,k=0,F=0,$=0,A=null,j=document.createElement("DIV");j.setAttribute("id","3dImgContainer"),j.style.position="relative",e.appendChild(j);var V=document.createElement("DIV");V.style.display="none",V.innerHTML='<img draggable="false" src="'+t+'/images/icon_play.png" width=80 height=80 border=0>',j.appendChild(V);var R=document.createElement("DIV");R.style.display="none",R.innerHTML='<img draggable="false" src="'+t+'/images/rotate_l.png" width=51 height=47 border=0>',j.appendChild(R);var B=document.createElement("DIV");B.style.display="none",B.innerHTML='<img draggable="false" src="'+t+'/images/rotate_r.png" width=55 height=47 border=0>',j.appendChild(B);var X=[],O=function(e){if(navigator.userAgent.indexOf("MSIE")>0){var t=navigator.userAgent.match(/MSIE ([\d\.]+)/);t&&9>parseFloat(t[1])&&($=1)}$?(j.onselectstart=u,j.onmousedown=y):(j.onselectstart=u,j.addEventListener("mousedown",y,!1),j.addEventListener("touchstart",x,!1),j.addEventListener("touchmove",M,!1)),j.oncontextmenu=u,D=e,P="",d()},z=null;return{DoLoadModel:O}},DAnimProgressBar=function(e){function t(e,t,n,a,o,i){e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+a-i,n),e.arc(t+a-i,n+i,i,-Math.PI/2,Math.PI/2,!1),e.lineTo(t+i,n+o),e.arc(t+i,n+i,i,Math.PI/2,3*Math.PI/2,!1),e.closePath(),e.fill()}function n(e,n,a,o,i,r){e.save(),e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowBlur=5,e.shadowColor="#666",e.fillStyle="rgba(189,189,189,1)",t(e,n,a,o,i,r),e.shadowColor="rgba(0,0,0,0)";var l=e.createLinearGradient(0,a+i,0,0);l.addColorStop(0,"rgba(255,255,255, 0.1)"),l.addColorStop(.4,"rgba(255,255,255, 0.7)"),l.addColorStop(1,"rgba(255,255,255,0.4)"),e.fillStyle=l,t(e,n,a,o,i,r),e.fillStyle="white",e.restore()}function a(e,t,n,a,o,i,r){var l=0;e.beginPath(),i>a?(l=i-Math.sqrt(Math.pow(i,2)-Math.pow(i-a,2)),e.moveTo(t+a,n+l),e.lineTo(t+a,n+o-l),e.arc(t+i,n+i,i,Math.PI-Math.acos((i-a)/i),Math.PI+Math.acos((i-a)/i),!1)):a+i>r?(l=i-Math.sqrt(Math.pow(i,2)-Math.pow(i-(r-a),2)),e.moveTo(t+i,n),e.lineTo(t+a,n),e.arc(t+r-i,n+i,i,-Math.PI/2,-Math.acos((i-(r-a))/i),!1),e.lineTo(t+a,n+o-l),e.arc(t+r-i,n+i,i,Math.acos((i-(r-a))/i),Math.PI/2,!1),e.lineTo(t+i,n+o),e.arc(t+i,n+i,i,Math.PI/2,3*Math.PI/2,!1)):(e.moveTo(t+i,n),e.lineTo(t+a,n),e.lineTo(t+a,n+o),e.lineTo(t+i,n+o),e.arc(t+i,n+i,i,Math.PI/2,3*Math.PI/2,!1)),e.closePath(),e.fill(),r-1>a&&(e.save(),e.shadowOffsetX=1,e.shadowBlur=1,e.shadowColor="#666",a+i>r&&(l+=1),e.fillRect(t+a,n+l,1,s-2*l),e.restore())}function o(e,t,n,a,o,i,r){e.save(),e.fillStyle="white";var l=Math.floor(100*(a/r))+"%",s=e.measureText(l).width,d=t+a-s-i/2;i+s>=a&&(d=t+i/2),e.fillText(l,d,n+22),e.restore()}var i=null,r=null,l=300,s=34,d=20,c=20,u=s/2,p=e,h=function(){i.style.display="none"},v=function(e,t,n){if(i=document.createElement(p?"DIV":"canvas"),p||(i.width=500,i.height=150),i.style.position="absolute",i.style.left=Math.floor((t-l)/2)+"px",i.style.top=Math.floor((n-s)/2)+"px",e.appendChild(i),p&&(i.style.width=l+"px",i.style.height=s/2+"px",i.style.overflow="hidden",i.style.borderColor="#000000",i.style.borderWidth="1px",i.style.borderStyle="solid",i.style.backgroundColor="#FFFFFF",i.innerHTML='<DIV style="background-color:#ADD9FF;width:0px;height:'+s/2+'px;"></DIV>'),!p){if(!i||!i.getContext)return;if(r=i.getContext("2d"),!r)return;r.font="16px Verdana";var a=r.createLinearGradient(0,c+s,0,0);a.addColorStop(0,"#4DA4F3"),a.addColorStop(.4,"#ADD9FF"),a.addColorStop(1,"#9ED1FF"),r.fillStyle=a}f(0)},f=function(e){if(p){var t=i.children(0);t&&(t.style.width=e+"px")}else r.clearRect(d-5,c-5,l+15,s+15),n(r,d,c,l,s,u),a(r,d,c,e,s,u,l),o(r,d,c,e,s,u,l)};return{width:l,height:s,Initialize:v,Uninitialize:h,doDraw:f}};