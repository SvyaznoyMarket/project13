var DAnimFramePlayer=function(a){function b(a){for(var b=0;b<N.length;b++)if(N[b]==a)return;N[N.length]=a}function c(a){return d(a)?x+a:a}function d(a){return a.length<7||"http://"!=a.substring(0,7)}function e(){if(N.length&&-1==E){for(var a=0,b=0;b<N.length;b++)(!H&&N[b].complete||H&&"complete"==N[b].readyState)&&a++;1*a/N.length;I&&I.doDraw(a*I.width/N.length),a>=N.length&&f()}}function f(){I&&I.Uninitialize(),E=0,A.animation&&A.animation.length&&(K.draggable=!1,K.style.position="absolute",K.style.cursor="pointer",K.ontouchstart=g,K.onclick=g,K.style.left=C-90+"px",K.style.top=D-90+"px",K.style.display="block",B.src=c(A.animation[0].img)),A.view360&&A.view360.length&&(L.style.position="absolute",L.style.left="10px",L.style.top=D-50+"px",L.style.display="block",L.style.cursor="pointer",L.onmousedown=l,H&&(L.onmouseup=r),M.style.position="absolute",M.style.left=C-140+"px",M.style.top=D-50+"px",M.style.display="block",M.style.cursor="pointer",M.onmousedown=m,H&&(M.onmouseup=r))}function g(){0==E&&A.animation&&A.animation.length&&(P&&(clearInterval(P),P=null),K.style.display="none",A.view360&&A.view360.length&&(L.style.display="none",M.style.display="none"),E=1,y=A.view360&&0!=A.view360.length&&Math.floor(.5+n(F)/(6.2831852/A.view360.length))%A.view360.length!=0?-1:0,h())}function h(){if(-1==y){var a=Math.floor(.5+n(F)/(6.2831852/A.view360.length));a<.5*A.view360.length?a--:a++,a%A.view360.length==0?(B.src=c(A.animation[0].img),y=0):(F=a*(6.2831852/A.view360.length),o()),setTimeout(h,30)}else y++,y<A.animation.length?(B.src=c(A.animation[y].img),setTimeout(h,A.animation[y].interval)):(E=0,B.src=c(A.animation[0].img),K.style.display="block",A.view360&&A.view360.length&&(L.style.display="block",M.style.display="block"),F=0)}function i(){if(A){if(C=A.width,D=A.height,B=document.createElement("img"),B.width=A.width,B.height=A.height,A.splash&&(B.src=c(A.splash)),H?B.ondragStart=j:B.addEventListener("dragStart",j,!1),B.draggable=!1,J.appendChild(B),A.view360)for(var a=0;a<A.view360.length;a++)b(c(A.view360[a]));if(A.animation)for(var a=0;a<A.animation.length;a++)b(c(A.animation[a].img));if(N.length>0){I=new DAnimProgressBar(H),I.Initialize(J,C,D);for(var a=0;a<N.length;a++){var d=N[a];N[a]=new Image,H?N[a].onreadystatechange=e:N[a].onload=e,N[a].src=d}}}}function j(a){a.preventDefault(),a.stopPropagation()}function k(){return!1}function l(a){a=a||window.event,0!=(H?window.event.button:a.button)&&(P&&(clearInterval(P),P=null),H?L.setCapture():(a.preventDefault(),a.stopPropagation(),document.addEventListener("mouseup",r,!0)),p(),P=setInterval(p,30))}function m(a){a=a||window.event,0!=(H?window.event.button:a.button)&&(P&&(clearInterval(P),P=null),H?M.setCapture():(document.addEventListener("mouseup",r,!0),a.preventDefault(),a.stopPropagation()),q(),P=setInterval(q,30))}function n(a){for(;0>a||a>=6.2831854;)a>0?a-=6.2831852:a+=6.2831852;return a}function o(){if(A.view360&&A.view360.length){var a=Math.floor(.5+n(F)/(6.2831852/A.view360.length));B.src=c(A.view360[a%A.view360.length])}}function p(){F-=.2,o()}function q(){F+=.2,o()}function r(){null!=P&&(clearInterval(P),P=null),H?M.releaseCapture():document.removeEventListener("mouseup",r,!0)}function s(a){if(0==E){var b=(H?window.event.offsetX:a.clientX)-J.offsetLeft;0==(H?window.event.button:a.button)&&(H?(window.event.returnValue=!1,window.event.cancelBubble=!0):a.preventDefault(),A.view360&&A.view360.length&&(H?(J.onmouseup=u,J.onmousemove=t,J.setCapture()):(document.addEventListener("mouseup",u,!0),document.addEventListener("mousemove",t,!0)),G=b-C/2,z=F))}}function t(a){var b=(H?window.event.offsetX:a.clientX)-J.offsetLeft,c=b-C/2;F=z+.02*(c-G),o(),H||a.stopPropagation()}function u(a){0==(H?window.event.button:a.button)&&(H?(window.event.returnValue=!1,window.event.cancelBubble=!0):a.preventDefault(),H?(J.releaseCapture(),J.onmouseup=null,J.onmousemove=null):(document.removeEventListener("mouseup",u,!0),document.removeEventListener("mousemove",t,!0)))}function v(a){0==E&&1==a.touches.length&&(bOldDraw?(window.event.returnValue=!1,window.event.cancelBubble=!0):a.preventDefault(),G=a.touches[0].pageX-C/2,z=n(F))}function w(a){if(0==E&&1==a.touches.length){a.preventDefault();var b=a.touches[0].pageX-C/2;F=z+.05*(b-G),o()}}var x,y,z,A=null,B=null,C=300,D=300,E=-1,F=0,G=0,H=0,I=null,J=document.createElement("DIV");J.setAttribute("id","js-product-3d-img-container"),J.style.position="relative",a.appendChild(J);var K=document.createElement("DIV");K.style.display="none",K.innerHTML='<img draggable="false" src="/images/icon_play.png" width=80 height=80 border=0>',J.appendChild(K);var L=document.createElement("DIV");L.style.display="none",L.innerHTML='<img draggable="false" src="/images/rotate_l.png" width=51 height=47 border=0>',J.appendChild(L);var M=document.createElement("DIV");M.style.display="none",M.innerHTML='<img draggable="false" src="/images/rotate_r.png" width=55 height=47 border=0>',J.appendChild(M);var N=[],O=function(a){if(navigator.userAgent.indexOf("MSIE")>0){var b=navigator.userAgent.match(/MSIE ([\d\.]+)/);b&&parseFloat(b[1])<9&&(H=1)}H?(J.onselectstart=k,J.onmousedown=s):(J.onselectstart=k,J.addEventListener("mousedown",s,!1),J.addEventListener("touchstart",v,!1),J.addEventListener("touchmove",w,!1)),J.oncontextmenu=k,A=a,x="",i()},P=null;return{DoLoadModel:O}},DAnimProgressBar=function(a){function b(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.arc(b+d-f,c+f,f,-Math.PI/2,Math.PI/2,!1),a.lineTo(b+f,c+e),a.arc(b+f,c+f,f,Math.PI/2,3*Math.PI/2,!1),a.closePath(),a.fill()}function c(a,c,d,e,f,g){a.save(),a.shadowOffsetX=2,a.shadowOffsetY=2,a.shadowBlur=5,a.shadowColor="#666",a.fillStyle="rgba(189,189,189,1)",b(a,c,d,e,f,g),a.shadowColor="rgba(0,0,0,0)";var h=a.createLinearGradient(0,d+f,0,0);h.addColorStop(0,"rgba(255,255,255, 0.1)"),h.addColorStop(.4,"rgba(255,255,255, 0.7)"),h.addColorStop(1,"rgba(255,255,255,0.4)"),a.fillStyle=h,b(a,c,d,e,f,g),a.fillStyle="white",a.restore()}function d(a,b,c,d,e,f,g){var h=0;a.beginPath(),f>d?(h=f-Math.sqrt(Math.pow(f,2)-Math.pow(f-d,2)),a.moveTo(b+d,c+h),a.lineTo(b+d,c+e-h),a.arc(b+f,c+f,f,Math.PI-Math.acos((f-d)/f),Math.PI+Math.acos((f-d)/f),!1)):d+f>g?(h=f-Math.sqrt(Math.pow(f,2)-Math.pow(f-(g-d),2)),a.moveTo(b+f,c),a.lineTo(b+d,c),a.arc(b+g-f,c+f,f,-Math.PI/2,-Math.acos((f-(g-d))/f),!1),a.lineTo(b+d,c+e-h),a.arc(b+g-f,c+f,f,Math.acos((f-(g-d))/f),Math.PI/2,!1),a.lineTo(b+f,c+e),a.arc(b+f,c+f,f,Math.PI/2,3*Math.PI/2,!1)):(a.moveTo(b+f,c),a.lineTo(b+d,c),a.lineTo(b+d,c+e),a.lineTo(b+f,c+e),a.arc(b+f,c+f,f,Math.PI/2,3*Math.PI/2,!1)),a.closePath(),a.fill(),g-1>d&&(a.save(),a.shadowOffsetX=1,a.shadowBlur=1,a.shadowColor="#666",d+f>g&&(h+=1),a.fillRect(b+d,c+h,1,i-2*h),a.restore())}function e(a,b,c,d,e,f,g){a.save(),a.fillStyle="white";var h=Math.floor(d/g*100)+"%",i=a.measureText(h).width,j=b+d-i-f/2;f+i>=d&&(j=b+f/2),a.fillText(h,j,c+22),a.restore()}var f=null,g=null,h=300,i=34,j=20,k=20,l=i/2,m=a,n=function(){f.style.display="none"},o=function(a,b,c){if(f=document.createElement(m?"DIV":"canvas"),m||(f.width=500,f.height=150),f.style.position="absolute",f.style.left=Math.floor((b-h)/2)+"px",f.style.top=Math.floor((c-i)/2)+"px",a.appendChild(f),m&&(f.style.width=h+"px",f.style.height=i/2+"px",f.style.overflow="hidden",f.style.borderColor="#000000",f.style.borderWidth="1px",f.style.borderStyle="solid",f.style.backgroundColor="#FFFFFF",f.innerHTML='<DIV style="background-color:#ADD9FF;width:0px;height:'+i/2+'px;"></DIV>'),!m){if(!f||!f.getContext)return;if(g=f.getContext("2d"),!g)return;g.font="16px Verdana";var d=g.createLinearGradient(0,k+i,0,0);d.addColorStop(0,"#4DA4F3"),d.addColorStop(.4,"#ADD9FF"),d.addColorStop(1,"#9ED1FF"),g.fillStyle=d}p(0)},p=function(a){if(m){var b=f.children(0);b&&(b.style.width=a+"px")}else g.clearRect(j-5,k-5,h+15,i+15),c(g,j,k,h,i,l),d(g,j,k,a,i,l,h),e(g,j,k,a,i,l,h)};return{width:h,height:i,Initialize:o,Uninitialize:n,doDraw:p}};