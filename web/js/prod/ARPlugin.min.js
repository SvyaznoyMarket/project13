(function(e){function a(e){void 0!=e&&(E=e.type,A=e.js,R=e.css,T=e.img,C=e.swf,S=e.resources,I=e.meshes_path,N=e.textures_path,q=e.marker_path),(void 0==e||void 0==e.type)&&(E=F),(void 0==e||void 0==e.js)&&m("Please, set js folder"),(void 0==e||void 0==e.css)&&m("Please, set css folder"),(void 0==e||void 0==e.swf)&&m("Please, set swf folder"),(void 0==e||void 0==e.resources)&&m("Please, set resources folder"),(void 0==e||void 0==e.textures_path)&&m("Please, set textures folder"),(void 0==e||void 0==e.meshes_path)&&m("Please, set meshes folder"),(void 0==e||void 0==e.marker_path)&&(q="http://pandra.ru/pandra_marker.pdf"),s(),l()}function t(){this.init=a,this.show=c}function s(){for(var e=0;j.length>e;e++)n(j[e]);if(E==L)for(var e=0;P.length>e;e++)n(P[e])}function r(){for(var e=0;k.length>e;e++)i(k[e])}function n(e){var a=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src=A+e,a.appendChild(t)}function i(e){$("head").append("<link rel='stylesheet' type='text/css' href='"+R+e+"'>")}function l(){"Complete"==document.readyState||"complete"==document.readyState?(r(),o()):setTimeout(l,11)}function o(){E==L&&d()}function d(){$.ajax({type:"GET",url:"/static/ARPlugin/xml/YML.xml",dataType:"xml",success:w})}function c(e,a){E==L?f():u(e,a)}function p(){h()?$("#ar_pandra").lightbox_me({centered:!0,closeSelector:".close",onClose:function(){swfobject.removeSWF("pandra_ar_swf")}}):alert("Сожалеем, произошла ошибка при открытии. Попробуйте перезагрузить страницу.")}function u(e,a){void 0==e&&m("Please, set current mesh"),void 0==a&&m("Please, set current texture"),g=!0,$("#ar_pandra").length||$("body").append("<div id='ar_pandra' class='ar_pandra popup'><i class=\"close\" title=\"Закрыть\">Закрыть</i><div class='ar_pandra_content' id='ar_pandra_content'></div><div class='footer_ar_pandra footer_ar_pandra_simple'><div><a href='"+q+"' target='_blank'>Скачать маркер (.pdf)</a></div>"+"|"+"<div class='powered_by_ar_pandra'><a href='http://www.pandra.ru' alt='pandra' target='_blank'>Разработка - <img src='"+T+"logo.png'></a></div>"+"</div>"+"</div>"),M=I+e,W=N+a,p()}function f(){g=!0;var e=0,a=0;$("body").append("<div id='ar_pandra' class='ar_pandra popup'><i class=\"close\" title=\"Закрыть\">Закрыть</i><div class='ar_pandra_content' id='ar_pandra_content'></div><div class='als-container' id='demo1'><span class='als-prev'><img src='http://als.musings.it/images/thin_left_arrow.png' alt='prev' title='previous' /></span><div class='als-viewport'><ul class='als-wrapper'></ul></div><span class='als-next'><img src='http://als.musings.it/images/thin_right_arrow_333.png' alt='next' title='next' /></span></div><div class='footer_ar_pandra'><div><a href='"+q+"' target='_blank'>Скачать маркер (.pdf)</a></div>"+"|"+"<div class='powered_by_ar_pandra'><a href='http://www.pandra.ru'  target='_blank'>Разработка - <img src='"+T+"logo.png'></a></div>"+"</div>"+"</div>"),$(y).find("offer").each(function(){var a=$(this),t="als-item";e++,1==e&&(t+=" als-item-selected",_(a.attr("id"))),$(".als-wrapper").append("<li class='"+t+"' myId='"+a.attr("id")+"'><img src='"+a.find("picture").text()+"' alt='orange' title='orange' />"+a.find("model").text()+"</li>"),$(".als-wrapper").find("li").last().click(function(){$(".als-item").each(function(){$(this).removeClass("als-item-selected")}),$(this).addClass("als-item-selected"),v($(this).attr("myId"))})}),a=e>=b?b:e,$("#demo1").als({visible_items:a,orientation:"horizontal",circular:"no",autoscroll:"no"}),p()}function v(e){x.loadObject("/static/resources/model/watch_"+e+".obj","/static/resources/model/watch_"+e+".png")}function _(e){M="/static/resources/model/watch_"+e+".obj",W="/static/resources/model/watch_"+e+".png"}function m(e){console.warn("AR_PANDRA: Error! "+e)}function h(){var a=!1;flashvars={resourcesLink:S,defaultModel:M,defaultTexture:W},params={allowscriptaccess:"always",wmode:"direct"},attributes={id:"pandra_ar_swf",name:"pandra_ar_swf"};try{swfobject.embedSWF(C+"arPrototype.swf","ar_pandra_content","640","480","11","expressInstall.swf",flashvars,params,attributes,function(e){x=e.ref,x&&(a=!0)})}catch(t){var s={event:"swfobject_error",type:"ошибка загрузки swf pandra",err:t};e.utils.logError(s)}return a}function w(e){y=e}var g=!1,y=null,b=5,x=null,j=[],P=["jquery.als-1.1.min.js"],k=["ARPlugin.css"],E=null,A=null,R=null,T=null,C=null,S=null,I=null,N=null,F="simple",L="advanced",M=null,W=null,q=null;e.utils.ARPlugin=new t})(window.ENTER);