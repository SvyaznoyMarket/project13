(function(a){function e(a){void 0!=a&&(E=a.type,T=a.js,A=a.css,C=a.img,R=a.swf,S=a.resources,I=a.meshes_path,N=a.textures_path,q=a.marker_path),(void 0==a||void 0==a.type)&&(E=F),(void 0==a||void 0==a.js)&&m("Please, set js folder"),(void 0==a||void 0==a.css)&&m("Please, set css folder"),(void 0==a||void 0==a.swf)&&m("Please, set swf folder"),(void 0==a||void 0==a.resources)&&m("Please, set resources folder"),(void 0==a||void 0==a.textures_path)&&m("Please, set textures folder"),(void 0==a||void 0==a.meshes_path)&&m("Please, set meshes folder"),(void 0==a||void 0==a.marker_path)&&(q="http://pandra.ru/pandra_marker.pdf"),s(),l()}function t(){this.init=e,this.show=c}function s(){for(var a=0;j.length>a;a++)n(j[a]);if(E==L)for(var a=0;P.length>a;a++)n(P[a])}function r(){for(var a=0;k.length>a;a++)i(k[a])}function n(a){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src=T+a,e.appendChild(t)}function i(a){$("head").append("<link rel='stylesheet' type='text/css' href='"+A+a+"'>")}function l(){"Complete"==document.readyState||"complete"==document.readyState?(r(),o()):setTimeout(l,11)}function o(){E==L&&d()}function d(){$.ajax({type:"GET",url:"/static/xml/YML.xml",dataType:"xml",success:g})}function c(a,e){E==L?f():u(a,e)}function p(){$("#ar_pandra").lightbox_me({centered:!0,closeSelector:".close",onClose:function(){swfobject.removeSWF("pandra_ar_swf")}})}function u(a,e){void 0==a&&m("Please, set current mesh"),void 0==e&&m("Please, set current texture"),w=!0,$("body").append("<div id='ar_pandra' class='ar_pandra'><div class='close_button_ar_pandra'><a href='javascript:close_ar_padnra()'><img src='"+C+"close.png'></a></div>"+"<div class='ar_pandra_content' id='ar_pandra_content'></div>"+"<div class='footer_ar_pandra footer_ar_pandra_simple'>"+"<div><a href='"+q+"' target='_blank'>Скачать маркер (.pdf)</a></div>"+"|"+"<div class='powered_by_ar_pandra'><a href='http://www.pandra.ru' alt='pandra' target='_blank'>Разработка - <img src='"+C+"logo.png'></a></div>"+"</div>"+"</div>"),M=I+a,W=N+e,h(),p()}function f(){w=!0;var a=0,e=0;$("body").append("<div id='ar_pandra' class='ar_pandra'><div class='close_button_ar_pandra'><a href='javascript:close_ar_padnra()'><img src='"+C+"close.png'></a></div>"+"<div class='ar_pandra_content' id='ar_pandra_content'></div>"+"<div class='als-container' id='demo1'>"+"<span class='als-prev'><img src='http://als.musings.it/images/thin_left_arrow.png' alt='prev' title='previous' /></span>"+"<div class='als-viewport'>"+"<ul class='als-wrapper'>"+"</ul>"+"</div>"+"<span class='als-next'><img src='http://als.musings.it/images/thin_right_arrow_333.png' alt='next' title='next' /></span>"+"</div>"+"<div class='footer_ar_pandra'>"+"<div><a href='"+q+"' target='_blank'>Скачать маркер (.pdf)</a></div>"+"|"+"<div class='powered_by_ar_pandra'><a href='http://www.pandra.ru'  target='_blank'>Разработка - <img src='"+C+"logo.png'></a></div>"+"</div>"+"</div>"),$(y).find("offer").each(function(){var e=$(this),t="als-item";a++,1==a&&(t+=" als-item-selected",v(e.attr("id"))),$(".als-wrapper").append("<li class='"+t+"' myId='"+e.attr("id")+"'><img src='"+e.find("picture").text()+"' alt='orange' title='orange' />"+e.find("model").text()+"</li>"),$(".als-wrapper").find("li").last().click(function(){$(".als-item").each(function(){$(this).removeClass("als-item-selected")}),$(this).addClass("als-item-selected"),_($(this).attr("myId"))})}),e=a>=b?b:a,$("#demo1").als({visible_items:e,orientation:"horizontal",circular:"no",autoscroll:"no"}),h(),p()}function _(a){x.loadObject("/static/resources/model/watch_"+a+".obj","/static/resources/model/watch_"+a+".png")}function v(a){M="/static/resources/model/watch_"+a+".obj",W="/static/resources/model/watch_"+a+".png"}function m(a){console.log("AR_PANDRA: Error! "+a)}function h(){var a={resourcesLink:S,defaultModel:M,defaultTexture:W},e={allowscriptaccess:"always",wmode:"direct"},t={id:"pandra_ar_swf",name:"pandra_ar_swf"};swfobject.embedSWF(R+"arPrototype.swf","ar_pandra_content","640","480","11","expressInstall.swf",a,e,t,function(a){x=a.ref})}function g(a){y=a}var w=!1,y=null,b=5,x=null,j=[],P=["jquery.als-1.1.min.js"],k=["ARPlugin.css"],E=null,T=null,A=null,C=null,R=null,S=null,I=null,N=null,F="simple",L="advanced",M=null,W=null,q=null;a.utils.ARPlugin=new t})(window.ENTER);