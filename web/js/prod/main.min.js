var addKISSmetricsEvent=function(t,e,a){var i=a.attr("src"),r=a.data("url");"undefined"!=typeof _kmq&&_kmq.push(["record",t,{"Banner id":e,"Center Image URL":i,"Banner URL":r}])};$(document).ready(function(){function t(t,e){$(t).animate({opacity:"0"},400,function(){setTimeout(function(){t.attr({src:u[e].imgs,alt:u[e].alt,title:u[e].alt}),$(t).animate({opacity:"1"})},350)})}function e(t){var e=n-t-3;u=e>=0?r.slice(t,t+3):r.slice(t).concat(r.slice(0,-e))}function a(i,r){if(i=i||0,r=r||!1,!d)return s=setTimeout(function(){a()},u[1].t),void 0;if(g)return!1;g=!0,0===i?i=1:clearTimeout(s);var o="-=1000px",c="1032px";0>i&&(o="+=1000px",c="-968px"),l=(l+i)%n,0>l&&(l=n-1),e(l),$(".centerImage").animate({left:o,opacity:"0"},800,function(){$(".centerImage").attr("src",u[1].imgb).data("url",u[1].url),$(this).css("left",c).animate({opacity:"1",left:o}),g=!1,s=setTimeout(function(){a()},u[1].t)}),t($(".leftImage"),0),t($(".rightImage"),2);var m=u[1];"undefined"!=typeof _gaq&&m.pos!==void 0&&m.imgb!==void 0&&m.ga!==void 0&&(_gaq.push(["_trackEvent","Carousel","View_"+m.pos,m.imgb]),console.log("#GA: _trackEvent, Carousel, View_"+m.pos+" | "+m.imgb+m.ga),r&&(_gaq.push(["_trackEvent","BannerClick",""+m.pos]),console.log("GA: _trackEvent BannerClick",m.pos)))}if($(".bPromoCategory a").bind("click",function(){var t=$(this).attr("href");"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CategoryClick","Верхнее меню",t])}),$("#main_banner-data").length){var i,r=$("#main_banner-data").data("value"),n=r.length;for(i=0;n>i;i++)(r[i].imgb===void 0||r[i].imgs===void 0)&&r.splice(i,1),r[i].url===void 0&&(r[i].url=""),r[i].t===void 0&&(r[i].url=4e3),r[i].alt===void 0&&(r[i].url="");if(0!=n){if(1==n){if("is_exclusive"in r[0]&&r[0].is_exclusive){var o=$("<img>").attr("src",r[0].imgb).css("cursor","pointer").data("url",r[0].url);return o.click(function(){"undefined"!=typeof _gaq&&currImg.pos!==void 0&&currImg.imgb!==void 0&&currImg.ga!==void 0&&_gaq.push(["_trackEvent","Carousel","Click_"+currImg.pos,currImg.imgb]),location.href=$(this).data("url")}),o.mouseover(function(){"undefined"!=typeof _gaq&&currImg.pos!==void 0&&currImg.imgb!==void 0&&currImg.ga!==void 0&&_gaq.push(["_trackEvent","Carousel","View_"+currImg.pos,currImg.imgb])}),$(".bCarouselWrap").html(o),void 0}return $(".centerImage").attr("src",r[0].imgb).data("url",r[0].url).click(function(){"undefined"!=typeof _gaq&&r[0].ga!==void 0&&(_gaq.push(["_trackEvent","BannerClick",""+r[0].ga]),console.log("GA: _trackEvent, BannerClick promos ",r[0].ga)),addKISSmetricsEvent("Carousel banner view","bigbanner",$(this)),location.href=$(this).data("url")}),void 0}var c=$("<div>").css("display","none");for(i=0;n>i;i++)$("<img>").attr("src",r[i].imgb).appendTo(c),$("<img>").attr("src",r[i].imgs).appendTo(c);$("body").append(c),$(".leftImage").attr({src:r[n-1].imgs,alt:r[n-1].alt,title:r[n-1].alt}),$(".centerImage").attr("src",r[0].imgb).data("url",r[0].url),$(".rightImage").attr({src:r[1].imgs,alt:r[1].alt,title:r[1].alt});var l=n-1,s=null,u=[],g=!1,d=!0;e(l),s=setTimeout(function(){a()},u[1].t);var m=new brwsr;m.isAndroid||m.isOSX?($(".bCarousel div").show(),$(".allpage").css("overflow","hidden")):$(".bCarousel").mouseenter(function(){$(".bCarousel div").show()}).mouseleave(function(){$(".bCarousel div").hide()}),$(".leftArrow").click(function(){a(-1,!0)}),$(".leftImage").click(function(){a(-1,!0)}),$(".rightArrow").click(function(){a(1,!0)}),$(".rightImage").click(function(){a(1,!0)}),$(".centerImage").click(function(){var t=u[1];clearTimeout(s),"undefined"!=typeof _gaq&&t.pos!==void 0&&t.imgb!==void 0&&t.ga!==void 0&&(console.log("## click on bigbanner:"),gaq.push(["_trackEvent","BannerClick",""+t.pos]),gaq.push(["_trackEvent","Carousel","Click_"+t.pos,t.imgb]),console.log("GA: _trackEvent, BannerClick,",""+t.pos),console.log("GA: _trackEvent, Carousel, Click_"+t.pos+" | "+t.imgb+t.ga)),addKISSmetricsEvent("Carousel banner view","bigbanner",$(this)),location.href=$(this).data("url")}),$(".promos").click(function(){location.href=$(this).data("url")}),$(".centerImage").hover(function(){d=!1},function(){d=!0})}}});