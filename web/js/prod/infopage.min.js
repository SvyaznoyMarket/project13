(function(){var e=function(){var e=$(this),t=e.siblings(".links_response"),r=$(this).data("task");return e.hasClass("expanded")?(t.html(""),e.html("Ссылки"),e.removeClass("expanded")):($.get("/cron/"+r+"/links",{},function(r){r.success===!0&&(e.html("Скрыть ссылки"),t.html(r.data))}),e.addClass("expanded")),!1},t=function(){var e=$(this);return e.hasClass("expanded")?($("#report_start_response").html(""),e.html("Сгенерировать"),e.removeClass("expanded")):($.get("/cron/report",{},function(t){t.success===!0&&(e.html("Скрыть информацию"),$("#report_start_response").html(t.data))}),e.addClass("expanded")),!1};$(document).ready(function(){$(".cron_report_start").bind("click",t),$(".cronLinks").bind("click",e)})})(),function(){var e=function(e){e.preventDefault();var t=$("#subscribe-form"),r=t.serializeArray(),i=function(e){return e.success?(t.find("label").hide(),t.find("#subscribeSaleSubmit").empty().addClass("font18").html("Спасибо, уже скоро в вашей почте информация об уцененных товарах."),void 0):!1};return r.redirect_to=t.find('[name="redirect_to"]:first').val(),$.ajax({type:"POST",url:t.attr("action"),data:r,success:i}),!1};$(document).ready(function(){return $("#subscribe-form").length?($("#subscribe-form").bind("submit",e),void 0):!1})}(),$(document).ready(function(){var e=$(".subscribe-form__btn");if(e.length){var t=$(".subscribe-form"),r=$(".subscribe-form__email")||t.find('input[name="email"]'),i=t.find('input[name="channel"]').val()||1,n=function n(){var e=$(this).data("url"),n=r.val(),a=document.location.search;return n&&-1!==n.search("@")?$.post(e,{email:n,channel:i},function(e){return e.success?(t.html('<div class="subscribe-form__title">Спасибо! подтверждение подписки отправлено на указанный e-mail</div>'),window.docCookies.setItem("subscribed",i,15768e4,"/"),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","subscribe",n,a]),void 0):!1}):r.addClass("mError"),!1};e.bind("click",n)}if($(".infiniteCarousel").infiniteCarousel(),$(".getProductList").length&&$(".getProductList").each(function(){var e=$(this),t=e.data("product"),r="/products/widget/"+t;$.get(r,function(t){return t.success?(e.html(t.content),void 0):!1})}),$("#corp_select").length&&($('form[action="/b2b"]').bind("submit",function(){return"Другая форма"===$("#corp_select").find("option:selected").val()?!1:void 0}),$("#corp_select").change(function(){"Другая форма"===$(this).find("option:selected").val()&&$("#corpNotice").lightbox_me({centered:!0,closeSelector:".close"})})),$("#oneClickPromo").length){$(".halfline .bOrangeButton.active").click(function(){var e=$(this).parent().parent(),t={};t.token=e.find(".ttl").text(),t.price=e.find(".price").text(),t.image=e.find("img").attr("src"),$("#ipadwrapper").html(tmpl("ipad",t)),$("#order1click-container-new").lightbox_me({})}),$("#oneClickPromo").submit(function(e){return e.preventDefault(),!1}),$.mask!==void 0&&($.mask.definitions.n="[0-9]",$("#phonemask").mask("+7 (nnn) nnn-nn-nn"));var a=function a(e){return""===e.val().replace(/\s/g,"")?(e.addClass("mEmpty"),e.after($('<span class="mEmpty">(!) Пожалуйста, верно заполните поле</span>')),!1):(e.hasClass("mEmpty")&&(e.removeClass("mEmpty"),e.parent().find(".mEmpty").remove()),!0)};$("#oneClickPromo input[type=text]").change(function(){a($(this))});var o=function o(){$("#f_success").show(),$("#f_init").hide()},s=function s(e){$("#oneClickPromo input[type=text]").removeAttr("disabled"),$("#f_init h2").text("Произошла ошибка :( Попробуйте ещё"),e.text("Отправить предзаказ")};$(".bBigOrangeButton").click(function(e){var t=$(this),r=$("#oneClickPromo").serializeArray(),i=$("#oneClickPromo").attr("action");e.preventDefault(),$("#oneClickPromo input[type=text]").trigger("change"),$(".mEmpty").length||(t.text("Идёт отправка..."),$("#oneClickPromo input[type=text]").attr("disabled","disabled"),$.ajax({url:i,data:r,success:function(e){return"success"in e?"ok"!==e.success?(s(t),!1):(o(),!0):(s(t),!1)}}))})}if($(".bCreditLine").length){document.getElementById("requirementsFullInfoHref").style.cursor="pointer",$("#requirementsFullInfoHref").bind("click",function(){$(".bCreditLine2").toggle()});for(var l=$("#creditOptions").data("value"),c=$("#bankInfo").data("value"),u=$("#relations").data("value"),h=0;l.length>h;h++){var d=l[h];$("<option>").val(d.id).text(d.name).appendTo("#productSelector")}$("#productSelector").change(function(){var e=$(this).val(),t=u[e];$("#bankProductInfoContainer").empty();for(var r in t){var i={},n="";i.bankName=c[r].name,i.bankImage=c[r].image;for(var a in t[r]){n+="<h4>"+c[r].programs[t[r][a]].name+"</h4>\r\n<ul>";for(var o in c[r].programs[t[r][a]].params)n+="	<li>"+c[r].programs[t[r][a]].params[o]+"</li>\r\n";n+="</ul>"}i.programNames=n;var s=tmpl("bank_program_list_tmpl",i);$("#bankProductInfoContainer").append(s)}$("#bankProductInfoContainer").append('<p class="ac mb25"><a class="bBigOrangeButton" href="'+l[e-1].url+'">'+l[e-1].button_name+"</a></p>")})}if($(".bMobileApps").length){var p="",f=function f(){$(p).hide()},m=function m(e){return p=e,$(e).show(),!1};$("body").bind("click.mob",f),$("div.bMobDown").click(function(e){e.stopPropagation()}),$(".bMobDown__eClose").click(function(){return f(),!1}),$(".android-load").click(function(){return m(".android-block"),!1}),$(".iphone-load").click(function(){return m(".iphone-block"),!1}),$(".symbian-load").click(function(){return m(".symbian-block"),!1})}}),function(e){var t=$("#contentPageData").data("data"),r=$("#region_list"),i=$("#bServicesTable tbody"),n=function n(e){var r,n,a,o=t[e];if(i.empty(),o instanceof Array)for(r=0;o.length>r;r++)a="<tr><td>"+o[r]["Услуга"]+"</td>"+"<td>"+o[r]["Стоимость"]+"</td>"+"</tr>",i.append(a);else if(o instanceof Object)for(n in o)if(o.hasOwnProperty(n))for(a="<tr><th><strong>"+n+"</strong></th>"+"<th></th>"+"</tr>",i.append(a),r=0;o[n].length>r;r++)a="<tr><td>"+o[n][r]["Услуга"]+"</td>"+"<td>"+o[n][r]["Стоимость"]+"</td>"+"</tr>",i.append(a)},a=function a(e){var t,i,a;console.info("prepareData"),r.empty();for(t in e)e.hasOwnProperty(t)&&(i=$("<option>").val(t).html(t),r.prepend(i));a=r.find("option:first").val(),r.val(a),n(a)},o=function o(){var e=$(this),t=e.val();n(t)};$("#bServicesTable tr th:first").remove(),e.ENTER.utils.objLen(t)&&(a(t),r.on("change",o))}(this);