!function(){var a=function(a){a.preventDefault();var b=$("#subscribe-form"),c=b.serializeArray(),d=function(a){return a.success?(b.find("label").hide(),void b.find("#subscribeSaleSubmit").empty().addClass("font18").html("Спасибо, уже скоро в вашей почте информация об уцененных товарах.")):!1};return c.redirect_to=b.find('[name="redirect_to"]:first').val(),$.ajax({type:"POST",url:b.attr("action"),data:c,success:d}),!1};$(document).ready(function(){return $("#subscribe-form").length?void $("#subscribe-form").bind("submit",a):!1})}(),$(document).ready(function(){var a=$(".menu-item"),b=$(".subscribe-form__btn");if($.each(a,function(){var a=$(this);return a.find("a").attr("href")==location.pathname?(a.addClass("active"),!1):void 0}),b.length){var c=$(".subscribe-form"),d=$(".subscribe-form__email")||c.find('input[name="email"]'),e=c.find('input[name="channel"]').val()||1,f=function(){var a=$(this).data("url"),b=d.val(),f=(document.location.search,$(this).data("error-msg")),g={};return b&&-1!==b.search("@")?(g={email:b,channel:e},"undefined"!=typeof f&&f&&(g.error_msg=f),$.post(a,g,function(a){var d=c.find(".formErrorMsg");return a.hasOwnProperty("data")&&void 0!=typeof a.data&&c.html('<div class="subscribe-form__title">'+a.data+"</div>"),a.error&&(0==d.length?c.append($('<div class="formErrorMsg" style="margin-left: 135px; clear: both; color: red;"/>').text(a.error)):d.text(a.error).show(),c.find(".formErrorMsg").delay(2e3).slideUp(600)),a.success?(window.docCookies.setItem("subscribed",e,15768e4,"/"),void("undefined"!=typeof _gaq&&("/enter-friends"==location.pathname?_gaq.push(["_trackEvent","subscription","subscribe_enter_friends",b]):"/special_offers"==location.pathname&&_gaq.push(["_trackEvent","subscription","subscribe_special_offers",b])))):!1})):d.addClass("mError"),!1};b.bind("click",f)}if($(".infiniteCarousel").infiniteCarousel(),$("#corp_select").length&&($('form[action="/b2b"]').bind("submit",function(){return"Другая форма"===$("#corp_select").find("option:selected").val()?!1:void 0}),$("#corp_select").change(function(){"Другая форма"===$(this).find("option:selected").val()&&$("#corpNotice").lightbox_me({centered:!0,closeSelector:".close"})})),$("#oneClickPromo").length){$(".halfline .bOrangeButton.active").click(function(){var a=$(this).parent().parent(),b={};b.token=a.find(".ttl").text(),b.price=a.find(".price").text(),b.image=a.find("img").attr("src"),$("#ipadwrapper").html(tmpl("ipad",b)),$("#order1click-container-new").lightbox_me({})}),$("#oneClickPromo").submit(function(a){return a.preventDefault(),!1}),"undefined"!=typeof $.mask&&($.mask.definitions.n="[0-9]",$("#phonemask").mask("+7 (nnn) nnn-nn-nn"));var g=function(a){return""===a.val().replace(/\s/g,"")?(a.addClass("mEmpty"),a.after($('<span class="mEmpty">(!) Пожалуйста, верно заполните поле</span>')),!1):(a.hasClass("mEmpty")&&(a.removeClass("mEmpty"),a.parent().find(".mEmpty").remove()),!0)};$("#oneClickPromo input[type=text]").change(function(){g($(this))});var h=function(){$("#f_success").show(),$("#f_init").hide()},i=function(a){$("#oneClickPromo input[type=text]").removeAttr("disabled"),$("#f_init h2").text("Произошла ошибка :( Попробуйте ещё"),a.text("Отправить предзаказ")};$(".bBigOrangeButton").click(function(a){var b=$(this),c=$("#oneClickPromo").serializeArray(),d=$("#oneClickPromo").attr("action");a.preventDefault(),$("#oneClickPromo input[type=text]").trigger("change"),$(".mEmpty").length||(b.text("Идёт отправка..."),$("#oneClickPromo input[type=text]").attr("disabled","disabled"),$.ajax({url:d,data:c,success:function(a){return"success"in a?"ok"!==a.success?(i(b),!1):(h(),!0):(i(b),!1)}}))})}if($(".bCreditLine").length){document.getElementById("requirementsFullInfoHref").style.cursor="pointer";var j=$("#creditOptions").data("value"),k=$("#bankInfo").data("value"),l=$("#relations").data("value");if(j)for(var m=0;m<j.length;m++){var n=j[m];$("<option>").val(n.id).text(n.name).appendTo("#productSelector")}$("#productSelector").change(function(){var a=$(this).val(),b=l[a];$("#bankProductInfoContainer").empty();for(var c in b){var d={},e="";d.bankName=k[c].name,d.bankImage=k[c].image;for(var f in b[c]){e+="<h4>"+k[c].programs[b[c][f]].name+"</h4>\r\n<ul>";for(var g in k[c].programs[b[c][f]].params)e+="	<li>"+k[c].programs[b[c][f]].params[g]+"</li>\r\n";e+="</ul>"}d.programNames=e;var h=tmpl("bank_program_list_tmpl",d);$("#bankProductInfoContainer").append(h)}$("#bankProductInfoContainer").append('<p class="ac mb25"><a class="bBigOrangeButton" href="'+j[a-1].url+'">'+j[a-1].button_name+"</a></p>")})}if($(".bMobileApps").length){var o="",p=function(){$(o).hide()},q=function(a){return o=a,$(a).show(),!1};$("body").bind("click.mob",p),$("div.bMobDown").click(function(a){a.stopPropagation()}),$(".bMobDown__eClose").click(function(){return p(),!1}),$(".android-load").click(function(){return q(".android-block"),!1}),$(".iphone-load").click(function(){return q(".iphone-block"),!1}),$(".symbian-load").click(function(){return q(".symbian-block"),!1})}$(".d-tab").on("click",function(){var a=$(this),b=a.data("link"),c=a.parent().data("src");a.hasClass("active")||(a.parent().find(".d-tab").removeClass("active"),a.addClass("active"),$("#"+c).find(".d-table").removeClass("active"),$("#"+c).find("#"+b).addClass("active"))}),$(".js-tarifs-popup-show").on("click",function(){var a=$(".js-tarifs-popup").clone();$(".js-tarifs-popup").remove(),$("body").append('<div class="js-tarifs-overlay"></div>'),$("body").append(a).addClass("body-fixed"),$(".js-tarifs-popup").show()}),$("body").on("click",".js-tarifs-popup .popup-closer",function(){$(".js-tarifs-popup").hide(),$(".js-tarifs-overlay").remove(),$("body").removeClass("body-fixed")}),$("body").on("click",".js-tarifs-overlay",function(){$(".js-tarifs-popup").hide(),$(this).remove(),$("body").removeClass("body-fixed")}),$("body").on("keyup",".js-tarifs-search",function(){var a=$(this),b=a.val().toLowerCase(),c=!0;$(".tarifs-search__i").each(function(){var a=$(this).find(".tarifs-search__letter"),d=$(this).find(".tarifs-search-city__i"),e=!1;$(d).each(function(){var a=$(this).find(".tarifs-search-city__name").text().toLowerCase();0==a.indexOf(b)?($(this).show(),e=!0,c=!1):$(this).hide()}),e?a.show():a.hide()}),c?$(".tarifs-search__no-result").show():$(".tarifs-search__no-result").hide()})}),$(function(){function a(a){var c,e,f,g=b.services[a];if(d.empty(),g instanceof Array)for(c=0;c<g.length;c++)f="<tr><td>"+g[c]["Услуга"]+"</td><td>"+g[c]["Стоимость"]+"</td></tr>",d.append(f);else if(g instanceof Object)for(e in g)if(g.hasOwnProperty(e))for(f="<tr><th><strong>"+e+"</strong></th><th></th></tr>",d.append(f),c=0;c<g[e].length;c++)f="<tr><td>"+g[e][c]["Услуга"]+"</td><td>"+g[e][c]["Стоимость"]+"</td></tr>",d.append(f)}var b=$("#contentPageData").data("data");if(b&&ENTER.utils.objLen(b.services)){var c=$(".js-content-services-regions"),d=$(".js-content-services-tableBody");if(c.on("change",function(){a($(this).val())}),b.regionName&&c.length){var e=!1;c.find("option").each(function(){var a=$(this);a.text()&&-1!==a.text().indexOf(b.regionName)&&(e=!0,a.prop("selected",!0).change())}),e||c.find("option:first").prop("selected",!0).change()}}});