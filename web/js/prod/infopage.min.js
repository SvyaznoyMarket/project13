!function(){var a=function(){var a=$(this),b=a.siblings(".links_response"),c=$(this).data("task");return a.hasClass("expanded")?(b.html(""),a.html("Ссылки"),a.removeClass("expanded")):($.get("/cron/"+c+"/links",{},function(c){c.success===!0&&(a.html("Скрыть ссылки"),b.html(c.data))}),a.addClass("expanded")),!1},b=function(){var a=$(this);return a.hasClass("expanded")?($("#report_start_response").html(""),a.html("Сгенерировать"),a.removeClass("expanded")):($.get("/cron/report",{},function(b){b.success===!0&&(a.html("Скрыть информацию"),$("#report_start_response").html(b.data))}),a.addClass("expanded")),!1};$(document).ready(function(){$(".cron_report_start").bind("click",b),$(".cronLinks").bind("click",a)})}(),function(){var a=function(a){a.preventDefault();var b=$("#subscribe-form"),c=b.serializeArray(),d=function(a){return a.success?(b.find("label").hide(),void b.find("#subscribeSaleSubmit").empty().addClass("font18").html("Спасибо, уже скоро в вашей почте информация об уцененных товарах.")):!1};return c.redirect_to=b.find('[name="redirect_to"]:first').val(),$.ajax({type:"POST",url:b.attr("action"),data:c,success:d}),!1};$(document).ready(function(){return $("#subscribe-form").length?void $("#subscribe-form").bind("submit",a):!1})}(),$(document).ready(function(){var a=$(".subscribe-form__btn");if(a.length){var b=$(".subscribe-form"),c=$(".subscribe-form__email")||b.find('input[name="email"]'),d=b.find('input[name="channel"]').val()||1,e=function(){var a=$(this).data("url"),e=c.val(),f=document.location.search;return e&&-1!==e.search("@")?$.post(a,{email:e,channel:d},function(a){return a.success?(b.html('<div class="subscribe-form__title">Спасибо! подтверждение подписки отправлено на указанный e-mail</div>'),window.docCookies.setItem("subscribed",d,15768e4,"/"),void("undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","subscribe",e,f]))):!1}):c.addClass("mError"),!1};a.bind("click",e)}if($(".infiniteCarousel").infiniteCarousel(),$(".getProductList").length&&$(".getProductList").each(function(){var a=$(this),b=a.data("product"),c="/products/widget/"+b;$.get(c,function(b){return b.success?void a.html(b.content):!1})}),$("#corp_select").length&&($('form[action="/b2b"]').bind("submit",function(){return"Другая форма"===$("#corp_select").find("option:selected").val()?!1:void 0}),$("#corp_select").change(function(){"Другая форма"===$(this).find("option:selected").val()&&$("#corpNotice").lightbox_me({centered:!0,closeSelector:".close"})})),$("#oneClickPromo").length){$(".halfline .bOrangeButton.active").click(function(){var a=$(this).parent().parent(),b={};b.token=a.find(".ttl").text(),b.price=a.find(".price").text(),b.image=a.find("img").attr("src"),$("#ipadwrapper").html(tmpl("ipad",b)),$("#order1click-container-new").lightbox_me({})}),$("#oneClickPromo").submit(function(a){return a.preventDefault(),!1}),"undefined"!=typeof $.mask&&($.mask.definitions.n="[0-9]",$("#phonemask").mask("+7 (nnn) nnn-nn-nn"));var f=function(a){return""===a.val().replace(/\s/g,"")?(a.addClass("mEmpty"),a.after($('<span class="mEmpty">(!) Пожалуйста, верно заполните поле</span>')),!1):(a.hasClass("mEmpty")&&(a.removeClass("mEmpty"),a.parent().find(".mEmpty").remove()),!0)};$("#oneClickPromo input[type=text]").change(function(){f($(this))});var g=function(){$("#f_success").show(),$("#f_init").hide()},h=function(a){$("#oneClickPromo input[type=text]").removeAttr("disabled"),$("#f_init h2").text("Произошла ошибка :( Попробуйте ещё"),a.text("Отправить предзаказ")};$(".bBigOrangeButton").click(function(a){var b=$(this),c=$("#oneClickPromo").serializeArray(),d=$("#oneClickPromo").attr("action");a.preventDefault(),$("#oneClickPromo input[type=text]").trigger("change"),$(".mEmpty").length||(b.text("Идёт отправка..."),$("#oneClickPromo input[type=text]").attr("disabled","disabled"),$.ajax({url:d,data:c,success:function(a){return"success"in a?"ok"!==a.success?(h(b),!1):(g(),!0):(h(b),!1)}}))})}if($(".bCreditLine").length){document.getElementById("requirementsFullInfoHref").style.cursor="pointer",$("#requirementsFullInfoHref").bind("click",function(){$(".bCreditLine2").toggle()});for(var i=$("#creditOptions").data("value"),j=$("#bankInfo").data("value"),k=$("#relations").data("value"),l=0;l<i.length;l++){var m=i[l];$("<option>").val(m.id).text(m.name).appendTo("#productSelector")}$("#productSelector").change(function(){var a=$(this).val(),b=k[a];$("#bankProductInfoContainer").empty();for(var c in b){var d={},e="";d.bankName=j[c].name,d.bankImage=j[c].image;for(var f in b[c]){e+="<h4>"+j[c].programs[b[c][f]].name+"</h4>\r\n<ul>";for(var g in j[c].programs[b[c][f]].params)e+="	<li>"+j[c].programs[b[c][f]].params[g]+"</li>\r\n";e+="</ul>"}d.programNames=e;var h=tmpl("bank_program_list_tmpl",d);$("#bankProductInfoContainer").append(h)}$("#bankProductInfoContainer").append('<p class="ac mb25"><a class="bBigOrangeButton" href="'+i[a-1].url+'">'+i[a-1].button_name+"</a></p>")})}if($(".bMobileApps").length){var n="",o=function(){$(n).hide()},p=function(a){return n=a,$(a).show(),!1};$("body").bind("click.mob",o),$("div.bMobDown").click(function(a){a.stopPropagation()}),$(".bMobDown__eClose").click(function(){return o(),!1}),$(".android-load").click(function(){return p(".android-block"),!1}),$(".iphone-load").click(function(){return p(".iphone-block"),!1}),$(".symbian-load").click(function(){return p(".symbian-block"),!1})}}),function(a){var b=$("#contentPageData").data("data"),c=$("#region_list"),d=$("#bServicesTable tbody"),e=function(a){var c,e,f,g=b[a];if(d.empty(),g instanceof Array)for(c=0;c<g.length;c++)f="<tr><td>"+g[c].Услуга+"</td><td>"+g[c].Стоимость+"</td></tr>",d.append(f);else if(g instanceof Object)for(e in g)if(g.hasOwnProperty(e))for(f="<tr><th><strong>"+e+"</strong></th><th></th></tr>",d.append(f),c=0;c<g[e].length;c++)f="<tr><td>"+g[e][c].Услуга+"</td><td>"+g[e][c].Стоимость+"</td></tr>",d.append(f)},f=function(a){var b,d,f;c.empty();for(b in a)a.hasOwnProperty(b)&&(d=$("<option>").val(b).html(b),c.prepend(d));f=c.find("option:first").val(),c.val(f),e(f)},g=function(){var a=$(this),b=a.val();e(b)};$("#bServicesTable tr th:first").remove(),a.ENTER.utils.objLen(b)&&(f(b),c.on("change",g))}(this);