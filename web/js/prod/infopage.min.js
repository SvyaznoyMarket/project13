(function(){var t=function(){var t=$(this),n=t.siblings(".links_response"),e=$(this).data("task");return t.hasClass("expanded")?(n.html(""),t.html("Ссылки"),t.removeClass("expanded")):($.get("/cron/"+e+"/links",{},function(e){e.success===!0&&(t.html("Скрыть ссылки"),n.html(e.data))}),t.addClass("expanded")),!1},n=function(){var t=$(this);return t.hasClass("expanded")?($("#report_start_response").html(""),t.html("Сгенерировать"),t.removeClass("expanded")):($.get("/cron/report",{},function(n){n.success===!0&&(t.html("Скрыть информацию"),$("#report_start_response").html(n.data))}),t.addClass("expanded")),!1};$(document).ready(function(){$(".cron_report_start").bind("click",n),$(".cronLinks").bind("click",t)})})(),function(){var t=function(t){t.preventDefault();var n=$("#subscribe-form"),e=n.serializeArray(),r=function(t){return t.success?(n.find("label").hide(),n.find("#subscribeSaleSubmit").empty().addClass("font18").html("Спасибо, уже скоро в вашей почте информация об уцененных товарах."),void 0):!1};return e.redirect_to=n.find('[name="redirect_to"]:first').val(),$.ajax({type:"POST",url:n.attr("action"),data:e,success:r}),!1};$(document).ready(function(){return $("#subscribe-form").length?($("#subscribe-form").bind("submit",t),void 0):!1})}(),$(document).ready(function(){var t=$(".subscribe-form__btn");if(t.length){var n=$(".subscribe-form"),e=$(".subscribe-form__email")||n.find('input[name="email"]'),r=n.find('input[name="channel"]').val()||1,i=function i(){var t=$(this).data("url"),i=e.val(),a=document.location.search;return i&&-1!==i.search("@")?$.post(t,{email:i,channel:r},function(t){return t.success?(n.html('<div class="subscribe-form__title">Спасибо! подтверждение подписки отправлено на указанный e-mail</div>'),window.docCookies.setItem("subscribed",r,15768e4,"/"),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","subscribe",i,a]),void 0):!1}):e.addClass("mError"),!1};t.bind("click",i)}if($(".infiniteCarousel").infiniteCarousel(),$(".getProductList").length&&$(".getProductList").each(function(){var t=$(this),n=t.data("product"),e="/products/widget/"+n;$.get(e,function(n){return n.success?(t.html(n.content),void 0):!1})}),$("#corp_select").length&&($('form[action="/b2b"]').bind("submit",function(){return"Другая форма"===$("#corp_select").find("option:selected").val()?!1:void 0}),$("#corp_select").change(function(){"Другая форма"===$(this).find("option:selected").val()&&$("#corpNotice").lightbox_me({centered:!0,closeSelector:".close"})})),$("#oneClickPromo").length){$(".halfline .bOrangeButton.active").click(function(){var t=$(this).parent().parent(),n={};n.token=t.find(".ttl").text(),n.price=t.find(".price").text(),n.image=t.find("img").attr("src"),$("#ipadwrapper").html(tmpl("ipad",n)),$("#order1click-container-new").lightbox_me({})}),$("#oneClickPromo").submit(function(t){return t.preventDefault(),!1}),$.mask!==void 0&&($.mask.definitions.n="[0-9]",$("#phonemask").mask("+7 (nnn) nnn-nn-nn"));var a=function a(t){return""===t.val().replace(/\s/g,"")?(t.addClass("mEmpty"),t.after($('<span class="mEmpty">(!) Пожалуйста, верно заполните поле</span>')),!1):(t.hasClass("mEmpty")&&(t.removeClass("mEmpty"),t.parent().find(".mEmpty").remove()),!0)};$("#oneClickPromo input[type=text]").change(function(){a($(this))});var o=function o(){$("#f_success").show(),$("#f_init").hide()},s=function s(t){$("#oneClickPromo input[type=text]").removeAttr("disabled"),$("#f_init h2").text("Произошла ошибка :( Попробуйте ещё"),t.text("Отправить предзаказ")};$(".bBigOrangeButton").click(function(t){var n=$(this),e=$("#oneClickPromo").serializeArray(),r=$("#oneClickPromo").attr("action");t.preventDefault(),$("#oneClickPromo input[type=text]").trigger("change"),$(".mEmpty").length||(n.text("Идёт отправка..."),$("#oneClickPromo input[type=text]").attr("disabled","disabled"),$.ajax({url:r,data:e,success:function(t){return"success"in t?"ok"!==t.success?(s(n),!1):(o(),!0):(s(n),!1)}}))})}if($(".bCreditLine").length){document.getElementById("requirementsFullInfoHref").style.cursor="pointer",$("#requirementsFullInfoHref").bind("click",function(){$(".bCreditLine2").toggle()});for(var c=$("#creditOptions").data("value"),l=$("#bankInfo").data("value"),d=$("#relations").data("value"),u=0;c.length>u;u++){var p=c[u];$("<option>").val(p.id).text(p.name).appendTo("#productSelector")}$("#productSelector").change(function(){var t=$(this).val(),n=d[t];$("#bankProductInfoContainer").empty();for(var e in n){var r={},i="";r.bankName=l[e].name,r.bankImage=l[e].image;for(var a in n[e]){i+="<h4>"+l[e].programs[n[e][a]].name+"</h4>\r\n<ul>";for(var o in l[e].programs[n[e][a]].params)i+="	<li>"+l[e].programs[n[e][a]].params[o]+"</li>\r\n";i+="</ul>"}r.programNames=i;var s=tmpl("bank_program_list_tmpl",r);$("#bankProductInfoContainer").append(s)}$("#bankProductInfoContainer").append('<p class="ac mb25"><a class="bBigOrangeButton" href="'+c[t-1].url+'">'+c[t-1].button_name+"</a></p>")})}if($(".bMobileApps").length){var f="",m=function m(){$(f).hide()},b=function b(t){return f=t,$(t).show(),!1};$("body").bind("click.mob",m),$("div.bMobDown").click(function(t){t.stopPropagation()}),$(".bMobDown__eClose").click(function(){return m(),!1}),$(".android-load").click(function(){return b(".android-block"),!1}),$(".iphone-load").click(function(){return b(".iphone-block"),!1}),$(".symbian-load").click(function(){return b(".symbian-block"),!1})}}),function(t){var n=$("#contentPageData").data("data"),e=$("#region_list"),r=$("#bServicesTable tbody"),i=function i(t){var e,i,a,o=n[t];if(r.empty(),o instanceof Array)for(e=0;o.length>e;e++)a="<tr><td>"+o[e]["Услуга"]+"</td>"+"<td>"+o[e]["Стоимость"]+"</td>"+"</tr>",r.append(a);else if(o instanceof Object)for(i in o)if(o.hasOwnProperty(i))for(a="<tr><th><strong>"+i+"</strong></th>"+"<th></th>"+"</tr>",r.append(a),e=0;o[i].length>e;e++)a="<tr><td>"+o[i][e]["Услуга"]+"</td>"+"<td>"+o[i][e]["Стоимость"]+"</td>"+"</tr>",r.append(a)},a=function a(t){var n,r,a;console.info("prepareData"),e.empty();for(n in t)t.hasOwnProperty(n)&&(r=$("<option>").val(n).html(n),e.prepend(r));a=e.find("option:first").val(),e.val(a),i(a)},o=function o(){var t=$(this),n=t.val();i(n)};$("#bServicesTable tr th:first").remove(),t.ENTER.utils.objLen(n)&&(a(n),e.on("change",o))}(this);