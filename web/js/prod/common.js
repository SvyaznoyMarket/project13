
;$(function($){var $body=$(document.body),searchUrl='/search/autocomplete',switchCookie=JSON.parse(docCookies.getItem('switch')),advSearchEnabled=switchCookie&&switchCookie.adv_search=='on';function SearchModel(){var self=this;self.searchInput=ko.observable('');self.searchFocus=ko.observable(false);self.searchResults=ko.observableArray();self.advancedSearch=ko.observable(advSearchEnabled);self.searchCategoryVisible=ko.observable(false);self.currentCategory=ko.observable(null);self.previousCategory=ko.observable(null);self.searchResultCategories=ko.observableArray();self.searchResultProducts=ko.observableArray();self.isNoSearchResult=ko.computed(function(){return self.searchResultCategories().length==0&&self.searchResultProducts().length==0});self.toggleCategoryVisibility=function(){self.searchCategoryVisible(!self.searchCategoryVisible());};self.searchResultNavigation=function(data,e){var keycode=e.which,$links=$('.jsSearchbarResults a'),activeClass='searchdd_lk_iact',index=$links.index($links.filter('.'+activeClass));if(!self.isNoSearchResult()){$links.removeClass(activeClass);switch(keycode){case 13:if(index>-1){window.location.href=$links.eq(index).attr('href');return false;}
break;case 38:$links.eq(index-1).addClass(activeClass);break;case 40:$links.eq(index+1).addClass(activeClass);break}}
return true;};self.categoryClick=function(data,event){var category=$(event.target).data('value');self.currentCategory(category);self.toggleCategoryVisibility();};self.categoryReset=function(){self.currentCategory(null);self.toggleCategoryVisibility();};self.searchResultsVisibility=ko.computed(function(){return self.searchFocus()}).extend({throttle:200});ko.computed(function(){var val=self.searchInput();var params={q:val,sender:'knockout'};if(self.currentCategory()!=null)params.catId=self.currentCategory().id;if(val.length<3)return;$.get(searchUrl,params).done(function(data){self.searchResultCategories(data.result.categories);self.searchResultProducts(data.result.products);}).fail(function(){console.error("could not retrieve value from server");});}).extend({throttle:200});self.currentCategory.subscribe(function(val){self.previousCategory(val);},self,'beforeChange');self.currentCategory.subscribe(function(val){var previous=self.previousCategory()===null?'':self.previousCategory().name;if(val==null){$body.trigger('trackGoogleEvent',['search_scope','clear',previous])}else{if(self.previousCategory()==null){$body.trigger('trackGoogleEvent',['search_scope','change',val.name+'_'+'Все товары'])}else{$body.trigger('trackGoogleEvent',['search_scope','change',val.name+'_'+previous])}}});return self;}
$body.find('.jsKnockoutSearch').each(function(){ko.applyBindings(new SearchModel(),this);});$body.on('focus','.jsSearchInput',function(){$body.trigger('trackGoogleEvent',['search_string','string'])});$body.on('click','.jsSearchSuggestCategory',function(e){e.preventDefault();$body.trigger('trackGoogleEvent',[{category:'search_string',action:'suggest',label:'category',hitCallback:$(this).attr('href')}])});$body.on('click','.jsSearchSuggestProduct',function(e){e.preventDefault();$body.trigger('trackGoogleEvent',[{category:'search_string',action:'suggest',label:'item',hitCallback:$(this).attr('href')}])});}(jQuery));
;(function($){ko.bindingHandlers.buyButtonBinding={update:function(element,valueAccessor){var cart=ko.unwrap(valueAccessor()),$elem=$(element),productId=$elem.data('product-id'),inShopStockOnly=$elem.data('in-shop-stock-only'),inShopShowroomOnly=$elem.data('in-shop-showroom-only'),isBuyable=$elem.data('is-buyable'),statusId=$elem.data('status-id'),noUpdate=$elem.data('noUpdate');if(typeof isBuyable!='undefined'&&!isBuyable){$elem.text(typeof inShopShowroomOnly!='undefined'&&inShopShowroomOnly?'На витрине':'Нет').addClass('mDisabled').removeClass('mShopsOnly').removeClass('mBought').addClass('jsBuyButton').attr('href','#');}else if(typeof statusId!='undefined'&&5==statusId){$elem.text('Купить').addClass('mDisabled').removeClass('mShopsOnly').removeClass('mBought').addClass('jsBuyButton').attr('href','#');}else if(typeof inShopStockOnly!='undefined'&&inShopStockOnly&&ENTER.config.pageConfig.user.region.forceDefaultBuy){$elem.text('Резерв').removeClass('mDisabled').addClass('mShopsOnly').removeClass('mBought').removeClass('jsBuyButton').attr('href',ENTER.utils.generateUrl('cart.oneClick.product.set',{productId:productId}));}else if(ENTER.utils.getObjectWithElement(cart,'id',productId)&&!noUpdate){$elem.text('В корзине').removeClass('mDisabled').removeClass('mShopsOnly').addClass('mBought').removeClass('jsBuyButton').attr('href',ENTER.utils.generateUrl('cart'));}else if($elem.hasClass('mBought')){$elem.text('Купить').removeClass('mDisabled').removeClass('mShopsOnly').removeClass('mBought').addClass('jsBuyButton').attr('href',ENTER.utils.generateUrl('cart.product.set',{productId:productId}));}}};ko.bindingHandlers.buySpinnerBinding={update:function(element,valueAccessor){var cart=ko.unwrap(valueAccessor()),$elem=$(element);$elem.removeClass('mDisabled').find('input').attr('disabled',false);$.each(cart,function(key,value){if(this.id==$elem.data('product-id')){$elem.addClass('mDisabled');$elem.find('input').val(value.quantity()).attr('disabled',true);}})}};ko.bindingHandlers.compareButtonBinding={update:function(element,valueAccessor){var compare=ko.unwrap(valueAccessor()),$elem=$(element),productId=$elem.data('id'),typeId=$elem.data('type-id'),comparableProducts;if(ENTER.utils.getObjectWithElement(compare,'id',productId)){$elem.addClass('btnCmpr-act').find('a.btnCmpr_lk').addClass('btnCmpr_lk-act').attr('href',ENTER.utils.generateUrl('compare.delete',{productId:productId})).find('span').text('Убрать из сравнения');}else{$elem.removeClass('btnCmpr-act').find('a.btnCmpr_lk').removeClass('btnCmpr_lk-act').attr('href',ENTER.utils.generateUrl('compare.add',{productId:productId})).find('span').text('Добавить к сравнению');}
comparableProducts=$.grep(compare,function(val){return typeId==val.typeId;});if(comparableProducts.length>1){$elem.find('.btnCmpr_more').show().find('.btnCmpr_more_qn').text(comparableProducts.length);}else{$elem.find('.btnCmpr_more').hide();}}};ko.bindingHandlers.compareListBinding={update:function(element,valueAccessor){var compare=ko.unwrap(valueAccessor()),$elem=$(element),productId=$elem.data('id');if(ENTER.utils.getObjectWithElement(compare,'id',productId)){$elem.addClass('btnCmprb-act').attr('href',ENTER.utils.generateUrl('compare.delete',{productId:productId}));}else{$elem.removeClass('btnCmprb-act').attr('href',ENTER.utils.generateUrl('compare.add',{productId:productId}));}}};}(jQuery));
;$(function(){var $body=$(document.body),region=ENTER.config.pageConfig.user.region.name,userInfoURL=ENTER.config.pageConfig.userUrl.addParameterToUrl('ts',new Date().getTime()+Math.floor(Math.random()*1000)),authorized_cookie='_authorized',startTime,endTime,spendTime,$compareNotice,compareNoticeTimeout;function createCartModel(cart){var model={};$.each(cart,function(key,value){model[key]=value;});model.quantity=ko.observable(cart.quantity);return model;}
function createUserModel(){var model={};model.name=ko.observable();model.firstName=ko.observable();model.lastName=ko.observable();model.link=ko.observable();model.isEnterprizeMember=ko.observable();model.isUpdated=ko.observable(false);model.cart=ko.observableArray();model.cartSum=ko.computed(function(){var sum=0;$.each(model.cart(),function(i,val){sum+=val.price*val.quantity()});return sum;});model.compare=ko.observableArray();model.isProductInCompare=function(elem){console.log('isProductInCompare',elem);return $.grep(model.compare,function(val){return val.id==$(elem).data('id')}).length==0};model.update=function(data){if(data.user){if(data.user.name)model.name(data.user.name);if(data.user.firstName)model.firstName(data.user.firstName);if(data.user.lastName)model.lastName(data.user.lastName);if(data.user.link)model.link(data.user.link);if(data.user.isEnterprizeMember)model.isEnterprizeMember(data.user.isEnterprizeMember);}
if(data.cartProducts&&$.isArray(data.cartProducts)){$.each(data.cartProducts,function(i,val){model.cart.unshift(createCartModel(val))});}
if(data.compare){$.each(data.compare,function(i,val){model.compare.push(val)})}
model.isUpdated(true);$body.trigger('userModelUpdate')};model.productQuantityUpdate=function(product_id,count){$.each(model.cart(),function(i,val){if(product_id==val.id)val.quantity(count)})};model.removeProductByID=function(product_id){model.cart.remove(function(item){return item.id==product_id});(function(){var giftBuyProducts=docCookies.getItem('giftBuyProducts')||'';if(giftBuyProducts){docCookies.setItem('giftBuyProducts',giftBuyProducts.replace(new RegExp('(^|\\s+)'+product_id+'(\\s+|$)','g'),' ').replace(/^\s+|\s+$/g,''),30*24*60,'/','enter.ru');}})();};model.infoIconVisible=ko.observable(false);model.infoBlock_1Visible=ko.computed(function(){return ENTER.config.pageConfig.selfDeliveryTest&&ENTER.config.pageConfig.selfDeliveryLimit>model.cartSum();});model.infoBlock_2Visible=ko.computed(function(){return ENTER.config.pageConfig.selfDeliveryTest&&ENTER.config.pageConfig.selfDeliveryLimit<=model.cartSum()&&docCookies.hasItem('enter_ab_self_delivery_view_info');});return model;}
function showCompareNotice(product){var compareNoticeShowClass='topbarfix_cmpr_popup-show';if(!$compareNotice){var $userbar=ENTER.userBar.userBarFixed;$compareNotice=$('.js-compare-addPopup',$userbar);$('.js-compare-addPopup-closer',$compareNotice).click(function(){$compareNotice.removeClass(compareNoticeShowClass);});$('.js-topbarfixLogin, .js-topbarfixNotEmptyCart',$userbar).mouseover(function(){$compareNotice.removeClass(compareNoticeShowClass);});$('html').click(function(){$compareNotice.removeClass(compareNoticeShowClass);});$($compareNotice).click(function(e){e.stopPropagation();});$(document).keyup(function(e){if(e.keyCode==27){$compareNotice.removeClass(compareNoticeShowClass);}});}
if(compareNoticeTimeout){clearTimeout(compareNoticeTimeout);}
compareNoticeTimeout=setTimeout(function(){$compareNotice.removeClass(compareNoticeShowClass);},2000);$('.js-compare-addPopup-image',$compareNotice).attr('src',product.imageUrl);$('.js-compare-addPopup-prefix',$compareNotice).text(product.prefix);$('.js-compare-addPopup-webName',$compareNotice).text(product.webName);ENTER.userBar.show(true,function(){$compareNotice.addClass(compareNoticeShowClass)});}
ENTER.UserModel=createUserModel();$('.js-topbarfix, .js-WidgetBuy, .js-listing, .js-jewelListing, .js-gridListing, .js-lineListing, .js-slider, .jsKnockoutCart').each(function(){ko.applyBindings(ENTER.UserModel,this);});$.ajax({url:userInfoURL,beforeSend:function(){startTime=new Date().getTime();},success:function(data){endTime=new Date().getTime();spendTime=endTime-startTime;ENTER.UserModel.update(data);if(typeof ga=='function'){ga('send','timing','userInfo','Load User Info',spendTime);console.log('[Google Analytics] Send user/info timing: %s ms',spendTime)}
ENTER.config.userInfo=data;if(!docCookies.hasItem(authorized_cookie)){if(data&&null!==data.id){docCookies.setItem(authorized_cookie,1,60*60,'/');}else{docCookies.setItem(authorized_cookie,0,60*60,'/');}}
$body.trigger('userLogged',[data]);}});$body.on('catalogLoadingComplete',function(){$('.js-listing, .js-jewelListing').each(function(){ko.cleanNode(this);ko.applyBindings(ENTER.UserModel,this);});});$body.on('click','.jsCompareLink, .jsCompareListLink',function(e){var url=this.href,productId=$(this).data('id'),inCompare=$(this).hasClass('btnCmprb-act');if($(this).hasClass('jsCompareListLink')){url=inCompare?ENTER.utils.generateUrl('compare.delete',{productId:productId}):ENTER.utils.generateUrl('compare.add',{productId:productId});}
e.preventDefault();$.ajax({url:url,success:function(data){if(data.compare){ENTER.UserModel.compare.removeAll();$.each(data.compare,function(i,val){ENTER.UserModel.compare.push(val)});if(!inCompare){showCompareNotice(data.product);}}}})});$body.on('addtocart',function(event,data){if(data.redirect){console.warn('redirect');document.location.href=data.redirect;}else{var products=data.products||[],cart=ENTER.UserModel.cart();if(data.product){products.push(data.product);}
$.each(products,function(key,value){var productInCart=ENTER.utils.getObjectWithElement(cart,'id',value.id);if(productInCart){productInCart.quantity(value.quantity);}else{ENTER.UserModel.cart.unshift(createCartModel(value));}});}});$body.on('mouseover','.btnBuy-inf',function(){if(!docCookies.hasItem('enter_ab_self_delivery_view_info')){docCookies.setItem('enter_ab_self_delivery_view_info',true);if(ENTER.UserModel.cartSum()<ENTER.config.pageConfig.selfDeliveryLimit)$body.trigger('trackGoogleEvent',['Платный_самовывоз_'+region,'увидел всплывашку платный самовывоз','всплывающая корзина']);if(ENTER.UserModel.cartSum()>=ENTER.config.pageConfig.selfDeliveryLimit)$body.trigger('trackGoogleEvent',['Платный_самовывоз_'+region,'самовывоз бесплатно','всплывающая корзина']);}
ENTER.UserModel.infoIconVisible(false);});$body.on('showUserCart',function(e){var $target=$(e.target);if(ENTER.config.pageConfig.selfDeliveryTest&&ENTER.UserModel.infoIconVisible())$body.trigger('trackGoogleEvent',['Платный_самовывоз_'+region,'увидел подсказку','всплывающая корзина']);else if(ENTER.config.pageConfig.selfDeliveryTest&&!ENTER.UserModel.infoIconVisible())$body.trigger('trackGoogleEvent',['Платный_самовывоз_'+region,'не увидел подсказку','всплывающая корзина']);if(ENTER.config.pageConfig.selfDeliveryTest){if(!docCookies.hasItem('enter_ab_self_delivery_view_info')&&ENTER.UserModel.cartSum()<ENTER.config.pageConfig.selfDeliveryLimit){ENTER.UserModel.infoIconVisible(true);}}
if(ENTER.config.pageConfig.selfDeliveryTest&&ENTER.UserModel.infoBlock_2Visible()&&!ENTER.UserModel.infoIconVisible()){$body.trigger('trackGoogleEvent',['Платный_самовывоз_'+region,'самовывоз бесплатно','всплывающая корзина']);}});$body.on('userModelUpdate',function(e){if(ENTER.config.pageConfig.selfDeliveryTest){if(!docCookies.hasItem('enter_ab_self_delivery_view_info')&&ENTER.UserModel.cartSum()<ENTER.config.pageConfig.selfDeliveryLimit){ENTER.UserModel.infoIconVisible(true);}}});$body.on('click','.jsAbSelfDeliveryLink',function(e){var href=e.target.href;if(href){e.preventDefault();$body.trigger('trackGoogleEvent',{category:'Платный_самовывоз_'+region,action:'добрать товар',label:'всплывающая корзина',hitCallback:function(){window.location.href=href;}})}});});
;(function(window,document,$,ENTER){$.ajaxSetup({timeout:20000,statusCode:{404:function(){var ajaxUrl=this.url,data={event:'ajax_error',type:'404 ошибка',ajaxUrl:ajaxUrl};if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Errors','Ajax Errors','404 ошибка, страница не найдена']);}},401:function(){if($('#auth-block').length){$('#auth-block').lightbox_me({centered:true,onLoad:function(){$('#auth-block').find('input:first').focus();}});}
else{if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Errors','Ajax Errors','401 ошибка, авторизуйтесь заново']);}}},500:function(){var ajaxUrl=this.url,data={event:'ajax_error',type:'500 ошибка',ajaxUrl:ajaxUrl};if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Errors','Ajax Errors','500 сервер перегружен']);}},503:function(){var ajaxUrl=this.url,data={event:'ajax_error',type:'503 ошибка',ajaxUrl:ajaxUrl};if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Errors','Ajax Errors','503 ошибка, сервер перегружен']);}},504:function(){var ajaxUrl=this.url,data={event:'ajax_error',type:'504 ошибка',ajaxUrl:ajaxUrl};if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Errors','Ajax Errors','504 ошибка, проверьте соединение с интернетом']);}}},error:function(jqXHR,textStatus,errorThrown){var ajaxUrl=this.url,data={event:'ajax_error',type:'неизвестная ajax ошибка',ajaxUrl:ajaxUrl};if(jqXHR.statusText==='error'){if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Errors','Ajax Errors','неизвестная ajax ошибка']);}}
else if(textStatus==='timeout'){return;}}});}(this,this.document,this.jQuery,this.ENTER));
;(function($){var body=$(document.body),ga=this.ga,_gaq=this._gaq,trackGoogleEvent=function trackGoogleEventF(jQueryEvent,eventObject){var e={},universalEvent={hitType:'event'},classicEvent=['_trackEvent'],props=['category','action','label','value','nonInteraction','hitCallback'];if(arguments.length==2&&typeof eventObject=='object'){$.each(props,function(i,elem){if(eventObject.hasOwnProperty(elem))e[elem]=eventObject[elem];})}else if(arguments.length>2&&typeof eventObject=='string'){for(var i=1,l=arguments.length;i<l;i++){e[props[i-1]]=arguments[i];}}
$.each(props,function(i,elem){if(e.hasOwnProperty(elem)){switch(elem){case'category':e[elem]=e[elem].slice(0,150);break;case'action':case'label':e[elem]=e[elem].slice(0,500);break;case'value':e[elem]=parseInt(e[elem].slice,10);break;case'nonInteraction':e[elem]=Boolean(e[elem]);break;}}});if(typeof _gaq==='object'){classicEvent.push(e.category,e.action);classicEvent.push(e.label?e.label:null);classicEvent.push(e.value?e.value:null);if(e.nonInteraction)classicEvent.push(e.nonInteraction);_gaq.push(classicEvent);}else{console.warn('No Google Analytics object found')}
if(typeof ga==='function'&&typeof ga.getAll=='function'&&ga.getAll().length!=0){universalEvent.eventCategory=e.category;universalEvent.eventAction=e.action;if(e.label)universalEvent.eventLabel=e.label;if(e.value)universalEvent.eventValue=e.value;if(typeof e.hitCallback=='function')universalEvent.hitCallback=e.hitCallback;else if(typeof e.hitCallback=='string')universalEvent.hitCallback=function(){window.location.href=e.hitCallback};if(e.nonInteraction)ga('set','nonInteraction',true);ga('send',universalEvent);console.info('[Google Analytics] Send event:',e);}else{console.warn('No Universal Google Analytics function found',typeof universalEvent.hitCallback,e.hitCallback);if(typeof e.hitCallback=='function')e.hitCallback();else if(typeof e.hitCallback=='string')window.location.href=e.hitCallback;}},GoogleTransaction=function GoogleTransactionF(data){this.id=data.id?data.id:false;this.affiliation=data.affiliation;this.total=data.total;this.shipping=data.shipping?data.shipping:'0';this.tax=data.tax?data.tax:'0';this.city=data.city?data.city:'';if(!this.id)throw'Некорректный ID транзакции';if(!this.total)throw'Некорректная сумма заказа';this.toObject=function toObjectF(){return{'id':this.id,'affiliation':this.affiliation,'revenue':this.total,'shipping':this.shipping,'tax':this.tax}};this.toArray=function toArrayF(){return[this.id,this.affiliation,this.total,this.tax,this.shipping,this.city]};return this;},GoogleProduct=function GoogleProductF(data,transaction_id){this.id=transaction_id?String(transaction_id):'';this.name=data.name?String(data.name):'';this.category=data.category?String(data.category):'';this.sku=data.sku?String(data.sku):'';this.price=data.price?String(data.price):'';this.quantity=data.quantity?String(data.quantity):'';if(!this.id)throw'Некорректный ID товара';if(!this.name)throw'Некорректное название товара';if(!this.price)throw'Некорректная цена товара';if(!this.quantity)throw'Некорректное количество товара';this.toObject=function toObjectF(){return{'id':this.id,'name':this.name,'sku':this.sku,'category':this.category,'price':this.price,'quantity':this.quantity}};this.toArray=function toArrayF(){return[this.id,this.sku,this.name,this.category,this.price,this.quantity];};return this;},trackGoogleTransaction=function trackGoogleTransactionF(jQueryEvent,eventObject){var googleTrans,googleProducts;try{googleTrans=new GoogleTransaction(eventObject.transaction);googleProducts=$.map(eventObject.products,function(elem){return new GoogleProduct(elem,googleTrans.id)});if(typeof _gaq==='object'){_gaq.push(['_addTrans'].concat(googleTrans.toArray()));$.each(googleProducts,function(i,product){_gaq.push(['_addItem'].concat(product.toArray()))});_gaq.push(['_trackTrans']);}else{console.warn('No Google Analytics object found')}
if(typeof ga==='function'&&ga.getAll().length!=0){ga('require','ecommerce','ecommerce.js');ga('ecommerce:addTransaction',googleTrans.toObject());$.each(googleProducts,function(i,product){ga('ecommerce:addItem',product.toObject())});ga('ecommerce:send');}else{console.warn('No Universal Google Analytics function found');}}catch(exception){console.error('[Google Analytics Ecommerce] %s',exception)}},sendOrderToGA=function sendOrderF(orderData){var
oData=orderData||{orders:[]},giftBuyProducts=(docCookies.getItem('giftBuyProducts')||'').split(' ');docCookies.setItem('giftBuyProducts','',0,'/','enter.ru');console.log('[Google Analytics] Start processing orders',oData.orders);$.each(oData.orders,function(i,o){var googleOrderTrackingData={};googleOrderTrackingData.transaction={'id':o.numberErp,'affiliation':o.is_partner?'Партнер':'Enter','total':o.paySum,'shipping':o.delivery[0].price,'city':o.region.name};googleOrderTrackingData.products=$.map(o.products,function(p){var
productName=p.name,labels=[];if(o.is_partner){labels.push('marketplace');}
if(giftBuyProducts.indexOf(p.id+'')!=-1){labels.push('gift');}
if(p.sender&&p.position){labels.push('RR_'+p.position);}
if(labels.length){productName+=' ('+labels.join(', ')+')';}
if(ENTER.config.pageConfig.selfDeliveryTest&&ENTER.config.pageConfig.selfDeliveryLimit>parseInt(o.paySum,10)-o.delivery[0].price)productName=productName+' (paid pickup)';if(p.sender){if(p.from)body.trigger('trackGoogleEvent',['RR_покупка','Купил просмотренные',p.position||'']);else body.trigger('trackGoogleEvent',['RR_покупка','Купил добавленные',p.position||'']);}
return{'id':p.id,'name':productName,'sku':p.article,'category':p.category[0].name+' - '+p.category[p.category.length-1].name,'price':p.price,'quantity':p.quantity}});console.log('[Google Analytics] Order',googleOrderTrackingData);body.trigger('trackGoogleTransaction',[googleOrderTrackingData]);});};ENTER.utils.sendOrderToGA=sendOrderToGA;if(typeof ga==='undefined')ga=window[window['GoogleAnalyticsObject']];body.on('trackGoogleEvent',trackGoogleEvent);body.on('trackGoogleTransaction',trackGoogleTransaction);try{if(typeof ga==='function'&&typeof ga.getAll=='function'&&ga.getAll().length==0){console.warn('Creating ga tracker');ga('create','UA-25485956-5','enter.ru');}}catch(e){console.error(e);}})(jQuery);
(function(){var checkedSms=false;var checkedEmail=false;var handleSubscribeSms=function(){if(checkedSms){$('#mobilePhoneWrapper').hide();$('#mobilePhoneWrapper').parent().find('.red').html('');checkedSms=false;}else{$('#mobilePhoneWrapper').show();checkedSms=true;}};var handleSubscribeEmail=function(){if(checkedEmail){$('#emailWrapper').hide();$('#emailWrapper').parent().find('.red').html('');checkedEmail=false;}else{$('#emailWrapper').show();checkedEmail=true;}};$(document).ready(function(){checkedSms=$('.smsCheckbox').hasClass('checked');if(!$('#user_mobile_phone').val()){$('.smsCheckbox').bind('click',handleSubscribeSms);}
checkedEmail=$('.emailCheckbox').hasClass('checked');if(!$('#user_email').val()){$('.emailCheckbox').bind('click',handleSubscribeEmail);}});}());

(function(ENTER){var body=$('body');body.on('click','.jsBuyButton',function(event){var button=$(this);body.trigger('TL_buyButton_clicked');if(button.hasClass('mDisabled')){event.preventDefault();}
if(button.hasClass('mBought')){document.location.href(button.attr('href'));event.preventDefault();}
button.addClass('mLoading');$.ajax({url:button.attr('href'),type:'GET',success:function(data){var
upsale=button.data('upsale')?button.data('upsale'):null,product=button.parents('.jsSliderItem').data('product');if(!data.success){return;}
button.removeClass('mLoading');if(data.product){data.product.isUpsale=product&&product.isUpsale?true:false;data.product.fromUpsale=upsale&&upsale.fromUpsale?true:false;}
body.trigger('addtocart',[data,upsale]);},error:function(){button.removeClass('mLoading');}});event.preventDefault();});body.on('addtocart',function(event,data){var
kissAnalytics=function kissAnalytics(event,data){var productData=data.product,serviceData=data.service,warrantyData=data.warranty,nowUrl=window.location.href,toKISS={};if(typeof _kmq==='undefined'){return;}
if(productData){toKISS={'Add to Cart SKU':productData.article,'Add to Cart SKU Quantity':productData.quantity,'Add to Cart Product Name':productData.name,'Add to Cart Root category':productData.category[0].name,'Add to Cart Root ID':productData.category[0].id,'Add to Cart Category name':(productData.category)?productData.category[productData.category.length-1].name:0,'Add to Cart Category ID':(productData.category)?productData.category[productData.category.length-1].id:0,'Add to Cart SKU Price':productData.price,'Add to Cart Page URL':nowUrl,'Add to Cart F1 Quantity':productData.serviceQuantity};_kmq.push(['record','Add to Cart',toKISS]);productData.isUpsale&&_kmq.push(['record','cart rec added from rec',{'SKU cart added from rec':productData.article}]);productData.fromUpsale&&_kmq.push(['record','cart recommendation added',{'SKU cart rec added':productData.article}]);}
if(serviceData){toKISS={'Add F1 F1 Name':serviceData.name,'Add F1 F1 Price':serviceData.price,'Add F1 SKU':productData.article,'Add F1 Product Name':productData.name,'Add F1 Root category':productData.category[0].name,'Add F1 Root ID':productData.category[0].id,'Add F1 Category name':(productData.category)?productData.category[productData.category.length-1].name:0,'Add F1 Category ID':(productData.category)?productData.category[productData.category.length-1].id:0};_kmq.push(['record','Add F1',toKISS]);}
if(warrantyData){toKISS={'Add Warranty Warranty Name':warrantyData.name,'Add Warranty Warranty Price':warrantyData.price,'Add Warranty SKU':productData.article,'Add Warranty Product Name':productData.name,'Add Warranty Root category':productData.category[0].name,'Add Warranty Root ID':productData.category[0].id,'Add Warranty Category name':(productData.category)?productData.category[productData.category.length-1].name:0,'Add Warranty Category ID':(productData.category)?productData.category[productData.category.length-1].id:0};_kmq.push(['record','Add Warranty',toKISS]);}},googleAnalytics=function googleAnalytics(event,data){var
productData=data.product,ga_action;var
tchiboGA=function(){if(typeof window.ga==="undefined"||!productData.hasOwnProperty("isTchiboProduct")||!productData.isTchiboProduct){return;}
console.log("TchiboGA: tchiboTracker.send event Add2Basket product [%s, %s]",productData.name,productData.article);ga("tchiboTracker.send","event","Add2Basket",productData.name,productData.article);};if(!productData||typeof _gaq==='undefined'){return;}
tchiboGA();if(productData.article){ga_action=typeof productData.price!='undefined'&&parseInt(productData.price,10)<500?'product-500':'product';body.trigger('trackGoogleEvent',['Add2Basket',ga_action,productData.article]);}
productData.isUpsale&&_gaq.push(['_trackEvent','cart_recommendation','cart_rec_added_from_rec',productData.article]);productData.fromUpsale&&_gaq.push(['_trackEvent','cart_recommendation','cart_rec_added_to_cart',productData.article]);try{var sender=data.sender;console.info({sender:sender});if(sender&&('retailrocket'==sender.name)){body.trigger('trackGoogleEvent',['RR_Взаимодействие','Добавил в корзину',sender.position]);}}catch(e){console.error(e);}},adAdriver=function adAdriver(event,data){var productData=data.product,offer_id=productData.id,category_id=(productData.category)?productData.category[productData.category.length-1].id:0,s='http://ad.adriver.ru/cgi-bin/rle.cgi?sid=182615&sz=add_basket&custom=10='+offer_id+';11='+category_id+'&bt=55&pz=0&rnd=![rnd]',d=document,i=d.createElement('IMG'),b=d.body;s=s.replace(/!\[rnd\]/,Math.round(Math.random()*9999999))+'&tail256='+escape(d.referrer||'unknown');i.style.position='absolute';i.style.width=i.style.height='0px';i.onload=i.onerror=function(){b.removeChild(i);i=b=null;};i.src=s;b.insertBefore(i,b.firstChild);},addToRetailRocket=function addToRetailRocket(event,data){var product=data.product;if(typeof rcApi==='object'){try{rcApi.addToBasket(product.id);}
catch(err){}}},addToRuTarget=function addToRuTarget(event,data){var
product=data.product,regionId=data.regionId,result,_rutarget=window._rutarget||[];if(!product||!regionId){return;}
result={'event':'addToCart','sku':product.id,'qty':product.quantity,'regionId':regionId};console.info('RuTarget addToCart');console.log(result);_rutarget.push(result);},addToLamoda=function addToLamoda(event,data){var
product=data.product;if('undefined'==typeof(product)||!product.hasOwnProperty('id')||'undefined'==typeof(JSREObject)){return;}
console.info('Lamoda addToCart');console.log('product_id='+product.id);JSREObject('cart_add',product.id);};try{if(data.product){kissAnalytics(event,data);googleAnalytics(event,data);adAdriver(event,data);addToRetailRocket(event,data);}
if(data.products){console.groupCollapsed('Аналитика для набора продуктов');for(var i in data.products){googleAnalytics(event,{product:data.products[i]});if(typeof window.ga!='undefined'){console.log("GA: send event Add2Basket product %s",data.products[i].article);window.ga('send','event','Add2Basket','product',data.products[i].article);}}
console.groupEnd();}
addToRuTarget(event,data);addToLamoda(event,data);}
catch(e){console.warn('addtocartAnalytics error');console.log(e);}});}(window.ENTER));
;(function(global){var body=$('body'),regionWindow=$('.popupRegion'),inputRegion=$('#jscity'),formRegionSubmitBtn=$('#jschangecity'),clearBtn=regionWindow.find('.inputClear'),changeRegionBtn=$('.jsChangeRegion'),changeRegionAnalyticsBtn=$('.jsChangeRegionAnalytics'),slidesWrap=regionWindow.find('.regionSlidesWrap'),moreCityBtn=regionWindow.find('.moreCity'),leftArrow=regionWindow.find('.leftArr'),rightArrow=regionWindow.find('.rightArr'),citySlides=regionWindow.find('.regionSlides'),slideWithCity=regionWindow.find('.regionSlides_slide');inputRegion.autocomplete({autoFocus:true,appendTo:'#jscities',source:function(request,response){$.ajax({url:inputRegion.data('url-autocomplete'),dataType:'json',data:{q:request.term},success:function(data){var res=data.data.slice(0,15);response($.map(res,function(item){return{label:item.name,value:item.name,url:item.url};}));}});},minLength:2,select:function(event,ui){formRegionSubmitBtn.data('url',ui.item.url);submitBtnEnable();},open:function(){$(this).removeClass('ui-corner-all').addClass('ui-corner-top');},close:function(){$(this).removeClass('ui-corner-top').addClass('ui-corner-all');}});var showRegionPopup=function showRegionPopup(){regionWindow.lightbox_me({autofocus:true,onLoad:function(){if(inputRegion.val().length){inputRegion.putCursorAtEnd();submitBtnEnable();}},onClose:function(){var id=changeRegionBtn.data('region-id');if(!global.docCookies.hasItem('geoshop')){global.docCookies.setItem('geoshop',id,31536e3,'/');}}});if(document.location.pathname==='/'){body.trigger('trackGoogleEvent',[{category:'citySelector',action:'viewed',nonInteraction:true}]);}},changeRegionHandler=function changeRegionHandler(){var self=$(this),autoResolve=self.data('autoresolve-url');var authFromServer=function authFromServer(res){if(!res.data.length){$('.popupRegion .mAutoresolve').html('');return false;}
var url=res.data[0].url,name=res.data[0].name,id=res.data[0].id;if(id===14974||id===108136){return false;}
if($('.popupRegion .mAutoresolve').length){$('.popupRegion .mAutoresolve').html('<a href="'+url+'">'+name+'</a>');}
else{$('.popupRegion .cityInline').prepend('<div class="cityItem mAutoresolve"><a href="'+url+'">'+name+'</a></div>');}};if(typeof autoResolve!=='undefined'){$.ajax({type:'GET',url:autoResolve,success:authFromServer});}
showRegionPopup();return false;},nextCitySlide=function nextCitySlide(){var regionSlideW=slideWithCity.width()*1,sliderW=citySlides.width()*1,sliderLeft=parseInt(citySlides.css('left'),10);leftArrow.show();citySlides.animate({'left':sliderLeft-regionSlideW});if(sliderLeft-(regionSlideW*2)<=-sliderW){rightArrow.hide();}
return false;},prevCitySlide=function prevCitySlide(){var regionSlideW=slideWithCity.width()*1,sliderW=citySlides.width()*1,sliderLeft=parseInt(citySlides.css('left'),10);rightArrow.show();citySlides.animate({'left':sliderLeft+regionSlideW});if(sliderLeft+(regionSlideW*2)>=0){leftArrow.hide();}
return false;},expandCityList=function expandCityList(){$(this).toggleClass('mExpand');slidesWrap.slideToggle(300);return false;},clearInputHandler=function clearInputHandler(){inputRegion.val('');submitBtnDisable();clearBtn.hide();return false;},inputRegionChangeHandler=function inputRegionChangeHandler(){if($(this).val()){submitBtnEnable();clearBtn.show();}
else{submitBtnDisable();clearBtn.hide();}},changeRegionAnalytics=function changeRegionAnalytics(regionName){if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','citySelector','selected',regionName]);}
if(typeof ga=='function'){ga('send','event','citySelector','selected',regionName,{'dimension14':regionName});}},changeRegionAnalyticsHandler=function changeRegionAnalyticsHandler(){var regionName=$(this).text();changeRegionAnalytics(regionName);},submitCityHandler=function submitCityHandler(){var url=$(this).data('url'),regionName=inputRegion.val();changeRegionAnalytics(regionName);if(url){global.location=url;}
else{regionWindow.trigger('close');}
return false;},submitBtnDisable=function(){formRegionSubmitBtn.addClass('mDisabled');formRegionSubmitBtn.attr('disabled','disabled');},submitBtnEnable=function(){formRegionSubmitBtn.removeClass('mDisabled');formRegionSubmitBtn.removeAttr('disabled');};formRegionSubmitBtn.on('click',submitCityHandler);moreCityBtn.on('click',expandCityList);clearBtn.on('click',clearInputHandler);rightArrow.on('click',nextCitySlide);leftArrow.on('click',prevCitySlide);inputRegion.on('keyup',inputRegionChangeHandler);body.on('click','.jsChangeRegion',changeRegionHandler);changeRegionAnalyticsBtn.on('click',changeRegionAnalyticsHandler);if(!global.docCookies.hasItem('geoshop')){showRegionPopup();}}(this));
(function(){ENTER.counters={callGetIntentCounter:function(data){if(typeof __GetI==="undefined"){__GetI=[];}
(function(){var p={type:data.type,site_id:"267"};if(data.productId!==undefined){p.product_id=data.productId;}
if(data.productPrice!==undefined){p.product_price=data.productPrice;}
if(data.categoryId!==undefined){p.category_id=data.categoryId;}
if(data.orderId!==undefined){p.transaction_id=data.orderId;}
if(data.orderProducts!==undefined){p.order=data.orderProducts;}
if(data.orderRevenue!==undefined){p.revenue=data.orderRevenue;}
console.log('Вызов счётчика GetIntent',p);__GetI.push(p);var domain=(typeof __GetI_domain)=="undefined"?"px.adhigh.net":__GetI_domain;var src=('https:'==document.location.protocol?'https://':'http://')+domain+'/p.js';var script=document.createElement('script');script.type='text/javascript';script.src=src;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script,s);})();},callRetailRocketCounter:function(routeName,data){var actions={'product':function(data,userData){console.info('RetailRocketJS product');var rcAsyncInit=function(){try{rcApi.view(data,userData.userId?userData:undefined);}
catch(err){}
console.log('Вызов счётчика RetailRocket',routeName,data,userData);};rrApiOnReady.push(rcAsyncInit);},'product.category':function(data,userData){console.info('RetailRocketJS product.category');var rcAsyncInit=function(){try{rcApi.categoryView(data,userData.userId?userData:undefined);}
catch(err){}
console.log('Вызов счётчика RetailRocket',routeName,data,userData);};rrApiOnReady.push(rcAsyncInit);},'order.complete':function(data,userData){console.info('RetailRocketJS order.complete');if(userData.userId){data.userId=userData.userId;data.hasUserEmail=userData.hasUserEmail;}
var rcAsyncInit=function(){try{rcApi.order(data);}
catch(err){}
console.log('Вызов счётчика RetailRocket',routeName,data,userData);};rrApiOnReady.push(rcAsyncInit);}};function callCounter(userInfo){try{console.info('RetailRocketJS action');if(userInfo&&userInfo.id){rrPartnerUserId=userInfo.id;}
if(actions.hasOwnProperty(routeName)){var userData={userId:userInfo?userInfo.id||false:null,hasUserEmail:userInfo&&userInfo.email?true:false};actions[routeName](data,userData);}}catch(err){}}
if(ENTER.config.userInfo===false){callCounter();}else if(!ENTER.config.userInfo){setTimeout(function(){if(ENTER.config.userInfo){callCounter(ENTER.config.userInfo.user);}else{setTimeout(arguments.callee,100);}},100);}else{console.warn(ENTER.config.userInfo);callCounter(ENTER.config.userInfo.user);}}};})();
;$(function(){var inputs=$('input.bCustomInput, .js-customInput'),body=$('body');function updateInput($input){if(!$input.is('[type=checkbox]')&&!$input.is('[type=radio]')){return;}
var id=$input.attr('id'),type=($input.is('[type=checkbox]'))?'checkbox':'radio',groupName=$input.attr('name')||'',label=$('label[for="'+id+'"]');if(!label.length){label=$input.closest('label');}
if(type==='checkbox'){if($input.is(':checked')){label.addClass('mChecked');}
else{label.removeClass('mChecked');}}
if(type==='radio'){if($input.is(':checked')){$('input[name="'+groupName+'"]').each(function(){var currElement=$(this),currId=currElement.attr('id'),currLabel=$('label[for="'+currId+'"]');if(!currLabel.length){currLabel=currElement.closest('label');}
currLabel.removeClass('mChecked');});label.addClass('mChecked');}else{label.removeClass('mChecked');}}}
body.on('change','.bCustomInput, .js-customInput',function(e){updateInput($(e.currentTarget));});inputs.each(function(index,input){updateInput($(input));});});
$(document).ready(function(){if($('#similarGoodsSlider').length){var similarSlider=$('#similarGoodsSlider'),similarWrap=similarSlider.find('.bSimilarGoodsSlider_eWrap'),similarArrow=similarSlider.find('.bSimilarGoodsSlider_eArrow'),slidesW=0,sliderW=0,slidesCount=0,wrapW=0,left=0;var kissSimilar=function kissSimilar(){var clicked=$(this),toKISS={'Recommended Item Clicked Similar Recommendation Place':'product','Recommended Item Clicked Similar Clicked SKU':clicked.data('article'),'Recommended Item Clicked Similar Clicked Product Name':clicked.data('name'),'Recommended Item Clicked Similar Product Position':clicked.data('pos')};if(typeof(_kmq)!=='undefined'){_kmq.push(['record','Recommended Item Clicked Similar',toKISS]);}},init=function init(data){var similarGoods=similarSlider.find('.bSimilarGoodsSlider_eGoods');for(var item in data){var similarGood=tmpl('similarGoodTmpl',data[item]);similarWrap.append(similarGood);}
slidesW=similarGoods.width()+parseInt(similarGoods.css('paddingLeft'),10)*2;slidesCount=similarGoods.length;wrapW=slidesW*slidesCount;similarWrap.width(wrapW);if(slidesCount>0){$('.bSimilarGoods').fadeIn(300,function(){sliderW=similarSlider.width();});}
if(slidesCount<4){$('.bSimilarGoodsSlider_eArrow.mRight').hide();}};$.getJSON($('#similarGoodsSlider').data('url'),function(data){if(!($.isEmptyObject(data))){var initData=data;init(initData);}}).done(function(){var similarGoods=similarSlider.find('.bSimilarGoodsSlider_eGoods');slidesCount=similarGoods.length;wrapW=slidesW*slidesCount;similarWrap.width(wrapW);if(slidesCount>0){$('.bSimilarGoods').fadeIn(300,function(){sliderW=similarSlider.width();});}});similarArrow.bind('click',function(){if($(this).hasClass('mLeft')){left+=(slidesW*2);}
else{left-=(slidesW*2);}
if((left<=sliderW-wrapW)){left=sliderW-wrapW;$('.bSimilarGoodsSlider_eArrow.mRight').hide();$('.bSimilarGoodsSlider_eArrow.mLeft').show();}
else if(left>=0){left=0;$('.bSimilarGoodsSlider_eArrow.mLeft').hide();$('.bSimilarGoodsSlider_eArrow.mRight').show();}
else{similarArrow.show();}
similarWrap.animate({'left':left});return false;});$('.bSimilarGoods.mProduct .bSimilarGoodsSlider_eGoods').on('click',kissSimilar);}
var kissForCategory=function kissForCategory(){var data=$('#_categoryData').data('category'),toKISS={'Viewed Category Category Type':data.type,'Viewed Category Category Level':data.level,'Viewed Category Parent category':data.parent_category,'Viewed Category Category name':data.category,'Viewed Category Category ID':data.id};if(typeof(_kmq)!=='undefined'){_kmq.push(['record','Viewed Category',toKISS]);}};var kissForProductOfCategory=function kissForProductOfCategory(event){var t=$(this),box,datap,toKISS=false,datac=$('#_categoryData').data('category');box=t.parents('.js-goodsboxContainer');if(!box.length){box=t.parents('div.goodsboxlink');}
datap=box.length?box.data('add'):false;if(datap&&datac){toKISS={'Category Results Clicked Category Type':datac.type,'Category Results Clicked Category Level':datac.level,'Category Results Clicked Parent category':datac.parent_category,'Category Results Clicked Category name':datac.category,'Category Results Clicked Category ID':datac.id,'Category Results Clicked SKU':datap.article,'Category Results Clicked Product Name':datap.name,'Category Results Clicked Page Number':datap.page,'Category Results Clicked Product Position':datap.position};}
if(toKISS&&typeof _kmq!=='undefined'){_kmq.push(['record','Category Results Clicked',toKISS]);}};if($('#_categoryData').length){kissForCategory();$('body').delegate('.js-goodsbox a','click',kissForProductOfCategory);}
var kissForSearchResultPage=function kissForSearchResultPage(){var data=$('#_searchKiss').data('search'),toKISS={'Search String':data.query,'Search Page URL':data.url,'Search Items Found':data.count};if(typeof(_kmq)!=='undefined'){_kmq.push(['record','Search',toKISS]);}
var KISSsearchClick=function(){var productData=$(this).data('add'),prToKISS={'Search Results Clicked Search String':data.query,'Search Results Clicked SKU':productData.article,'Search Results Clicked Product Name':productData.name,'Search Results Clicked Page Number':productData.page,'Search Results Clicked Product Position':productData.position};if(typeof(_kmq)!=='undefined'){_kmq.push(['record','Search Results Clicked',prToKISS]);}};$('.js-goodsboxContainer').on('click',KISSsearchClick);$('.goodsboxlink').on('click',KISSsearchClick);};if($('#_searchKiss').length){kissForSearchResultPage();}});
;$(function(){var
$body=$('body');$('.jsEvent_documentReady').each(function(i,el){var
event=$(el).data('value');if(!event.name)return;$body.trigger(event.name,event.data||[]);console.info('event',event.name,event.data);});});
(function(){var goToId=function goToId(){var to=$(this).data('goto');$(document).stop().scrollTo($('#'+to),800);return false;};$(document).ready(function(){$('.jsGoToId').bind('click',goToId);});}());
(function(){var handleHotLinksToggle=function(){var toggle=$(this);if(toggle.hasClass('expanded')){toggle.parent().parent().find('.toHide').hide();toggle.html('Все метки');toggle.removeClass('expanded');}else{toggle.parent().parent().find('.toHide').show();toggle.html('Основные метки');toggle.addClass('expanded');}
return false;};$(document).ready(function(){$('.hotlinksToggle').bind('click',handleHotLinksToggle);});}());
;(function(){$.ajax({url:'https://jira.enter.ru/s/ru_RU-istibo/773/3/1.2.4/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId=2e17c5d6',type:'get',cache:true,dataType:'script'});window.ATL_JQ_PAGE_PROPS={'triggerFunction':function(showCollectorDialog){$('#jira').click(function(e){e.preventDefault();showCollectorDialog();});}};}());
;$(document).ready(function(){$(document.body).on('click',function(){var last_p=window.last_partner_second_click;if(typeof last_p!='undefined'){docCookies.setItem('last_partner',last_p,60*60*24*30,'/');}})});
;(function(ENTER){function changeSocnetLinks(isSubscribe){$('.js-registerForm-socnetLink').each(function(index,link){var $link=$(link);$link.attr('href',ENTER.utils.setURLParam('subscribe',isSubscribe?'1':null,$link.attr('href')));});}
changeSocnetLinks($('.js-registerForm-subscribe')[0].checked);var
$authBlock=$('#auth-block'),init=function(){$('.js-registerForm-subscribe').change(function(e){changeSocnetLinks(e.currentTarget.checked);});$authBlock.on('changeState',function(e,state){var
$el=$(this);console.info({'message':'authBlock.changeState','state':state});if(state){var
oldClass=$el.attr('data-state')?('state_'+$el.attr('data-state')):null,newClass='state_'+state;oldClass&&$el.removeClass(oldClass);$el.addClass(newClass);$el.attr('data-state',state);}
$('.js-resetForm, .js-authForm, .js-registerForm').trigger('clearError');});$authBlock.find('.js-link').on('click',function(e){var
$el=$(e.target),$target=$($el.data('value').target),state=$el.data('value').state;console.info({'$target':$target,'state':state});$target.trigger('changeState',[state]);});$('.js-resetForm, .js-authForm, .js-registerForm').on('submit',function(e){var
$el=$(e.target),data=$el.serializeArray();$.post($el.attr('action'),data).done(function(response){function getFieldValue(fieldName){for(var i=0;i<data.length;i++){if(data[i]['name']==fieldName){return data[i]['value'];}}
return null;}
if($el.hasClass('js-registerForm')&&getFieldValue('subscribe')&&typeof _gaq!='undefined'){_gaq.push(['_trackEvent','subscription','subscribe_registration',getFieldValue('register[email]')]);}
if(response.data&&response.data.link){window.location.href=response.data.link?response.data.link:window.location.href;return true;}
$el.trigger('clearError');var message=response.message;if(!message&&response.notice&&response.notice.message){message=response.notice.message;}
if(message){$el.find('.js-message').html(message);}
response.form&&response.form.error&&$.each(response.form.error,function(i,error){console.warn(error);$el.trigger('fieldError',[error]);});});e.preventDefault();}).on('fieldError',function(e,error){var
$el=$(e.target),$field=$el.find('[name*="'+error.field+'"]');if($field.length){$field.prev('.js-fieldError').remove();if(error.message){$field.before('<div class="js-fieldError bErrorText"><div class="bErrorText__eInner">'+error.message+'</div></div>');}}}).on('clearError',function(){var $el=$(this);$el.find('.js-message').html('');$el.find('input').each(function(i,el){$el.trigger('fieldError',[{field:$(el).attr('name')}]);});}).on('focus','input',function(){var $el=$(this);$el.closest('form').trigger('fieldError',[{field:$el.attr('name')}])});$.mask.definitions['n']='[0-9]';$('.js-registerForm .js-phoneField').mask('+7 (nnn) nnn-nn-nn');};;$(document).ready(function(){init();});}(window.ENTER));
;(function(ENTER){var constructors=ENTER.constructors,body=$('body'),authBlock=$('#auth-block'),registerMailPhoneField=$('.jsRegisterUsername'),resetPwdForm=$('.jsResetPwdForm'),registerForm=$('.jsRegisterForm'),loginForm=$('.jsLoginForm'),completeRegister=$('.jsRegisterFormComplete'),showLoginFormLink=$('.jsShowLoginForm'),signinValidationConfig={fields:[{fieldNode:$('.jsSigninUsername',authBlock),require:true,customErr:'Не указан логин'},{fieldNode:$('.jsSigninPassword',authBlock),require:true,customErr:'Не указан пароль'}]},signinValidator=new FormValidator(signinValidationConfig),registerValidationConfig={fields:[{fieldNode:$('.jsRegisterFirstName',authBlock),require:true,customErr:'Не указано имя'},{fieldNode:registerMailPhoneField,validBy:'isEmail',require:true,customErr:'Некорректно введен e-mail'}]},registerValidator=new FormValidator(registerValidationConfig),forgotPwdValidationConfig={fields:[{fieldNode:$('.jsForgotPwdLogin',authBlock),require:true,customErr:'Не указан email или мобильный телефон',validateOnChange:true}]},forgotValidator=new FormValidator(forgotPwdValidationConfig);var
setValidatorSettings=function(){ENTER.utils.signinValidationConfig=signinValidationConfig;ENTER.utils.signinValidator=signinValidator;ENTER.utils.registerValidationConfig=registerValidationConfig;ENTER.utils.registerValidator=registerValidator;ENTER.utils.forgotPwdValidationConfig=forgotPwdValidationConfig;ENTER.utils.forgotValidator=forgotValidator;};setValidatorSettings();constructors.Login=(function(){'use strict';function Login(){if(!(this instanceof Login)){return new Login();}
this.form=null;this.redirect_to=null;body.on('click','.registerAnotherWayBtn',$.proxy(this.registerAnotherWay,this));body.on('click','.bAuthLink',this.openAuth);$('.jsLoginForm, .jsRegisterForm, .jsResetPwdForm').data('redirect',true).on('submit',$.proxy(this.formSubmit,this));body.on('click','.jsForgotPwdTrigger, .jsRememberPwdTrigger',this.forgotFormToggle);body.on('click','#bUserlogoutLink',this.logoutLinkClickLog);if(showLoginFormLink.length){loginForm.hide();body.on('click','.jsShowLoginForm',this.showLoginForm);}}
Login.prototype.showError=function(msg,callback){var error=$('ul.error_list',this.form);if(callback!==undefined){callback();}
if(error.length){error.html('<li>'+msg+'</li>');}
else{$('.bFormLogin__ePlaceTitle',this.form).after($('<ul class="error_list" />').append('<li>'+msg+'</li>'));}
return false;};Login.prototype.formErrorHandler=function(formError){var validator=this.getFormValidator(),field=$('[name="'+this.getFormName()+'['+formError.field+']"]');var clearError=function clearError(){validator._unmarkFieldError($(this));};console.warn('Ошибка в поле');validator._markFieldError(field,formError.message);field.bind('focus',clearError);return false;};Login.serverErrorHandler={'default':function(res){console.log('Обработчик ошибки');if(!res.redirect){res.redirect=window.location.href;}
if(res.error&&res.error.message){this.showError(res.error.message,function(){document.location.href=res.redirect;});return false;}
document.location.href=res.redirect;},0:function(res){var formError=null;console.warn('Обработка ошибок формы');if(res.redirect){this.showError(res.error.message,function(){document.location.href=res.redirect;});return;}
if($('ul.error_list',this.form).length){$('ul.error_list',this.form).html('');}
for(var i=res.form.error.length-1;i>=0;i--){formError=res.form.error[i];console.warn(formError);if(formError.field!=='global'&&formError.message!==null){$.proxy(this.formErrorHandler,this)(formError);}
else if(formError.field==='global'&&formError.message!==null){this.showError(formError.message);}}
return false;}};Login.prototype.checkEmail=function(){return registerMailPhoneField.hasClass('jsRegisterPhone')?false:true;};Login.prototype.registerAnotherWay=function(){var label=$('.registerAnotherWay'),btn=$('.registerAnotherWayBtn');registerMailPhoneField.val('');if(this.checkEmail()){label.html('Ваш мобильный телефон:');btn.html('Ввести e-mail');registerMailPhoneField.addClass('jsRegisterPhone');registerValidator.setValidate(registerMailPhoneField,{validBy:'isPhone',customErr:'Некорректно введен телефон'});$.mask.definitions['n']='[0-9]';registerMailPhoneField.mask('+7 (nnn) nnn-nn-nn');}
else{label.html('Ваш e-mail:');btn.html('У меня нет e-mail');registerMailPhoneField.removeClass('jsRegisterPhone');registerValidator.setValidate(registerMailPhoneField,{validBy:'isEmail',customErr:'Некорректно введен e-mail'});registerMailPhoneField.unmask();}
return false;};Login.prototype.openAuth=function(){var
removeErrors=function(){var
validators=['signin','register','forgot'],validator,config,self,i,j;for(j in validators){validator=eval('ENTER.utils.'+validators[j]+'Validator');config=eval('ENTER.utils.'+validators[j]+'ValidationConfig');if(!config||!config.fields||!validator){continue;}
for(i in config.fields){self=config.fields[i].fieldNode;self&&validator._unmarkFieldError(self);}}};setValidatorSettings();authBlock.lightbox_me({centered:true,autofocus:true,onLoad:function(){authBlock.find('input:first').focus();},onClose:function(){removeErrors();authBlock.trigger('changeState',['default']);}});return false;};Login.prototype.submitBtnLoadingDisplay=function(btn){if(btn.length){var value1=btn.val(),value2=btn.data('loading-value');btn.attr('disabled',(btn.attr('disabled')==='disabled'?false:true)).val(value2).data('loading-value',value1);}
return false;};Login.prototype.getFormValidator=function(){return eval('ENTER.utils.'+this.getFormName()+'Validator');};Login.prototype.getFormName=function(){return(this.form.hasClass('jsLoginForm'))?'signin':(this.form.hasClass('jsRegisterForm')?'register':(this.form.hasClass('jsResetPwdForm')?'forgot':''));};Login.prototype.formSubmit=function(e,param){e.preventDefault();this.form=$(e.target);var formData=this.form.serializeArray(),validator=this.getFormValidator(),formSubmit=$('.jsSubmit',this.form),forgotPwdLogin=$('.jsForgotPwdLogin',this.form),urlParams=this.getUrlParams(),timeout;this.redirect_to=window.location.href;if(urlParams['redirect_to']){this.redirect_to=urlParams['redirect_to'];}
var responseFromServer=function(response){clearTimeout(timeout);if(response.error){console.warn('Form has error');if(Login.serverErrorHandler.hasOwnProperty(response.error.code)){console.log('Есть обработчик');$.proxy(Login.serverErrorHandler[response.error.code],this)(response);}
else{console.log('Стандартный обработчик');Login.serverErrorHandler['default'](response);}
this.submitBtnLoadingDisplay(formSubmit);return false;}
$.proxy(this.formSubmitLog,this);if(forgotPwdLogin.length&&forgotPwdLogin.is(':visible')){this.submitBtnLoadingDisplay(formSubmit);forgotPwdLogin.hide();$('.jsForgotPwdLoginLabel',this.form).hide();formSubmit.hide();this.showError(response.notice.message);}
console.log(this.form.data('redirect'));console.log(response.data.link);if(typeof(gaRun)!='undefined'&&typeof(gaRun.register)==='function'){gaRun.register();}
if(this.form.data('redirect')){if(typeof(response.data.link)!=='undefined'){console.info('try to redirect to2 '+response.data.link);console.log(typeof response.data.link);document.location.href=response.data.link.replace(/#.*$/,'');return false;}
else{completeRegister.html(response.message);completeRegister.show();registerForm.hide();this.showLoginForm();}}
else{authBlock.trigger('close');}
if($('#order-form').length){$('#user-block').html('Привет, <strong><a href="'+response.data.link+'">'+response.data.user.first_name+'</a></strong>');$('#order_recipient_first_name').val(response.data.user.first_name);$('#order_recipient_last_name').val(response.data.user.last_name);$('#order_recipient_phonenumbers').val(response.data.user.mobile_phone.slice(1));$('#qiwi_phone').val(response.data.user.mobile_phone.slice(1));}},requestToServer=function(){this.submitBtnLoadingDisplay(formSubmit);formData.push({name:'redirect_to',value:this.redirect_to});$.post(this.form.attr('action'),formData,$.proxy(responseFromServer,this),'json');timeout=setTimeout($.proxy(function(){document.location.href=this.redirect_to;},this),5000);};validator.validate({onInvalid:function(err){console.warn('invalid');console.log(err);},onValid:$.proxy(requestToServer,this)});return false;};Login.prototype.showLoginForm=function(){showLoginFormLink.hide();loginForm.slideDown(300);$.scrollTo(loginForm,500);};Login.prototype.forgotFormToggle=function(){if(resetPwdForm.is(':visible')){resetPwdForm.hide();loginForm.show();}
else{resetPwdForm.show();loginForm.hide();}
return false;};Login.prototype.formSubmitLog=function(){var type='';if(typeof(gaRun)&&typeof(gaRun.login)==='function'){gaRun.login();}
if('signin'===this.getFormName()){if(typeof(_gaq)!=='undefined'){type=((this.form.find('.jsSigninUsername').val().search('@'))!==-1)?'email':'mobile';_gaq.push(['_trackEvent','Account','Log in',type,window.location.href]);}
if(typeof(_kmq)!=='undefined'){_kmq.push(['identify',this.form.find('.jsSigninUsername').val()]);}}
else if('register'===this.getFormName()){if(typeof(_gaq)!=='undefined'){type=(this.checkEmail())?'email':'mobile';_gaq.push(['_trackEvent','Account','Create account',type]);}
if(typeof(_kmq)!=='undefined'){_kmq.push(['identify',this.form.find('.jsRegisterUsername').val()]);}}
else if('forgot'===this.getFormName()){if(typeof(_gaq)!=='undefined'){type=((this.form.find('.jsForgotPwdLogin').val().search('@'))!==-1)?'email':'mobile';_gaq.push(['_trackEvent','Account','Forgot password',type]);}}};Login.prototype.logoutLinkClickLog=function(){if(typeof(_kmq)!=='undefined'){_kmq.push(['clearIdentity']);}};Login.prototype.getUrlParams=function(){var $_GET={},__GET=window.location.search.substring(1).split('&'),getVar,i;for(i=0;i<__GET.length;i++){getVar=__GET[i].split('=');$_GET[getVar[0]]=typeof(getVar[1])==='undefined'?'':getVar[1];}
return $_GET;};return Login;}());$(document).ready(function(){var login=new ENTER.constructors.Login();});}(window.ENTER));
$(document).ready(function(){$('body').on('click','.bSubscibe',function(){if($(this).hasClass('checked')){$(this).removeClass('checked');$(this).find('.subscibe').removeAttr('checked');$(this).find('input[name="subscribe"]').val(0);}else{$(this).addClass('checked');$(this).find('.subscibe').attr('checked','checked');$(this).find('input[name="subscribe"]').val(1);}
return false;});function categoriesSpy(e){if(typeof(_gaq)!=='undefined'){_gaq.push(['_trackEvent','CategoryClick',e.data,window.location.pathname]);}
return true;}
$('.bMainMenuLevel-1__eLink').bind('click','Верхнее меню',categoriesSpy);$('.bMainMenuLevel-2__eLink').bind('click','Верхнее меню',categoriesSpy);$('.bMainMenuLevel-3__eLink').bind('click','Верхнее меню',categoriesSpy);$('.breadcrumbs').first().find('a').bind('click','Хлебные крошки сверху',categoriesSpy);$('.breadcrumbs-footer').find('a').bind('click','Хлебные крошки снизу',categoriesSpy);$('.bCtg__eMore').bind('click',function(e){e.preventDefault();var el=$(this);el.parent().find('li.hf').slideToggle();var link=el.find('a');link.text('еще...'==link.text()?'скрыть':'еще...');});$('.product_buy-container').each(function(){var order=$(this).data('order');if(typeof(order)=='object'&&!$.isEmptyObject(order)){$.ajax({url:($(this).data('url')),data:order,type:'POST',timeout:20000});}});if($('.searchtextClear').length){$('.searchtextClear').each(function(){if(!$(this).val().length){$(this).addClass('vh');}
else{$(this).removeClass('vh');}});$('.searchtextClear').click(function(){$(this).siblings('.searchtext').val('');$(this).addClass('vh');if($('#searchAutocomplete').length){$('#searchAutocomplete').html('');}});}
$('.enterPrizeDesc').click(function(){$(this).next('.enterPrizeListWrap').toggle('fast');});});
;(function($){var $body=$(document.body),$nav=$('nav'),MenuStorage,storage,fillRecommendBlocks;MenuStorage=function MenuStorageF(){var cKey='cachedData';if(lscache&&typeof lscache.supported=='function'&&lscache.supported()){return lscache}else{return{'set':function(key,value,time,$el){$el.data(cKey,value);},'get':function(key,$el){return $el.data(cKey)?$el.data(cKey):false;},'remove':function(key,$el){$el.data(cKey,false);}}}};fillRecommendBlocks=function fillRecommendBlocksF($el,blocks){var $containers=$el.find('.jsMenuRecommendation');$.each(blocks,function(i,block){try{if(!block.categoryId)return;var $container=$containers.filter('[data-parent-category-id="'+block.categoryId+'"]');$container.html(block.content);}catch(e){console.error(e);}});};storage=new MenuStorage();$nav.on('mouseenter','.navsite2_i',function(){$(this).find('.menuImgLazy').each(function(){$(this).attr('src',$(this).data('src'))});});$nav.on('mouseenter','.navsite_i',function(){var	$el=$(this),url=$el.data('recommendUrl'),lKey='xhrLoading',cacheTime=10,key,xhr;if(typeof url=='string'&&!$el.data(lKey)===true){key=url.substring(0,url.indexOf('?'));if(!storage.get(key,$el)){xhr=$.get(url);$el.data(lKey,true);xhr.done(function(response){var data=response.productBlocks;if(!data)return;storage.set(key,data,cacheTime,$el);fillRecommendBlocks($el,data);}).fail(function(){storage.remove(key,$el);}).always(function(){$el.data(lKey,false)});}else{fillRecommendBlocks($el,storage.get(key,$el));}}});$body.on('click','.jsRecommendedItemInMenu',function(event){console.log('jsRecommendedItemInMenu');event.stopPropagation();try{var $el=$(this),link=$el.attr('href'),sender=$el.data('sender');$body.trigger('TLT_processDOMEvent',[event]);$body.trigger('trackGoogleEvent',{category:'RR_взаимодействие',action:'Перешел на карточку товара',label:sender?sender.position:null,hitCallback:function(){console.log({link:link});if(link){setTimeout(function(){window.location.href=link;},90);}}});$el.trigger('TL_recommendation_clicked');}catch(e){console.error(e);}})})(jQuery);
;(function($){var EnterPaginator=function(domID,totalPages,visPages,activePage){var self=this;self.inputVars={domID:domID,totalPages:totalPages,visPages:visPages?visPages:10,activePage:activePage?activePage:1};var pag=$('#'+self.inputVars.domID),pagW=pag.width(),eSliderFillW=(pagW*self.inputVars.visPages)/self.inputVars.totalPages,onePageOnSlider=eSliderFillW/self.inputVars.visPages,onePage=pagW/self.inputVars.visPages,center=Math.round(self.inputVars.visPages/2);var scrollingByBar=function scrollingByBar(left){var pagLeft=Math.round(left/onePageOnSlider);$('.bPaginator_eWrap',pag).css('left',-(onePage*pagLeft));};var enableHandlers=function enableHandlers(){var clicked=false,startX=0,nowLeft=0;$('.bPaginatorSlider',pag).bind('mousedown',function(e){startX=e.pageX;nowLeft=parseInt($('.bPaginatorSlider_eFill',pag).css('left'),10);clicked=true;});$('.bPaginatorSlider',pag).bind('mouseup',function(){clicked=false;});pag.bind('mouseout',function(){clicked=false;});$('.bPaginatorSlider',pag).bind('mousemove',function(e){if(clicked){var newLeft=nowLeft+(e.pageX-startX);if((newLeft>=0)&&(newLeft<=pagW-eSliderFillW)){$('.bPaginatorSlider_eFill',pag).css('left',nowLeft+(e.pageX-startX));scrollingByBar(newLeft);}}});};var init=function init(){pag.append('<div class="bPaginator_eWrap"></div>');pag.append('<div class="bPaginatorSlider"><div class="bPaginatorSlider_eWrap"><div class="bPaginatorSlider_eFill" style="width:'+eSliderFillW+'px"></div></div></div>');for(var i=0;i<self.inputVars.totalPages;i++){$('.bPaginator_eWrap',pag).append('<a class="bPaginator_eLink" href="#'+i+'">'+(i+1)+'</a>');if((i+1)===self.inputVars.activePage){$('.bPaginator_eLink',pag).eq(i).addClass('active');}}
var realLinkW=$('.bPaginator_eLink',pag).width();$('.bPaginator_eLink',pag).css({'marginLeft':(onePage-realLinkW-2)/2,'marginRight':(onePage-realLinkW-2)/2});$('.bPaginator_eWrap',pag).addClass('clearfix').width(onePage*self.inputVars.totalPages);};self.setActive=function(page){var left=parseInt($('.bPaginator_eWrap',pag).css('left'),10),barLeft=parseInt($('.bPaginatorSlider_eFill',pag).css('left'),10),nowLeftElH=Math.round(left/onePage)*(-1),diff=-(center-(page-nowLeftElH));$('.bPaginator_eLink',pag).removeClass('active');$('.bPaginator_eLink',pag).eq(page).addClass('active');if(left-(diff*onePage)>0){left=0;barLeft=0;}
else if(page>self.inputVars.totalPages-center){left=Math.round(self.inputVars.totalPages-self.inputVars.visPages)*onePage*(-1);barLeft=Math.round(self.inputVars.totalPages-self.inputVars.visPages)*onePageOnSlider;}
else{left=left-(diff*onePage);barLeft=barLeft+(diff*onePageOnSlider);}
$('.bPaginator_eWrap').animate({'left':left});$('.bPaginatorSlider_eFill',pag).animate({'left':barLeft});};init();enableHandlers();};if($('#promoCatalog').length){console.log('promoCatalog promoSlider');var
body=$('body'),promoCatalog=$('#promoCatalog'),data=promoCatalog.data('slides'),slider_SlideCount=data.length,catalogPaginator=new EnterPaginator('promoCatalogPaginator',slider_SlideCount,12,1),activeInterval=promoCatalog.data('use-interval')!==undefined?promoCatalog.data('use-interval'):false,interval=null,toSlide=0,nowSlide=0,activeHash=promoCatalog.data('use-hash')!==undefined?promoCatalog.data('use-hash'):true,hash,scrollingDuration=500,activeCarousel=promoCatalog.data('use-carousel')!==undefined?promoCatalog.data('use-carousel'):false,slideId,shift=0,slider_SlideW,slider_WrapW,disabledBtns=false,analyticsConfig=typeof promoCatalog.data('analytics-config')!=="undefined"?promoCatalog.data('analytics-config'):false,tchiboAnalyticsBuffer=[],categoryToken=typeof promoCatalog.data('category-token')!=="undefined"?promoCatalog.data('category-token'):'',documentHidden=false;var
initSlider=function initSlider(){var
slide,slideTmpl;if(activeCarousel){$('.bPromoCatalogSlider_eArrow.mArLeft').show();$('.bPromoCatalogSlider_eArrow.mArRight').show();}
for(slide=0;slide<data.length;slide++){slideTmpl=tmpl('slide_tmpl',data[slide]);if($(slideTmpl).length){slideTmpl=$(slideTmpl).attr("id",'slide_id_'+slide);}
var $slide=$(slideTmpl).appendTo('.bPromoCatalogSliderWrap');ko.applyBindings(ENTER.UserModel,$slide[0]);if($('.bPromoCatalogSliderWrap_eSlideLink').eq(slide).attr('href')===''){$('.bPromoCatalogSliderWrap_eSlideLink').eq(slide).removeAttr('href');}
$('.bPromoCatalogNav').append('<a id="promoCatalogSlide'+slide+'" href="#'+slide+'" class="bPromoCatalogNav_eLink">'+((slide*1)+1)+'</a>');}
slider_SlideW=$('.bPromoCatalogSliderWrap_eSlide').width();slider_WrapW=$('.bPromoCatalogSliderWrap').width(slider_SlideW*slider_SlideCount+(940/2-slider_SlideW/2));},setScrollInterval=function setScrollInterval(slide){var
time=3000,additionalTime=0;if(!activeInterval){return;}
if(slide==undefined){slide=0;}
else{additionalTime=scrollingDuration;}
if(data.hasOwnProperty(slide)&&data[slide].hasOwnProperty('time')){time=data[slide]['time'];}
time=time+additionalTime;interval=setTimeout(function(){slide++;if(!activeCarousel){if(slider_SlideCount<=slide){slide=0;}}
moveSlide(slide);setScrollInterval(slide);if('tchibo'==categoryToken&&typeof _gaq!='undefined'){_gaq.push(['_trackEvent','slider view','tchibo',getSlideIndex(slide)+1+'']);}},time);},removeScrollInterval=function removeScrollInterval(){if(!interval){return;}
clearTimeout(interval);},btnsClick=function(e){var
pos=($(this).hasClass('mArLeft'))?'-1':'1',slide=nowSlide+pos*1;e.preventDefault();if(disabledBtns){return false;}
removeScrollInterval();moveSlide(slide);setScrollInterval(slide);if('tchibo'==categoryToken&&typeof _gaq!='undefined'){_gaq.push(['_trackEvent','slider view','tchibo',getSlideIndex(slide)+1+'']);}},paginatorClick=function(e){var
link;e.preventDefault();if($(this).hasClass('active')){return false;}
if(disabledBtns){return false;}
link=$(this).attr('href').slice(1)*1;removeScrollInterval();if(activeCarousel){moveToSlideId(link);}
else{moveSlide(link);}
setScrollInterval(link);if('tchibo'==categoryToken&&typeof _gaq!='undefined'){_gaq.push(['_trackEvent','slider view','tchibo',link+1+'']);}},moveToSlideId=function(id){var
slidesWrap=$(".jsPromoCatalogSliderWrap"),slides=$(".bPromoCatalogSliderWrap_eSlide",slidesWrap),slide;if(id===undefined){id=0;}
slide=slides.index($('#slide_id_'+id,slidesWrap));moveSlide(slide);},moveSlide=function moveSlide(slide){var
leftBtn=$('.bPromoCatalogSlider_eArrow.mArLeft'),rightBtn=$('.bPromoCatalogSlider_eArrow.mArRight'),slidesWrap=$(".jsPromoCatalogSliderWrap"),buff,slideData;var
moveLastSlideToStart=function(){var
slides=$(".bPromoCatalogSliderWrap_eSlide",slidesWrap);buff=slides.last();slides.last().remove();slidesWrap.prepend(buff);slidesWrap.css({left:slidesWrap.position().left-slider_SlideW});},moveFirstSlideToEnd=function(){var
slides=$(".bPromoCatalogSliderWrap_eSlide",slidesWrap);buff=slides.first();slides.first().remove();slidesWrap.append(buff);slidesWrap.css({left:slidesWrap.position().left+slider_SlideW});};slideId=slide;nowSlide=slide;if(!activeCarousel){if(slide===0)leftBtn.hide();else leftBtn.show();if(slide===slider_SlideCount-1)rightBtn.hide();else rightBtn.show();}
else{if(slide>slider_SlideCount-1){moveFirstSlideToEnd();shift++;slide=0;nowSlide=slider_SlideCount-1;}
else if(slide<0){moveLastSlideToStart();shift--;slide=slider_SlideCount-1;nowSlide=0;}
slideId=$(".jsPromoCatalogSliderWrap .bPromoCatalogSliderWrap_eSlide").eq(nowSlide).attr("id").replace('slide_id_','');}
disabledBtns=true;$('.bPromoCatalogSliderWrap').animate({'left':-(slider_SlideW*nowSlide)},scrollingDuration,function(){disabledBtns=false;});catalogPaginator.setActive(slideId);if(activeHash){window.location.hash='slide'+((slideId*1)+1);}
slideData=data[slideId];if((slideData.hasOwnProperty('title')&&slideData.hasOwnProperty('time'))&&tchiboAnalytics.checkRule('collection_view')){tchiboAnalytics.collectionShow(slideData.title,(slideId*1)+1,slideData.time);}},getSlideIndex=function(slide){var slideId=parseInt(slide);if(activeCarousel){if(slide>slider_SlideCount-1){slide=slider_SlideCount-1;}else if(slide<0){slide=0;}
slideId=parseInt($(".jsPromoCatalogSliderWrap .bPromoCatalogSliderWrap_eSlide").eq(slide).attr("id").replace('slide_id_',''));}
return slideId;},tchiboAnalytics={init:function(){if(!tchiboAnalytics.isAnalyticsEnabled){return;}
var
collectionClickHandler=function(){var
self=$(this),slide=self.parent('.bPromoCatalogSliderWrap_eSlide'),slideId,slideData;if(!slide.length||!slide.attr('id')){return;}
slideId=slide.attr('id').replace('slide_id_','');slideData=data[slideId];if(slideData.hasOwnProperty('title')){tchiboAnalytics.collectionClick(slideData.title,(slideId*1)+1);}},productClickHandler=function(){var
self=$(this),slide=self.parents('.bPromoCatalogSliderWrap_eSlide'),slideElementId,slideId,slideData,productIndex;if(!slide.length||!slide.attr('id')){return;}
slideElementId=slide.attr('id');slideId=slideElementId.replace('slide_id_','');slideData=data[slideId];productIndex=$('.mTchiboSlider #'+slideElementId+' .prodItem > a').index(this);if(-1==productIndex){return;}
if(slideData.hasOwnProperty('title')&&undefined!=typeof(slideData.products[productIndex].name)){tchiboAnalytics.productClick(slideData.title,slideData.products[productIndex].name,(productIndex*1)+1);}};if(tchiboAnalytics.checkRule('collection_click')){body.on('click','.mTchiboSlider .bPromoCatalogSliderWrap_eSlideLink',collectionClickHandler);}
if(tchiboAnalytics.checkRule('product_click')){body.on('click','.mTchiboSlider .prodItem > a',productClickHandler);}
tchiboAnalytics.pageVisibility();},pageVisibility:function(){var
hidden,visibilityChange;var
handleVisibilityChange=function(){documentHidden=document[hidden]?true:false;};if(!tchiboAnalytics.isAnalyticsEnabled||!analyticsConfig.hasOwnProperty('use_page_visibility')||true!=analyticsConfig.use_page_visibility){return;}
if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange";}else if(typeof document.mozHidden!=="undefined"){hidden="mozHidden";visibilityChange="mozvisibilitychange";}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange";}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";}
handleVisibilityChange();if(typeof document.addEventListener==="undefined"||typeof hidden==="undefined"){}else{document.addEventListener(visibilityChange,handleVisibilityChange,false);}},collectionShow:function(collection_name,collection_position,delay){},collectionClick:function(collection_name,collection_position){var item;if(!tchiboAnalytics.isAnalyticsEnabled||'undefined'==typeof(_gaq)||'undefined'==typeof(collection_name)||'undefined'==typeof(collection_position)){return;}
item=['_trackEvent','collection_click',collection_name+'_'+collection_position]
console.info('TchiboSliderAnalytics collection_click');console.log(item);_gaq.push(item);},productClick:function(collection_name,item_name,position){var item;if(!tchiboAnalytics.isAnalyticsEnabled||'undefined'==typeof(_gaq)||'undefined'==typeof(collection_name)||'undefined'==typeof(item_name)||'undefined'==typeof(position)){return;}
item=['_trackEvent','item_click',collection_name+'_'+item_name,position.toString()];console.info('TchiboSliderAnalytics item_click');console.log(item);_gaq.push(item);},isAnalyticsEnabled:function(){return analyticsConfig&&analyticsConfig.hasOwnProperty('enabled')&&true==analyticsConfig.enabled;},checkRule:function(rule){if(tchiboAnalytics.isAnalyticsEnabled&&typeof rule!=="undefined"&&analyticsConfig.hasOwnProperty(rule)&&true==analyticsConfig[rule].enabled&&((true==analyticsConfig[rule].tchiboOnly&&'tchibo'===categoryToken)||(true!=analyticsConfig[rule].tchiboOnly))){return true;}
return false;}};$(function(){initSlider();tchiboAnalytics.init();body.on('click','.bPromoCatalogSlider_eArrow',btnsClick);body.on('click','.bPaginator_eLink',paginatorClick);if(activeHash){hash=window.location.hash;if(hash.indexOf('slide')+1){toSlide=parseInt(hash.slice(6),10)-1;moveSlide(toSlide);}}
setScrollInterval(toSlide);if(data.hasOwnProperty(toSlide)&&data[toSlide].hasOwnProperty('title')&&data[toSlide].hasOwnProperty('time')&&tchiboAnalytics.checkRule('collection_view')){tchiboAnalytics.collectionShow(data[toSlide].title,((toSlide*1)+1),data[toSlide].time);}});}})(jQuery);
;(function(){var authBlock;$.ajaxSetup({error:function(jqXHR,textStatus,errorThrown){if(403==jqXHR.status){authBlock=$('#auth-block');if(!authBlock.length){return;}
authBlock.lightbox_me({centered:true,autofocus:true,onLoad:function(){authBlock.find('input:first').focus();}});}}});}());
;(function(){var
body=$('body'),subscribeCookieName='subscribed';var
lboxCheckSubscribe=function lboxCheckSubscribe(event){var
subPopup=$('.bSubscribeLightboxPopup'),input=$('.bSubscribeLightboxPopup__eInput'),submitBtn=$('.bSubscribeLightboxPopup__eBtn'),subscribe={'show':!window.docCookies.hasItem(subscribeCookieName),'agreed':1===window.docCookies.getItem(subscribeCookieName)},inputValidator=new FormValidator({fields:[{fieldNode:input,customErr:'Неправильный емейл',require:true,validBy:'isEmail'}]});var
subscribing=function subscribing(){var
email=input.val(),url=$(this).data('url');var
serverResponseHandler=function serverResponseHandler(res){if(!res.success){return false;}
subPopup.html('<span class="bSubscribeLightboxPopup__eTitle mType">Спасибо! подтверждение подписки отправлено на указанный e-mail</span>');window.docCookies.setItem('subscribed',1,157680000,'/');setTimeout(function(){subPopup.slideUp(300);},3000);if(typeof _gaq!=='undefined'){_gaq.push(['_trackEvent','Account','Emailing sign up','Page top']);}};if(submitBtn.hasClass('mDisabled')){return false;}
inputValidator.validate({onInvalid:function(err){console.log('Email is invalid');console.log(err);},onValid:function(){console.log('Email is valid');$.post(url,{email:email},serverResponseHandler);}});return false;},subscribeNow=function subscribeNow(){var
notNow=$('.bSubscribeLightboxPopup__eNotNow');var
notNowClickHandler=function(e){e.preventDefault();var url=$(this).data('url');subPopup.slideUp(300);window.docCookies.setItem('subscribed',0,157680000,'/');$.post(url);};subPopup.slideDown(300);submitBtn.bind('click',subscribing);notNow.off('click');notNow.bind('click',notNowClickHandler);};input.placeholder();if(!subscribe.show){return false;}
else{subscribeNow();}};body.bind('showsubscribe',lboxCheckSubscribe);body.trigger('showsubscribe');}());
;(function(){$('.js-siteVersionSwitcher').click(function(e){e.preventDefault();var domain=window.location.host;var domainParts=domain.split(".");if(domainParts.length>2){domain=domainParts[domainParts.length-2]+"."+domainParts[domainParts.length-1];}
var config=$(e.currentTarget).data('config');document.cookie=config.cookieName+"=1; expires="+(new Date(Date.now()+config.cookieLifetime*1000)).toUTCString()+"; domain="+domain+"; path=/";location=e.currentTarget.href;});}());
;(function(){$(document).ready(function(){var $body=$('body');$body.on('click','.jsRecommendedItem',function(event){console.log('jsRecommendedItem');try{var
$el=$(this),link=$el.attr('href'),$slider=$el.parents('.js-slider'),sender=$slider.length?$slider.data('slider').sender:null;$body.trigger('TLT_processDOMEvent',[event]);$body.trigger('trackGoogleEvent',{category:'RR_взаимодействие',action:'Перешел на карточку товара',label:sender?sender.position:null,hitCallback:function(){console.log({link:link});if(link){setTimeout(function(){window.location.href=link;},90);}}});event.stopPropagation();}catch(e){console.error(e);}});$body.on('click','.jsRecommendedSliderNav',function(event){console.log('jsRecommendedSliderNav');try{var
$el=$(this),$slider=$el.parents('.js-slider'),sender=$slider.length?$slider.data('slider').sender:null;$body.trigger('trackGoogleEvent',['RR_Взаимодействие','Пролистывание',sender.position]);}catch(e){console.error(e);}});try{$('.js-slider').each(function(i,el){var
data=$(el).data('slider'),rrviewed=docCookies.getItem('product_viewed');if(('viewed'==data.type)&&typeof rrviewed==='string'){data['rrviewed']=ENTER.utils.arrayUnique(rrviewed.split(','));$(el).data('slider',data);}});}catch(e){console.error(e);}
$body.on('mouseenter','.slideItem_i',function(e){var
$el=$(this),$bubble=$el.parents('.js-slider').find('.slideItem_flt');if($bubble.length){$bubble.find('.slideItem_flt_i').text($el.data('product').name);$bubble.addClass('slideItem_flt-show');$bubble.offset({left:$el.offset().left});}});$body.on('mouseleave','.slideItem_i',function(e){var
$el=$(this),$bubble=$el.parents('.js-slider').find('.slideItem_flt');if($bubble.length){$bubble.find('.slideItem_flt_i').text('');$bubble.removeClass('slideItem_flt-show');}});});}());
;(function(){var
body=$('body'),searchForm=$('div.searchbox form'),searchInput=searchForm.find('input.searchtext'),suggestWrapper=$('#searchAutocomplete'),suggestItem=$('.bSearchSuggest__eRes'),nowSelectSuggest=-1,suggestLen=0,suggestCache={},tID=null;var
suggestAnalytics=function suggestAnalytics(){var
link=suggestItem.eq(nowSelectSuggest).attr('href'),type=(suggestItem.eq(nowSelectSuggest).hasClass('bSearchSuggest__eCategoryRes'))?'suggest_category':'suggest_product';if(typeof(_gaq)!=='undefined'){_gaq.push(['_trackEvent','Search',type,link]);}},loadResponse=function loadResponse(){var
text=searchInput.val(),renderResponse=function renderResponse(response){if(!response.success){return;}
suggestCache[text]=response.content;suggestWrapper.html(response.content);suggestItem=$('.bSearchSuggest__eRes');suggestLen=suggestItem.length;if(suggestLen){setTimeout(searchInputFocusin,99);}},getResFromServer=function getResFromServer(){var
url='/search/autocomplete?q=';if(text.length<3){return false;}
url+=encodeURI(text);$.ajax({type:'GET',url:url,success:renderResponse});};if(text.length===0){suggestWrapper.empty();return false;}
clearTimeout(tID);if(suggestCache[text]){renderResponse(suggestCache[text]);return false;}
tID=setTimeout(getResFromServer,300);},escapeSearchQuery=function escapeSearchQuery(){var s=searchInput.val().replace(/(^\s*)|(\s*$)/g,'').replace(/(\s+)/g,' ');searchInput.val(s);}
suggestKeyUp=function suggestKeyUp(event){var
keyCode=event.which;if((keyCode>=37&&keyCode<=40)||keyCode===27||keyCode===13){return false;}
loadResponse();},suggestKeyDown=function suggestKeyDown(event){var
keyCode=event.which;var
markSuggestItem=function markSuggestItem(){suggestItem.removeClass('hover').eq(nowSelectSuggest).addClass('hover');},selectUpItem=function selectUpItem(){if(nowSelectSuggest-1>=0){nowSelectSuggest--;markSuggestItem();}
else{nowSelectSuggest=-1;suggestItem.removeClass('hover');$(this).focus();}},selectDownItem=function selectDownItem(){if(nowSelectSuggest+1<=suggestLen-1){nowSelectSuggest++;markSuggestItem();}},enterSelectedItem=function enterSelectedItem(){var link=suggestItem.eq(nowSelectSuggest).attr('href');suggestAnalytics();document.location.href=link;};if(keyCode===38){selectUpItem();return false;}
else if(keyCode===40){selectDownItem();return false;}
else if(keyCode===27){suggestWrapper.empty();return false;}
else if(keyCode===13){escapeSearchQuery();if(nowSelectSuggest!==-1){enterSelectedItem();return false;}}},searchSubmit=function searchSubmit(){var text=searchInput.attr('value');if(text.length===0){return false;}
escapeSearchQuery();},searchInputFocusin=function searchInputFocusin(){suggestWrapper.show();},suggestCloser=function suggestCloser(e){var
targ=e.target.className;if(!(targ.indexOf('bSearchSuggest')+1||targ.indexOf('searchtext')+1)){suggestWrapper.hide();}},hoverForItem=function hoverForItem(){var index=0;suggestItem.removeClass('hover');index=$(this).addClass('hover').index();nowSelectSuggest=index-1;},searchHintSelect=function searchHintSelect(){var
hintValue=$(this).text();searchInput.val(hintValue+' ').focus();if(typeof(_gaq)!=='undefined'){_gaq.push(['_trackEvent','tooltip',hintValue]);}
loadResponse();};$(document).ready(function(){searchInput.bind('keydown',suggestKeyDown);searchInput.bind('keyup',suggestKeyUp);searchInput.bind('focus',searchInputFocusin);searchForm.bind('submit',searchSubmit);searchInput.placeholder();body.bind('click',suggestCloser);body.on('mouseenter','.bSearchSuggest__eRes',hoverForItem);body.on('click','.bSearchSuggest__eRes',suggestAnalytics);body.on('click','.sHint_value',searchHintSelect);});}());
;(function(){if(/catalog\/tchibo/.test(document.location.href)&&window.history&&window.history.replaceState){var history=window.history;$(window).on('beforeunload',function(){history.replaceState({pageYOffset:pageYOffset},'');});if(history&&history.state&&history.state.pageYOffset){window.scrollTo(0,history.state.pageYOffset);}}}());
;(function($){var
$body=$('body'),TLT=(typeof this.TLT==='object')?this.TLT:null,TLT_logCustomEvent=function(event,TLT_eventName,TLT_eventData){try{console.info('TLT_logCustomEvent',TLT_eventName,TLT_eventData);TLT.logCustomEvent(TLT_eventName,TLT_eventData);}catch(e){console.error(e);}},TLT_processDOMEvent=function(event,originalEvent){try{console.info('TLT_processDOMEvent',originalEvent);TLT.processDOMEvent(originalEvent);}catch(e){console.error(e);}};$body.on('TLT_processDOMEvent',TLT_processDOMEvent);})(jQuery);
;$(function($){var $menu=$('.js-mainmenu-level2');$menu.menuAim({activate:activateSubmenu,deactivate:deactivateSubmenu,exitOnMouseOut:true});function activateSubmenu(row){var $row=$(row),$submenu=$row.children('ul');$row.addClass('hover');$submenu.css({display:'block'});}
function deactivateSubmenu(row){var $row=$(row),$submenu=$row.children('ul');$row.removeClass('hover');$submenu.css('display','none');}}(jQuery));
;(function(){var
$body=$('body'),$window=$(window),$upper=$('.js-upper'),visible=false,offset=$upper.data('offset'),showWhenFullCartOnly=$upper.data('showWhenFullCartOnly');if(typeof offset=='string'){var $offset=$(offset);if($offset.length){offset=$offset.offset().top;}}
function checkScroll(){var cartLength=ENTER.UserModel.cart().length;if(!visible&&$window.scrollTop()>offset&&(!showWhenFullCartOnly||cartLength)){visible=true;$upper.animate({marginTop:'0'},400);}else if(visible&&($window.scrollTop()<offset||showWhenFullCartOnly&&!cartLength)){visible=false;$upper.animate({marginTop:'-55px'},400);}}
$upper.bind('click',function(){$window.scrollTo('0px',400);return false;});$window.scroll(checkScroll);$body.on('userLogged closeBuyInfo showBuyInfo',function(){checkScroll();});}());
;(function(ENTER){var
utils=ENTER.utils,userBar=utils.extendApp('ENTER.userBar'),userBarFixed=userBar.userBarFixed=$('.js-topbar-fixed'),userbarStatic=userBar.userBarStatic=$('.js-topbar-static'),emptyCompareNoticeElements={},emptyCompareNoticeShowClass='topbarfix_cmpr_popup-show',topBtn=userBarFixed.find('.js-userbar-upLink'),userbarConfig=userBarFixed.data('value'),$body=$('body'),w=$(window),buyInfoShowing=false,overlay=$('<div>').css({position:'fixed',display:'none',width:'100%',height:'100%',top:0,left:0,zIndex:900,background:'black',opacity:0.4}),scrollTarget,filterTarget,showWhenFullCartOnly=userbarConfig&&userbarConfig.showWhenFullCartOnly;userBar.showOverlay=false;function showUserbar(disableAnimation,onOpen){$.each(emptyCompareNoticeElements,function(){this.removeClass(emptyCompareNoticeShowClass);});if(disableAnimation){userBarFixed.show(0,onOpen||function(){});}else{userBarFixed.slideDown();}
if(userBarFixed.length){userbarStatic.css('visibility','hidden');}}
function hideUserbar(){userBarFixed.slideUp();userbarStatic.css('visibility','visible');}
function checkScroll(hideOnly){if(buyInfoShowing){return;}
if(scrollTarget&&scrollTarget.length&&w.scrollTop()>=scrollTarget.offset().top&&!hideOnly&&(!showWhenFullCartOnly||ENTER.UserModel.cart().length)){showUserbar();}
else{hideUserbar();}}
function upToFilter(){$.scrollTo(filterTarget,500);ENTER.catalog.filter.openFilter();return false;}
function closeBuyInfo(){var
wrap=userBarFixed.find('.topbarfix_cart'),wrapLogIn=userBarFixed.find('.topbarfix_log'),openClass='mOpenedPopup',upsaleWrap=wrap.find('.hintDd');$body.trigger('closeBuyInfo');function removeBuyInfoBlock(){var
buyInfo=$('.topbarfix_cartOn');if(!buyInfo.length){return;}
buyInfo.slideUp(300,function(){buyInfo.removeAttr('style');});}
function removeOverlay(){if(!overlay||!userBar.showOverlay){checkScroll();return;}
overlay.fadeOut(100,function(){overlay.off('click');overlay.remove();userBar.showOverlay=false;buyInfoShowing=false;checkScroll();});}
if(!upsaleWrap.hasClass('mhintDdOn')){removeBuyInfoBlock();removeOverlay();return;}
upsaleWrap.removeClass('mhintDdOn');wrapLogIn.removeClass(openClass);wrap.removeClass(openClass);removeBuyInfoBlock();removeOverlay();return false;}
function showBuyInfo(e,data,upsale){console.info('userbar::showBuyInfo');$body.trigger('showBuyInfo');$.each(emptyCompareNoticeElements,function(){this.removeClass(emptyCompareNoticeShowClass);});var	buyInfo=$('.topbarfix_cartOn');if(!userBar.showOverlay&&overlay){$body.append(overlay);overlay.fadeIn(300);userBar.showOverlay=true;overlay.on('click',closeBuyInfo);}
if(e){buyInfo.slideDown(300);}
else{buyInfo.show();}
showUserbar(true);if(upsale){showUpsell(data,upsale);}
buyInfoShowing=true;$(document.body).trigger('showUserCart');}
function deleteProductHandler(){console.log('deleteProductHandler click!');var btn=$(this);var
deleteFromRutarget=function deleteFromRutarget(data){var
region=$('.jsChangeRegion'),regionId=region.length?region.data('region-id'):false,result,_rutarget=window._rutarget||[];if(!regionId||!data.hasOwnProperty('product')||!data.product.hasOwnProperty('id')){return;}
result={'event':'removeFromCart','sku':data.product.id,'regionId':regionId};console.info('RuTarget removeFromCart');console.log(result);_rutarget.push(result);},deleteFromLamoda=function deleteFromLamoda(data){if('undefined'==typeof(JSREObject)||!data.hasOwnProperty('product')||!data.product.hasOwnProperty('id')){return;}
console.info('Lamoda removeFromCart');console.log('product_id='+data.product.id);JSREObject('cart_remove',data.product.id);},deleteFromRetailRocket=function deleteFromRetailRocket(data){if(!data.hasOwnProperty('product')||!data.product.hasOwnProperty('id')){return;}
console.info('RetailRocket removeFromCart');console.log('product_id='+data.product.id);window.rrApiOnReady.push(function(){window.rrApi.removeFromBasket(data.product.id)});},deleteProductAnalytics=function deleteProductAnalytics(data){if('undefined'==typeof(data)){return;}
deleteFromRetailRocket(data);deleteFromRutarget(data);deleteFromLamoda(data);};$.ajax({type:'GET',url:btn.attr('href'),success:function(res,data){console.warn(res);if(!res.success){console.warn('удаление не получилось :(');return;}
deleteProductAnalytics(res);ENTER.UserModel.removeProductByID(res.product.id);$('.js-basketLineDeleteLink-'+res.product.id).click();if(ENTER.UserModel.cart().length==0){closeBuyInfo();}else{showBuyInfo();}
$body.trigger('removeFromCart',[res.product]);}});return false;}
function showUpsell(data,upsale){console.info('userbar::showUpsell');var
cartWrap=userBarFixed.find('.topbarfix_cart'),upsaleWrap=cartWrap.find('.hintDd'),slider;function responseFromServer(response){console.log(response);if(!response.success||!userBar.showOverlay){return;}
console.info('Получены рекомендации "С этим товаром покупают" от RetailRocket');upsaleWrap.find('.js-slider').remove();slider=$(response.content)[0];upsaleWrap.append(slider);upsaleWrap.addClass('mhintDdOn');$(slider).goodsSlider();ko.applyBindings(ENTER.UserModel,slider);if(!data.product)return;if(!data.product.article){console.warn('Не получен article продукта');return;}
console.log('Трекинг товара при показе блока рекомендаций');if(response.data){try{rrApi.recomTrack(response.data.method,response.data.id,response.data.recommendations);}catch(e){console.warn('showUpsell() Retailrocket error');console.log(e);}}
typeof _gaq=='function'&&_gaq.push(['_trackEvent','cart_recommendation','cart_rec_shown',data.product.article]);typeof _kmq=='function'&&_kmq.push(['record','cart recommendation shown',{'SKU cart rec shown':data.product.article}]);}
console.log(upsale);if(!upsale.url){console.log('if upsale.url');return;}
$.ajax({type:'GET',url:upsale.url,success:responseFromServer});}
function upsaleProductClick(){var
product=$(this).parents('.jsSliderItem').data('product');if(!product.article){console.warn('Не получен article продукта');return;}
console.log('Трекинг при клике по товару из списка рекомендаций');_gaq&&_gaq.push(['_trackEvent','cart_recommendation','cart_rec_clicked',product.article]);_kmq&&_kmq.push(['record','cart recommendation clicked',{'SKU cart rec clicked':product.article}]);}
function showEmptyCompareNotice(e,emptyCompareNoticeName,$userbar){e.stopPropagation();if(!emptyCompareNoticeElements[emptyCompareNoticeName]){var element=$('.js-compare-popup',$userbar);$('.js-compare-popup-closer',element).click(function(){element.removeClass(emptyCompareNoticeShowClass);});$('.js-topbarfixLogin, .js-topbarfixNotEmptyCart',$userbar).mouseover(function(){element.removeClass(emptyCompareNoticeShowClass);});$('html').click(function(){element.removeClass(emptyCompareNoticeShowClass);});$(element).click(function(e){e.stopPropagation();});$(document).keyup(function(e){if(e.keyCode==27){element.removeClass(emptyCompareNoticeShowClass);}});emptyCompareNoticeElements[emptyCompareNoticeName]=element;}
emptyCompareNoticeElements[emptyCompareNoticeName].addClass(emptyCompareNoticeShowClass);}
console.info('Init userbar module');console.log(userbarConfig);userBar.show=showUserbar;$body.on('click','.jsUpsaleProduct',upsaleProductClick);$body.on('click','.jsCartDelete',deleteProductHandler);$('.js-noProductsForCompareLink',userBarFixed).click(function(e){showEmptyCompareNotice(e,'fixed',userBarFixed);});$('.js-noProductsForCompareLink',userbarStatic).click(function(e){showEmptyCompareNotice(e,'static',userbarStatic);});if(userBarFixed.length){if(window.location.pathname!=='/cart')$body.on('addtocart',showBuyInfo);scrollTarget=$(userbarConfig.target);if(userbarConfig.filterTarget){filterTarget=$(userbarConfig.filterTarget);}else{filterTarget=scrollTarget;}
if(topBtn.length){topBtn.on('click',upToFilter);}
if(scrollTarget.length){w.on('scroll',function(){checkScroll();});}else{w.on('scroll',function(){checkScroll(true);});}
$body.on('userLogged',function(){checkScroll();});}
else{overlay.remove();overlay=false;}}(window.ENTER));
//@ sourceMappingURL=common.js.map