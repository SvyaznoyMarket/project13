(function(e){console.info("New catalog history module");var n=(e.config.pageConfig,e.utils),t=n.extendApp("ENTER.catalog");t.history={gotoUrl:function(e){var n={title:"history link to "+e,url:e};return History.enabled?(n.url.addParameterToUrl("ajax","true"),console.info("link handler. push state new url: "+n.url),History.pushState(n,n.title,n.url),void 0):(document.location.href=e,void 0)}};var i=function i(){var e=$(this).attr("href");return t.history.gotoUrl(e),!1},o=function o(){var e=History.getState(),n=e.url;console.info("statechange"),console.log(n),console.log(e)};History.Adapter.bind(window,"statechange",o),$("body").on("click",".jsHistoryLink",i)})(window.ENTER),function(e){console.info("New catalog init: filter.js");var n=(e.config.pageConfig,e.utils),t=n.extendApp("ENTER.catalog"),i=$(".bFilter"),o=i.find(".bFilterToggle"),a=i.find(".bFilterCont"),l=i.find(".bFilterParams__eItem"),r=i.find(".bFilterValuesItem");t.filter={sendFilter:function(){var e=i.serialize();return console.log(e),!1},updateFilter:function(){console.info("update filter")}};var s=function s(){var e="mOpen",n="mClose",t=o.hasClass(e);return t?(o.removeClass(e).addClass(n),a.slideUp(400)):(o.removeClass(n).addClass(e),a.slideDown(400)),!1},c=function c(){var e=$(this),n="mActive",t=e.hasClass(n),i=e.data("ref");return t?!1:(l.removeClass(n),e.addClass(n),r.fadeOut(300),r.promise().done(function(){$("#"+i).fadeIn(300)}),!1)},d=function d(){var e=$(this),n=e.find(".bFilterSlider"),t=n.data("config"),i=e.find(".mFromRange"),o=e.find(".mToRange"),a=t.min,l=t.max,r=t.step;n.slider({range:!0,step:r,min:a,max:l,values:[i.val(),o.val()],slide:function(e,n){i.val(n.values[0]),o.val(n.values[1])},change:function(){console.log("change slider")}});var s=function s(){var e="0"+$(this).val();e=parseInt(e,10),e=e>l?l:a>e?a:e,$(this).val(e),n.slider({values:[i.val(),o.val()]})};o.on("change",s),i.on("change",s)};o.on("click",s),l.on("click",c),i.on("submit",t.filter.sendFilter),$(".bRangeSlider").each(d)}(window.ENTER);