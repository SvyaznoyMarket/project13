(function(e){console.info("New catalog history module");var n=(e.config.pageConfig,e.utils),o=n.extendApp("ENTER.catalog");o.history={gotoUrl:function(e){var n={title:"history link to "+e,url:e};return History.enabled?(console.info("link handler. push state new url: "+n.url),History.pushState(n,n.title,n.url),void 0):(document.location.href=e,void 0)}};var t=function t(){var e=$(this).attr("href");return o.history.gotoUrl(e),!1},i=function i(e){console.info("resHandler"),console.log(e)},a=function a(){var e=History.getState(),n=e.url;console.info("statechange"),n=n.addParameterToUrl("ajax","true"),console.log(n),console.log(e),$.ajax({type:"GET",url:n,success:i})};History.Adapter.bind(window,"statechange",a),$("body").on("click",".jsHistoryLink",t)})(window.ENTER),function(e){console.info("New catalog init: filter.js");var n=(e.config.pageConfig,e.utils),o=n.extendApp("ENTER.catalog"),t=$(".bFilter"),i=t.find(".bFilterToggle"),a=t.find(".bFilterCont"),l=t.find(".bFilterParams__eItem"),r=t.find(".bFilterValuesItem");o.filter={sendFilter:function(){var e=t.serialize();return console.log(e),o.history.gotoUrl(e),!1},updateFilter:function(){console.info("update filter")}};var s=function s(){var e="mOpen",n="mClose",o=i.hasClass(e);return o?(i.removeClass(e).addClass(n),a.slideUp(400)):(i.removeClass(n).addClass(e),a.slideDown(400)),!1},c=function c(){var e=$(this),n="mActive",o=e.hasClass(n),t=e.data("ref");return o?!1:(l.removeClass(n),e.addClass(n),r.fadeOut(300),r.promise().done(function(){$("#"+t).fadeIn(300)}),!1)},d=function d(){var e=$(this),n=e.find(".bFilterSlider"),o=n.data("config"),t=e.find(".mFromRange"),i=e.find(".mToRange"),a=o.min,l=o.max,r=o.step;n.slider({range:!0,step:r,min:a,max:l,values:[t.val(),i.val()],slide:function(e,n){t.val(n.values[0]),i.val(n.values[1])},change:function(){console.log("change slider")}});var s=function s(){var e="0"+$(this).val();e=parseInt(e,10),e=e>l?l:a>e?a:e,$(this).val(e),n.slider({values:[t.val(),i.val()]})};i.on("change",s),t.on("change",s)};i.on("click",s),l.on("click",c),t.on("submit",o.filter.sendFilter),$(".bRangeSlider").each(d)}(window.ENTER);