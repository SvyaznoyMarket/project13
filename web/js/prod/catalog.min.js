(function(e){console.info("New catalog init: filter.js");var t=(e.config.pageConfig.userUrl,e.utils,$(".bFilter")),a=t.find(".bFilterToggle"),s=t.find(".bFilterCont"),i=t.find(".bFilterParams__eItem"),n=t.find(".bFilterValuesItem");console.log("Mustache is "+typeof Mustache);var l={firstName:"Alexandr",lastName:"Zaytsev"},o="<h1>{{firstName}} {{lastName}}</h1>test out with Mustache<br/><a class='jsHistoryLink' href='/newurl'>test history api</a>",r=Mustache.to_html(o,l);$("<div>").addClass("popup").html(r);var c=function c(){var e={title:"history link to "+$(this).attr("href"),url:$(this).attr("href")};return console.info("link handler. push state "+e.url),History.pushState(e,e.title,e.url),!1},d=function d(){var e=History.getState(),t=e.url;console.info("statechange"),console.log(t),console.log(e)};History.Adapter.bind(window,"statechange",d),$("body").on("click",".jsHistoryLink",c);var f=function f(){var e="mOpen",t="mClose",i=a.hasClass(e);return i?(a.removeClass(e).addClass(t),s.slideUp(400)):(a.removeClass(t).addClass(e),s.slideDown(400)),!1},u=function u(){var e=$(this),t="mActive",a=e.hasClass(t),s=e.data("ref");return a?!1:(i.removeClass(t),e.addClass(t),n.fadeOut(300),n.promise().done(function(){$("#"+s).fadeIn(300)}),!1)};a.on("click",f),i.on("click",u);var h=function h(){var e=$(this),t=e.find(".bFilterSlider"),a=t.data("config"),s=e.find(".mFromRange"),i=e.find(".mToRange"),n=a.min,l=a.max,o=a.step;t.slider({range:!0,step:o,min:n,max:l,values:[s.val(),i.val()],slide:function(e,t){s.val(t.values[0]),i.val(t.values[1])},change:function(){console.log("change slider")}})};$(".bRangeSlider").each(h)})(window.ENTER);