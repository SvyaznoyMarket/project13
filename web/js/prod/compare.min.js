!function(a){a(function(){function b(a){var b={};return b.id=a.id,b.prefix=a.prefix,b.webName=a.webName,b.link=a.link,b.price=a.price,b.priceOld=a.priceOld,b.inShopOnly=a.inShopOnly,b.inShopShowroomOnly=a.inShopShowroomOnly,b.isBuyable=a.isBuyable,b.statusId=a.statusId,b.imageUrl=a.imageUrl,b.deleteFromCompareUrl=a.deleteFromCompareUrl,b.upsale=a.upsale,b}function c(a){var b={};return b.name=a.name,b}function d(a){var b={};return b.text=a.text,b.productId=a.productId,b}function e(b){var c={};return c.name=b.name,c.isSimilar=b.isSimilar,c.values=ko.observableArray(),a.each(b.values,function(){c.values.push(d(this))}),c}function f(b){var c={};return c.name=b.name,c.isSimilar=b.isSimilar,c.properties=ko.observableArray(),a.each(b.properties,function(){c.properties.push(e(this))}),c}function g(d){var e={};return e.category=c(d.category),e.products=ko.observableArray(),a.each(d.products,function(){e.products.push(b(this))}),e.propertyGroups=ko.observableArray(),a.each(d.propertyGroups,function(){e.propertyGroups.push(f(this))}),e}function h(b){var c={};return c.compareGroups=ko.observableArray(),a.each(b,function(){c.compareGroups.push(g(this))}),c.activeCompareGroupIndex=ko.observable(0),c.onlySimilar=ko.observable(!0),c.cart=ENTER.UserModel.cart,c.compare=ENTER.UserModel.compare,c}function i(b,c,d){function e(b){b.each(function(){a(this).css("min-height","0")}),b.each(function(){var b=a(this),c=b.closest("th, td"),d=c.height(),e=b.height(),f=parseInt(b.css("padding-top"))||0,g=parseInt(b.css("padding-bottom"))||0,h=parseInt(b.css("border-top-width"))||0,i=parseInt(b.css("border-bottom-width"))||0,j=e+f+g+h+i,k=f;d>j&&("middle"==c.css("vertical-align")?(k=Math.round((d-j)/2)+f,b.css("padding-top",k+"px")):"bottom"==c.css("vertical-align")&&(k=Math.round(d-j)+f,b.css("padding-top",k+"px"))),b.css("min-height",d+"px")})}function f(){var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,d=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e=null,f=null;return a>j?(e=a-j,b.css("top",e+"px")):b.css("top","auto"),d>k?(f=d-k,c.css("left",f+"px")):c.css("left","auto"),{top:e,left:f}}function g(){var a=f();(d||{}).onScrollStart&&a.top&&!m&&(m=!0,d.onScrollStart(),setTimeout(function(){e(b)},0)),(d||{}).onScrollEnd&&!a.top&&m&&(m=!1,d.onScrollEnd(),e(b))}function h(){i=a(b.get(0)).offset(),j=i.top,k=i.left}if(!b[0])throw Error('Empty "rowContainers" in "createFixedTableCells" function');var i=a(b[0]).offset(),j=i.top,k=i.left,l=a(window);b.css("position","relative"),b.css("z-index","110"),c.css("position","relative"),c.css("z-index","120"),b.each(function(){var b=this;c.each(function(){b===this&&a(this).css("z-index","130")})});var m=!1;return e(a(a.unique(a.merge(a.makeArray(b),a.makeArray(c))))),l.scroll(g),l.resize(h),f(),{updatePosition:f,destroy:function(){l.unbind("scroll",g),l.unbind("resize",h)}}}function j(){r&&r.destroy(),r=i(a("tr.js-compare-tableHeadRow td .js-compare-fixed, tr.js-compare-tableHeadRow th .js-compare-fixed",m),a("th .js-compare-fixed",m),{onScrollStart:function(){m.addClass("cmprCnt-scroll")},onScrollEnd:function(){m.removeClass("cmprCnt-scroll")}})}var k=a("body"),l=a(".js-compare"),m=a(".js-compare-table",l),n=a(".js-compare-header"),o=a(".js-compare-footer"),p=a(".js-topbar"),q=h(l.data("compare-groups"));ko.applyBindings(q,l[0]);var r=null;q.activeCompareGroupIndex.subscribe(function(){j(),q.cart.valueHasMutated()}),setTimeout(function(){j()},0),l.on("click",".js-compare-deleteProductLink",function(b){b.preventDefault();var c=b.currentTarget;a.ajax({url:b.currentTarget.href,success:function(){var b=a(c).data("product-id");q.compareGroups.remove(function(a){return a.products.remove(function(a){return a.id==b}),a.propertyGroups.remove(function(a){return a.properties.remove(function(a){return a.values.remove(function(a){return a.productId==b}),0==a.values().length}),0==a.properties().length}),0==a.products().length}),q.compare.remove(function(a){return a.id==b});var d=q.compareGroups().length;q.activeCompareGroupIndex()>d-1&&q.activeCompareGroupIndex(d-1)}})}),l.on("click",".js-compare-categoryLink",function(b){b.preventDefault(),q.activeCompareGroupIndex(a(b.currentTarget).data("index"))}),l.on("click",".js-compare-modeOnlySimilar",function(){q.onlySimilar(!0)}),l.on("click",".js-compare-modeAll",function(){q.onlySimilar(!1)}),l.on("click",".js-compare-propertyGroupLink",function(b){b.preventDefault();var c=a(b.currentTarget).closest("tr"),d=c.closest("table"),e="cmprCnt_property_group-act",f=!1;c.hasClass(e)?(c.removeClass(e),a(">tbody>tr",d).each(function(){return this.rowIndex<c[0].rowIndex?void 0:this.rowIndex==c[0].rowIndex?void(f=!0):a(this).hasClass("js-compare-propertyGroup")?!1:void(f&&a(this).removeClass("cmprCnt_property_group-hide"))})):(c.addClass(e),a(">tbody>tr",d).each(function(){return this.rowIndex<c[0].rowIndex?void 0:this.rowIndex==c[0].rowIndex?void(f=!0):a(this).hasClass("js-compare-propertyGroup")?!1:void(f&&a(this).addClass("cmprCnt_property_group-hide"))})),f=!1}),a(window).scroll(function(){var a=(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft)-2;p.css("left",a+"px"),n.css("left",a+"px"),o.css("left",a+"px"),k.addClass("compare-scrolled")})})}(jQuery);