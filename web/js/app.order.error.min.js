$(document).ready(function(){if($("#product_errors").length){var c=$("#product_errors").data("value").length;c&&$.when(function(){var b=$.Deferred();$.each($("#product_errors").data("value"),function(d,a){if(708==a.code)if(0<a.quantity_available)confirm('Вы заказали товар "'+a.product.name+'" в количестве '+a.product.quantity+" шт.\n\nДоступно только "+a.quantity_available+" шт.\n\nЗаказать "+a.quantity_available+"шт?")?$.ajax({url:a.product.deleteUrl}).done(function(){$.ajax({url:a.product.addUrl}).done(function(){d+
1==c&&b.resolve()})}):d+1==c&&b.resolve();else if(confirm('Товара "'+a.product.name+'" нет в наличии для выбранного способа доставки.\n\nУдалить товар из корзины?'))$.ajax({url:a.product.deleteUrl}).done(function(){d+1==c&&b.resolve()});else{if($("#cart-link").data("value"))window.location=$("#cart-link").data("value");b.reject()}else confirm('Товар "'+a.product.name+'" недоступен для продажи.\n\nУдалить этот товар из корзины?')?$.ajax({url:a.product.deleteUrl}).done(function(){d+1==c&&b.resolve()}):
d+1==c&&b.resolve()});return b.promise()}()).done(function(){window.location.reload()})}});
