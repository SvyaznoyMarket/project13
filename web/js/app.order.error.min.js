$(document).ready(function(){if(!$("#product_errors").length)return;var e=$("#product_errors").data("value").length;if(e){var t=function(){var t=$.Deferred();return $.each($("#product_errors").data("value"),function(n,r){708==r.code?r.quantity_available>0?confirm('Вы заказали товар "'+r.product.name+'" в количестве '+r.product.quantity+" шт."+"\n\n"+"Доступно только "+r.quantity_available+" шт."+"\n\n"+"Заказать "+r.quantity_available+"шт?")?$.ajax({url:r.product.deleteUrl}).done(function(s){$.ajax({url:r.product.addUrl}).done(function(){n+1==e&&t.resolve()})}):n+1==e&&t.resolve():confirm('Товара "'+r.product.name+'" нет в наличии для выбранного способа доставки.'+"\n\n"+"Удалить товар из корзины?")?$.ajax({url:r.product.deleteUrl}).done(function(r){n+1==e&&t.resolve()}):($("#cart-link").data("value")&&(window.location=$("#cart-link").data("value")),t.reject()):confirm('Товар "'+r.product.name+'" недоступен для продажи.'+"\n\n"+"Удалить этот товар из корзины?")?$.ajax({url:r.product.deleteUrl}).done(function(){n+1==e&&t.resolve()}):n+1==e&&t.resolve()}),t.promise()};$.when(t()).done(function(){window.location.reload()})}});