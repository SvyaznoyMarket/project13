$(document).ready(function(){if($("#oneClickPromo").length){$(".halfline .bOrangeButton.active").click(function(){var e=$(this).parent().parent(),t={};t.token=e.find(".ttl").text(),t.price=e.find(".price").text(),t.image=e.find("img").attr("src"),$("#ipadwrapper").html(tmpl("ipad",t)),$("#order1click-container-new").lightbox_me({})}),$("#oneClickPromo").submit(function(e){return e.preventDefault(),!1}),typeof $.mask!="undefined"&&($.mask.definitions.n="[()0-9 -]",$("#phonemask").mask("8nnnnnnnnnnnnnnnnn",{placeholder:" ",maxlength:10}));function e(e){return e.val().replace(/\s/g,"")===""?(e.addClass("mEmpty"),e.after($('<span class="mEmpty">(!) Пожалуйста, верно заполните поле</span>')),!1):(e.hasClass("mEmpty")&&(e.removeClass("mEmpty"),e.parent().find(".mEmpty").remove()),!0)}$("#oneClickPromo input[type=text]").change(function(){e($(this))});function t(){$("#f_success").show(),$("#f_init").hide()}function n(){$("#oneClickPromo input[type=text]").removeAttr("disabled"),$("#f_init h2").text("Произошла ошибка :( Попробуйте ещё"),button.text("Отправить предзаказ")}$(".bBigOrangeButton").click(function(e){e.preventDefault(),$("#oneClickPromo input[type=text]").trigger("change");if($(".mEmpty").length)return;var r=$(this);r.text("Идёт отправка...");var i=$("#oneClickPromo").serializeArray();$("#oneClickPromo input[type=text]").attr("disabled","disabled");var s=$("#oneClickPromo").attr("action");$.ajax({url:s,data:i,success:function(e){return"success"in e?e.success!=="ok"?(n(),!1):(t(),!0):(n(),!1)}})})}if($(".bCreditLine").length){document.getElementById("requirementsFullInfoHref").style.cursor="pointer",$("#requirementsFullInfoHref").bind("click",function(){$(".bCreditLine2").toggle()});var r=$("#creditOptions").data("value"),i=$("#bankInfo").data("value"),s=$("#relations").data("value");for(var o=0;o<r.length;o++)creditOption=r[o],$("<option>").val(creditOption.id).text(creditOption.name).appendTo("#productSelector");$("#productSelector").change(function(){var e=$(this).val(),t=s[e];$("#bankProductInfoContainer").empty();for(o in t){var n={};n.bankName=i[o].name,n.bankImage=i[o].image,programNames="";for(j in t[o]){programNames+="<h4>"+i[o].programs[t[o][j]].name+"</h4>\r\n<ul>";for(k in i[o].programs[t[o][j]].params)programNames+="	<li>"+i[o].programs[t[o][j]].params[k]+"</li>\r\n";programNames+="</ul>"}n.programNames=programNames;var u=tmpl("bank_program_list_tmpl",n);$("#bankProductInfoContainer").append(u)}$("#bankProductInfoContainer").append('<p class="ac mb25"><a class="bBigOrangeButton" href="'+r[e-1].url+'">'+r[e-1].button_name+"</a></p>")})}if($(".bMobileApps").length){var u="";function a(){$(u).hide()}function f(e){return u=e,$(e).show(),!1}$("body").bind("click.mob",a),$("div.bMobDown").click(function(e){e.stopPropagation()}),$(".bMobDown__eClose").click(function(){return a(),!1}),$(".android-load").click(function(){return f(".android-block"),!1}),$(".iphone-load").click(function(){return f(".iphone-block"),!1}),$(".symbian-load").click(function(){return f(".symbian-block"),!1})}$("#hideLoginform").length&&$("#hideLoginform").bind("click",function(){$("#hideLoginform").hide(),$("#loginForm").slideDown(300)});var l=function(e,t,n,r){function c(){i.append('<div class="bPaginator_eWrap"></div>'),i.append('<div class="bPaginatorSlider"><div class="bPaginatorSlider_eWrap"><div class="bPaginatorSlider_eFill" style="width:'+u+'px"></div></div></div>');for(o=0;o<self.inputVars.totalPages;o++)$(".bPaginator_eWrap",i).append('<a class="bPaginator_eLink" href="#'+o+'">'+(o+1)+"</a>"),o+1===self.inputVars.activePage&&$(".bPaginator_eLink",i).eq(o).addClass("active");var e=$(".bPaginator_eLink",i).width();$(".bPaginator_eLink",i).css({marginLeft:(f-e-2)/2,marginRight:(f-e-2)/2}),$(".bPaginator_eWrap",i).addClass("clearfix").width(f*self.inputVars.totalPages)}function h(){var e=!1,t=0,n=0;$(".bPaginatorSlider",i).bind("mousedown",function(r){t=r.pageX,n=parseInt($(".bPaginatorSlider_eFill",i).css("left")),e=!0}),$(".bPaginatorSlider",i).bind("mouseup",function(){e=!1}),i.bind("mouseout",function(){e=!1}),$(".bPaginatorSlider",i).bind("mousemove",function(r){if(e){var o=n+(r.pageX-t);o>=0&&o<=s-u&&($(".bPaginatorSlider_eFill",i).css("left",n+(r.pageX-t)),p(o))}})}function p(e){var t=Math.round(e/a);$(".bPaginator_eWrap",i).css("left",-(f*t))}self=this,self.inputVars={domID:e,totalPages:t,visPages:n?n:10,activePage:r?r:1};var i=$("#"+self.inputVars.domID),s=i.width(),u=s*self.inputVars.visPages/self.inputVars.totalPages,a=u/self.inputVars.visPages,f=s/self.inputVars.visPages,l=Math.round(self.inputVars.visPages/2);self.setActive=function(e){$(".bPaginator_eLink",i).removeClass("active"),$(".bPaginator_eLink",i).eq(e).addClass("active");var t=parseInt($(".bPaginator_eWrap",i).css("left")),n=parseInt($(".bPaginatorSlider_eFill",i).css("left")),r=Math.round(t/f)*-1,s=-(l-(e-r));t-s*f>0?(t=0,n=0):e>self.inputVars.totalPages-l?(t=Math.round(self.inputVars.totalPages-self.inputVars.visPages)*f*-1,n=Math.round(self.inputVars.totalPages-self.inputVars.visPages)*a):(t-=s*f,n+=s*a),$(".bPaginator_eWrap").animate({left:t}),$(".bPaginatorSlider_eFill",i).animate({left:n})},c(),h()};if($("#promoCatalog").length){var c=$("#promoCatalog").data("slides"),h=c.length,p=new l("promoCatalogPaginator",h,12,1),d=function(){for(var e in c){var t=tmpl("slide_tmpl",c[e]);$(".bPromoCatalogSliderWrap").append(t),$(".bPromoCatalogNav").append('<a id="promoCatalogSlide'+e+'" href="#'+e+'" class="bPromoCatalogNav_eLink">'+(e*1+1)+"</a>")}};d();var v=$(".bPromoCatalogSliderWrap_eSlide").width(),m=$(".bPromoCatalogSliderWrap").width(v*h+(460-v/2)),g=0;$(".bPromoCatalogSlider_eArrow").bind("click",function(){var e=$(this).hasClass("mArLeft")?"-1":"1";return y(g+e*1),!1}),$(".bPaginator_eLink").bind("click",function(){if($(this).hasClass("active"))return!1;var e=$(this).attr("href").slice(1)*1;return y(e),!1});var y=function(e){e===0?$(".bPromoCatalogSlider_eArrow.mArLeft").hide():$(".bPromoCatalogSlider_eArrow.mArLeft").show(),e===h-1?$(".bPromoCatalogSlider_eArrow.mArRight").hide():$(".bPromoCatalogSlider_eArrow.mArRight").show(),$(".bPromoCatalogSliderWrap").animate({left:-(v*e)},500,function(){g=e}),p.setActive(e)}}});