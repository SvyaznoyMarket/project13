/*! Enter - v.40 - 2013-05-07 */$(document).ready(function(){function e(e){return""===e.val().replace(/\s/g,"")?(e.addClass("mEmpty"),e.after($('<span class="mEmpty">(!) Пожалуйста, верно заполните поле</span>')),!1):(e.hasClass("mEmpty")&&(e.removeClass("mEmpty"),e.parent().find(".mEmpty").remove()),!0)}function t(){$("#f_success").show(),$("#f_init").hide()}function i(){$("#oneClickPromo input[type=text]").removeAttr("disabled"),$("#f_init h2").text("Произошла ошибка :( Попробуйте ещё"),button.text("Отправить предзаказ")}function n(){$(u).hide()}function a(e){return u=e,$(e).show(),!1}if($(".infiniteCarousel").infiniteCarousel(),$(".getProductList").length&&(console.log("yes!"),$(".getProductList").each(function(){var e=$(this),t=e.data("product"),i="/products/widget/"+t;$.get(i,function(t){return t.success?(e.html(t.content),void 0):!1})})),$("#corp_select").length&&($('form[action="/corporate-register"]').bind("submit",function(){return"Другая форма"===$("#corp_select").find("option:selected").val()?!1:void 0}),$("#corp_select").change(function(){"Другая форма"===$(this).find("option:selected").val()&&$("#corpNotice").lightbox_me({centered:!0,closeSelector:".close"})})),$("#oneClickPromo").length&&($(".halfline .bOrangeButton.active").click(function(){var e=$(this).parent().parent(),t={};t.token=e.find(".ttl").text(),t.price=e.find(".price").text(),t.image=e.find("img").attr("src"),$("#ipadwrapper").html(tmpl("ipad",t)),$("#order1click-container-new").lightbox_me({})}),$("#oneClickPromo").submit(function(e){return e.preventDefault(),!1}),$.mask!==void 0&&($.mask.definitions.n="[()0-9 -]",$("#phonemask").mask("8nnnnnnnnnnnnnnnnn",{placeholder:" ",maxlength:10})),$("#oneClickPromo input[type=text]").change(function(){e($(this))}),$(".bBigOrangeButton").click(function(e){if(e.preventDefault(),$("#oneClickPromo input[type=text]").trigger("change"),!$(".mEmpty").length){var n=$(this);n.text("Идёт отправка...");var a=$("#oneClickPromo").serializeArray();$("#oneClickPromo input[type=text]").attr("disabled","disabled");var o=$("#oneClickPromo").attr("action");$.ajax({url:o,data:a,success:function(e){return"success"in e?"ok"!==e.success?(i(),!1):(t(),!0):(i(),!1)}})}})),$(".bCreditLine").length){document.getElementById("requirementsFullInfoHref").style.cursor="pointer",$("#requirementsFullInfoHref").bind("click",function(){$(".bCreditLine2").toggle()});for(var o=$("#creditOptions").data("value"),s=$("#bankInfo").data("value"),r=$("#relations").data("value"),l=0;o.length>l;l++)creditOption=o[l],$("<option>").val(creditOption.id).text(creditOption.name).appendTo("#productSelector");$("#productSelector").change(function(){var e=$(this).val(),t=r[e];$("#bankProductInfoContainer").empty();for(l in t){var i={};i.bankName=s[l].name,i.bankImage=s[l].image,programNames="";for(j in t[l]){programNames+="<h4>"+s[l].programs[t[l][j]].name+"</h4>\r\n<ul>";for(k in s[l].programs[t[l][j]].params)programNames+="	<li>"+s[l].programs[t[l][j]].params[k]+"</li>\r\n";programNames+="</ul>"}i.programNames=programNames;var n=tmpl("bank_program_list_tmpl",i);$("#bankProductInfoContainer").append(n)}$("#bankProductInfoContainer").append('<p class="ac mb25"><a class="bBigOrangeButton" href="'+o[e-1].url+'">'+o[e-1].button_name+"</a></p>")})}if($(".bMobileApps").length){var u="";$("body").bind("click.mob",n),$("div.bMobDown").click(function(e){e.stopPropagation()}),$(".bMobDown__eClose").click(function(){return n(),!1}),$(".android-load").click(function(){return a(".android-block"),!1}),$(".iphone-load").click(function(){return a(".iphone-block"),!1}),$(".symbian-load").click(function(){return a(".symbian-block"),!1})}$("#hideLoginform").length&&$("#hideLoginform").bind("click",function(){var e=$("#login-form");return $("#hideLoginform").hide(),e.slideDown(300),$.scrollTo(e,500),console.log("123"),!1});var c=function(e,t,i,n){function a(){for(r.append('<div class="bPaginator_eWrap"></div>'),r.append('<div class="bPaginatorSlider"><div class="bPaginatorSlider_eWrap"><div class="bPaginatorSlider_eFill" style="width:'+c+'px"></div></div></div>'),l=0;self.inputVars.totalPages>l;l++)$(".bPaginator_eWrap",r).append('<a class="bPaginator_eLink" href="#'+l+'">'+(l+1)+"</a>"),l+1===self.inputVars.activePage&&$(".bPaginator_eLink",r).eq(l).addClass("active");var e=$(".bPaginator_eLink",r).width();$(".bPaginator_eLink",r).css({marginLeft:(h-e-2)/2,marginRight:(h-e-2)/2}),$(".bPaginator_eWrap",r).addClass("clearfix").width(h*self.inputVars.totalPages)}function o(){var e=!1,t=0,i=0;$(".bPaginatorSlider",r).bind("mousedown",function(n){t=n.pageX,i=parseInt($(".bPaginatorSlider_eFill",r).css("left")),e=!0}),$(".bPaginatorSlider",r).bind("mouseup",function(){e=!1}),r.bind("mouseout",function(){e=!1}),$(".bPaginatorSlider",r).bind("mousemove",function(n){if(e){var a=i+(n.pageX-t);a>=0&&u-c>=a&&($(".bPaginatorSlider_eFill",r).css("left",i+(n.pageX-t)),s(a))}})}function s(e){var t=Math.round(e/d);$(".bPaginator_eWrap",r).css("left",-(h*t))}self=this,self.inputVars={domID:e,totalPages:t,visPages:i?i:10,activePage:n?n:1};var r=$("#"+self.inputVars.domID),u=r.width(),c=u*self.inputVars.visPages/self.inputVars.totalPages,d=c/self.inputVars.visPages,h=u/self.inputVars.visPages,f=Math.round(self.inputVars.visPages/2);self.setActive=function(e){$(".bPaginator_eLink",r).removeClass("active"),$(".bPaginator_eLink",r).eq(e).addClass("active");var t=parseInt($(".bPaginator_eWrap",r).css("left")),i=parseInt($(".bPaginatorSlider_eFill",r).css("left")),n=-1*Math.round(t/h),a=-(f-(e-n));t-a*h>0?(t=0,i=0):e>self.inputVars.totalPages-f?(t=-1*Math.round(self.inputVars.totalPages-self.inputVars.visPages)*h,i=Math.round(self.inputVars.totalPages-self.inputVars.visPages)*d):(t-=a*h,i+=a*d),$(".bPaginator_eWrap").animate({left:t}),$(".bPaginatorSlider_eFill",r).animate({left:i})},a(),o()};if($("#promoCatalog").length){var d=$("#promoCatalog").data("slides"),h=d.length,f=new c("promoCatalogPaginator",h,12,1),p=function(){for(var e in d){var t=tmpl("slide_tmpl",d[e]);$(".bPromoCatalogSliderWrap").append(t),""==$(".bPromoCatalogSliderWrap_eSlideLink").eq(e).attr("href")&&$(".bPromoCatalogSliderWrap_eSlideLink").eq(e).removeAttr("href"),$(".bPromoCatalogNav").append('<a id="promoCatalogSlide'+e+'" href="#'+e+'" class="bPromoCatalogNav_eLink">'+(1*e+1)+"</a>")}};p();var m=$(".bPromoCatalogSliderWrap_eSlide").width();$(".bPromoCatalogSliderWrap").width(m*h+(460-m/2));var g=0;$(".bPromoCatalogSlider_eArrow").bind("click",function(){var e=$(this).hasClass("mArLeft")?"-1":"1";return v(g+1*e),!1}),$(".bPaginator_eLink").bind("click",function(){if($(this).hasClass("active"))return!1;var e=1*$(this).attr("href").slice(1);return v(e),!1});var v=function(e){0===e?$(".bPromoCatalogSlider_eArrow.mArLeft").hide():$(".bPromoCatalogSlider_eArrow.mArLeft").show(),e===h-1?$(".bPromoCatalogSlider_eArrow.mArRight").hide():$(".bPromoCatalogSlider_eArrow.mArRight").show(),$(".bPromoCatalogSliderWrap").animate({left:-(m*e)},500,function(){g=e}),window.location.hash="slide"+(e+1),f.setActive(e)},b=window.location.hash;if(b.indexOf("slide")+1){var y=parseInt(b.slice(6))-1;v(y)}}});