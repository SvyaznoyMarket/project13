function MapWithShops(e,f,g){var a=this;a.mapWS=null;a.infoWindow=null;a.positionC=null;a.markers=[];this.showInfobox=function(b){var h=a.markers[b.id];b.setVisible(!1);$.each(f.find("[data-name]"),function(a,b){b.innerHTML=h[$(b).data("name")]});a.infoWindow.setContent(f.prop("innerHTML"));a.infoWindow.setPosition(b.position);a.infoWindow.open(a.mapWS);google.maps.event.addListener(a.infoWindow,"closeclick",function(){b.setVisible(!0)})};this.showMarkers=function(b){$.each(a.markers,function(a,b){"undefined"!==
typeof b.ref&&b.ref.setMap(null)});a.markers=b;google.maps.event.trigger(a.mapWS,"resize");a.mapWS.setCenter(a.positionC);$.each(b,function(b,c){var d=new google.maps.Marker({position:new google.maps.LatLng(c.latitude,c.longitude),map:a.mapWS,title:c.name,icon:c.markerImg,id:c.id});google.maps.event.addListener(d,"click",function(){a.showInfobox(this)});a.markers[d.id].ref=d})};this.closeMap=function(){a.infoWindow.close();$(".mMapPopup").trigger("close")};(function(){a.positionC=new google.maps.LatLng(e.latitude,
e.longitude);var b={zoom:11,center:a.positionC,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};a.mapWS=new google.maps.Map(document.getElementById(g),b);a.infoWindow=new google.maps.InfoWindow({maxWidth:400,disableAutoPan:!1})})()}$(document).ready(function(){window.regionMap=new MapWithShops($("#map-center").data("content"),$("#map-info_window-container"),"mapPopup")});
