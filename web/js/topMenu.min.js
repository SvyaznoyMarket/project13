var hoverMainMenu=!1,checkedItem=null,pointA={x:0,y:0},pointB={x:0,y:0},pointC={x:0,y:0},cursorNow={x:0,y:0};getTriangleS=function(e,t,i){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),a=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),n=(r+a+o)/2,s=Math.sqrt(n*(n-r)*(n-a)*(n-o));return s},menuCheckTriangle=function(){var e=(pointA.x-cursorNow.x)*(pointB.y-A.y)-(pointB.x-pointA.x)*(pointA.y-cursorNow.y),t=(pointB.x-cursorNow.x)*(pointC.y-pointB.y)-(pointC.x-pointB.x)*(pointB.y-cursorNow.y),i=(pointC.x-cursorNow.x)*(pointA.y-pointC.y)-(pointA.x-pointC.x)*(pointC.y-cursorNow.y);return e>=0&&t>=0&&i>=0||0>=e&&0>=t&&0>=i?(console.info("принадлежит"),!0):(console.info("не принадлежит"),!1)},menuMove=function(e){cursorNow={x:e.pageX,y:e.pageY}},menuHoverOut=function(e){var t={x:e.pageX,y:e.pageY};console.log("убираем"),menuCheckTriangle(t,pointA,pointB,pointC)||($(".bMainMenuLevel-1__eItem").removeClass("hover"),hoverMainMenu=!1,$(this).trigger("mouseenter"))},activateItem=function(e){console.log("activate"),checkedItem=e,e.addClass("hover")},createMenuTriangle=function(){pointA={x:cursorNow.x,y:cursorNow.y},pointB={x:dropMenu.offset().left,y:dropMenu.offset().top},pointC={x:dropMenu.offset().left+dropMenu.width(),y:dropMenu.offset().top}},checkItem=function(e){console.log("checkedItem"),0==pointA.x&&0==pointA.y&&createMenuTriangle(e),menuCheckTriangle()?(console.log("входит"),activateItem(e)):(console.log("не входит"),createMenuTriangle(e),checkedItem.removeClass("hover"),checkedItem=e)},menuHoverIn=function(){console.log("handler"),this!=checkedItem&&(console.log("new hover"),checkItem(this))},$(".bMainMenuLevel-1__eItem").mouseenter(menuHoverIn),$(document).mousemove(menuMove);