$(document).ready(function(){var a=$(".bMap__eScrollWrap");a.delegate("div.map-image-link","click",function(){$(this).hasClass("first")&&$("div.map-360-link",a).length?$("div.map-360-link",a).trigger("click"):$(this).hasClass("mChecked")||($("div.mChecked",$(this).parent()).removeClass("mChecked"),$(this).addClass("mChecked"))});$("div.map-360-link",a).length&&a.delegate("div.map-360-link","click",function(b){$("div.mChecked",$(".bMap__eScrollWrap")).removeClass("mChecked");if(!$("#map-container embed").length){$(this);
var d=$("#map-panorama").data();embedpano({swf:d.swf,xml:d.xml,target:"map-container",wmode:"transparent"})}b.stopPropagation()});a.delegate("div.map-google-link","click",function(){$("div.mChecked",a).removeClass("mChecked");if(!$("#map-container div").length){$(this);var b={zoom:16,center:new google.maps.LatLng($('[name="shop[latitude]"]').val(),$('[name="shop[longitude]"]').val()),scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}},
b=new google.maps.Map(document.getElementById("map-container"),b);new google.maps.Marker({position:new google.maps.LatLng($('[name="shop[latitude]"]').val(),$('[name="shop[longitude]"]').val()),map:b,title:$('[name="shop[name]"]').val(),icon:"/images/marker.png"})}});$("div.map-google-link:first",a).trigger("click");$("#region_map-container").bind({create:function(b,d,a,e){var c=$(this),b={zoom:11,center:new google.maps.LatLng(d.latitude,d.longitude),scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,
mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}},g=new google.maps.Map(document.getElementById(c.attr("id")),b),b=new InfoBox({disableAutoPan:!1,maxWidth:0,pixelOffset:new google.maps.Size(-11,-108),zIndex:null,boxStyle:{opacity:0.85,width:"280px"},closeBoxURL:"http://www.google.com/intl/en_us/mapfiles/close.gif",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatShadow",enableEventPropagation:!1}),h=function(){var b=a[this.id];c.trigger("showMarkers");c.trigger("infoWindow",
[this,b])};c.data("markers",[]);$.each(a,function(b,a){var d=new google.maps.Marker({position:new google.maps.LatLng(a.latitude,a.longitude),map:g,title:a.name,icon:"/images/marker.png",id:a.id});google.maps.event.addListener(d,"click",h);c.data("markers").push(d)});google.maps.event.addListener(g,"bounds_changed",function(){});google.maps.event.addListener(g,"click",function(){});google.maps.event.addListener(b,"closeclick",function(){c.trigger("showMarkers")});c.data("map",g);c.data("infoWindow",
b);c.data("infoWindowTemplate",e)},move:function(){$(this).data("map")},infoWindow:function(b,a,f){var e=$(this),b=e.data("map"),c=e.data("infoWindow"),e=e.data("infoWindowTemplate");a.setMap(null);$.each(e.find("[data-name]"),function(b,a){a.innerHTML=f[$(a).data("name")]});c.setContent(e.prop("innerHTML"));c.open(b,a)},showMarkers:function(){var a=$(this);$.each(a.data("markers"),function(d,f){null==f.map&&f.setMap(a.data("map"))})}});$("#region_map-container").length&&$("#region_map-container").trigger("create",
[$("#map-center").data("content"),$("#map-markers").data("content"),$("#map-info_window-container")]);$("#region-select").bind("change",function(){window.location=$(this).find("option:selected").data("url")})});
